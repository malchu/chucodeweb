{"ast":null,"code":"var _excluded = [\"a11yTitle\", \"aria-label\", \"children\", \"disabled\", \"dropAlign\", \"dropBackground\", \"dropProps\", \"dropTarget\", \"justifyContent\", \"icon\", \"items\", \"label\", \"messages\", \"onKeyDown\", \"open\", \"plain\", \"size\"],\n  _excluded2 = [\"align\"];\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\nimport React, { useRef, forwardRef, useCallback, useContext, useMemo, useState, useEffect } from 'react';\nimport styled, { ThemeContext } from 'styled-components';\nimport { defaultProps } from '../../default-props';\nimport { Box } from '../Box';\nimport { Button } from '../Button';\nimport { DropButton } from '../DropButton';\nimport { Keyboard } from '../Keyboard';\nimport { Text } from '../Text';\nimport { normalizeColor } from '../../utils';\nimport { MessageContext } from '../../contexts/MessageContext';\nimport { MenuPropTypes } from './propTypes';\nvar ContainerBox = styled(Box).withConfig({\n  displayName: \"Menu__ContainerBox\",\n  componentId: \"sc-17fcys9-0\"\n})([\"max-height:inherit;@media screen and (-ms-high-contrast:active),(-ms-high-contrast:none){width:100%;}:focus{outline:none;}\", \";\"], function (props) {\n  return props.theme.menu.extend;\n});\n\n/* Notes on keyboard interactivity (based on W3) // For details reference: https://www.w3.org/TR/wai-aria-practices/#menu\n\nTo open menu when menu button is focused:\n- Space/Enter/Up arrow/Down arrow will open menu\n\nTo navigate within menu:\n- Up/down arrow keys can be used and will loop through options\n(keeping focus within the Menu)\n- Tab can be used, but once the last menu item is reached, Tab will close the\nMenu and continue through page content.\n\nTo close the menu:\n- Tabbing beyond the first or last menu item.\n- Esc will close the menu\n- Select a menu item\n\nTo make a selection:\n- Enter key is pressed.\n- Space is pressed.\n*/\n\nvar Menu = /*#__PURE__*/forwardRef(function (props, ref) {\n  var a11yTitle = props.a11yTitle,\n    ariaLabel = props['aria-label'],\n    children = props.children,\n    disabled = props.disabled,\n    dropAlign = props.dropAlign,\n    dropBackground = props.dropBackground,\n    dropProps = props.dropProps,\n    dropTarget = props.dropTarget,\n    justifyContent = props.justifyContent,\n    icon = props.icon,\n    items = props.items,\n    label = props.label,\n    messages = props.messages,\n    onKeyDown = props.onKeyDown,\n    open = props.open,\n    plain = props.plain,\n    size = props.size,\n    rest = _objectWithoutPropertiesLoose(props, _excluded);\n  var theme = useContext(ThemeContext) || defaultProps.theme;\n  var _useContext = useContext(MessageContext),\n    format = _useContext.format;\n  var iconColor = normalizeColor(theme.menu.icons.color || 'control', theme);\n  // need to destructure the align otherwise it will get passed through\n  // to DropButton and override prop values\n  var _theme$menu$drop = theme.menu.drop,\n    themeDropAlign = _theme$menu$drop.align,\n    themeDropProps = _objectWithoutPropertiesLoose(_theme$menu$drop, _excluded2);\n  var a11y = ariaLabel || a11yTitle;\n\n  // total number of menu items\n  var itemCount = useMemo(function () {\n    var count = 0;\n    if (items && Array.isArray(items[0])) {\n      items.forEach(function (group) {\n        count += group.length;\n      });\n    } else count = items.length;\n    return count;\n  }, [items]);\n  var align = dropProps && dropProps.align || dropAlign || themeDropAlign;\n  var controlButtonIndex = useMemo(function () {\n    if (align.top === 'top') return -1;\n    if (align.bottom === 'bottom') return itemCount;\n    return undefined;\n  }, [align, itemCount]);\n\n  // Keeps track of whether menu options should be mirrored\n  // when there's not enough space below DropButton. This state\n  // is modified on /Drop/DropContainer.js.\n  var _useState = useState(),\n    alignControlMirror = _useState[0],\n    setAlignControlMirror = _useState[1];\n  var initialAlignTop = alignControlMirror === align.top;\n  var dropContainerRef = useRef();\n  var buttonRefs = useRef([]);\n  var constants = useMemo(function () {\n    return {\n      none: 'none',\n      tab: 9,\n      // Menu control button included on top of menu items\n      controlTop: align.top === 'top' || undefined,\n      // Menu control button included on the bottom of menu items\n      controlBottom: align.bottom === 'bottom' || undefined,\n      controlButtonIndex: controlButtonIndex\n    };\n  }, [align, controlButtonIndex]);\n  var _useState2 = useState(constants.none),\n    activeItemIndex = _useState2[0],\n    setActiveItemIndex = _useState2[1];\n  var _useState3 = useState(open || false),\n    isOpen = _useState3[0],\n    setOpen = _useState3[1];\n  var MenuIcon = isOpen && theme.menu.icons.up ? theme.menu.icons.up : theme.menu.icons.down;\n  var onDropClose = useCallback(function () {\n    setActiveItemIndex(constants.none);\n    setOpen(false);\n  }, [constants.none]);\n  var onDropOpen = useCallback(function () {\n    setOpen(true);\n  }, []);\n  useEffect(function () {\n    // need to wait for Drop to be ready\n    var timer = setTimeout(function () {\n      if (isOpen) {\n        var optionsNode = dropContainerRef.current;\n        if (optionsNode) {\n          optionsNode.focus();\n        }\n      }\n    }, 100);\n    return function () {\n      return clearTimeout(timer);\n    };\n  }, [isOpen]);\n  var onSelectMenuItem = function onSelectMenuItem(event) {\n    if (isOpen) {\n      if (activeItemIndex >= 0) {\n        event.preventDefault();\n        event.stopPropagation();\n        buttonRefs.current[activeItemIndex].click();\n      }\n    } else {\n      onDropOpen();\n    }\n  };\n  var isTab = function isTab(event) {\n    return event.keyCode === constants.tab || event.which === constants.tab;\n  };\n  var onNextMenuItem = function onNextMenuItem(event) {\n    event.preventDefault();\n    if (!isOpen) {\n      onDropOpen();\n    } else if (isTab(event) && (!constants.controlBottom && activeItemIndex === itemCount - 1 || constants.controlBottom && activeItemIndex === controlButtonIndex)) {\n      // User has reached end of the menu, this tab will close\n      // the menu drop because there are no more \"next items\" to access\n      onDropClose();\n    } else {\n      var index;\n      if (\n      // This checks if the user has reached the end of the menu.\n      // In the case the the menu control button is located at the\n      // bottom of the menu, it checks if the user has reached the button.\n      // Otherwise, it checks if the user is at the last menu item.\n      constants.controlBottom && activeItemIndex === controlButtonIndex || !constants.controlBottom && activeItemIndex === itemCount - 1 || activeItemIndex === constants.none) {\n        // place focus on the first menu item\n        index = 0;\n      } else {\n        index = activeItemIndex + 1;\n      }\n      setActiveItemIndex(index);\n      if (buttonRefs.current[index]) {\n        buttonRefs.current[index].focus();\n      }\n    }\n  };\n  var onPreviousMenuItem = function onPreviousMenuItem(event) {\n    event.preventDefault();\n    if (!isOpen) {\n      onDropOpen();\n    } else if (isTab(event) && (constants.controlTop && activeItemIndex === controlButtonIndex || !constants.controlTop && activeItemIndex - 1 < 0)) {\n      // User has reached beginning of the menu, this tab will close\n      // the menu drop because there are no more \"previous items\" to access\n      onDropClose();\n    } else {\n      var index;\n      if (activeItemIndex === 'none') {\n        index = itemCount - 1;\n      } else if (activeItemIndex - 1 < 0) {\n        if (constants.controlTop && activeItemIndex - 1 === controlButtonIndex) {\n          index = itemCount;\n        } else {\n          index = itemCount - 1;\n        }\n      } else {\n        index = activeItemIndex - 1;\n      }\n      setActiveItemIndex(index);\n      if (buttonRefs.current[index]) {\n        buttonRefs.current[index].focus();\n      }\n    }\n  };\n  var menuIcon = icon !== false ? icon !== true && icon || /*#__PURE__*/React.createElement(MenuIcon, {\n    color: iconColor,\n    size: size\n  }) : null;\n  var buttonProps = {\n    plain: plain,\n    size: size\n  };\n  var content;\n  if (children) {\n    content = children;\n  } else if (!theme.button[\"default\"]) {\n    content = /*#__PURE__*/React.createElement(Box, {\n      direction: \"row\",\n      justify: justifyContent,\n      align: \"center\",\n      pad: \"small\",\n      gap: label && icon !== false ? 'small' : undefined\n    }, /*#__PURE__*/React.createElement(Text, {\n      size: size\n    }, label), menuIcon);\n  } else {\n    // when a theme has theme.button.default, keep content as\n    // undefined so we can rely on Button label & icon props\n    buttonProps = {\n      icon: menuIcon,\n      label: label,\n      plain: plain,\n      reverse: true,\n      size: size\n    };\n    content = undefined;\n  }\n  var controlMirror = /*#__PURE__*/React.createElement(Box, {\n    flex: false\n  }, /*#__PURE__*/React.createElement(Button, _extends({\n    ref: function ref(r) {\n      // make it accessible at the end of all menu items\n      buttonRefs.current[itemCount] = r;\n    },\n    a11yTitle: a11y || format({\n      id: 'menu.closeMenu',\n      messages: messages\n    }),\n    active: activeItemIndex === controlButtonIndex,\n    focusIndicator: false,\n    hoverIndicator: \"background\",\n    onClick: onDropClose,\n    onFocus: function onFocus() {\n      return setActiveItemIndex(controlButtonIndex);\n    }\n    // On first tab into menu, the control button should not\n    // be able to receive tab focus because the focus should\n    // go to the first menu item instead.\n    ,\n\n    tabIndex: activeItemIndex === constants.none ? '-1' : undefined\n  }, theme.menu.item, buttonProps), typeof content === 'function' ? function () {\n    return content(_extends({}, props, {\n      drop: true\n    }));\n  } : content));\n  var menuItem = function menuItem(item, index) {\n    var _theme$menu$item, _theme$menu$item2, _theme$menu$item3;\n    // Determine whether the label is done as a child or\n    // as an option Button kind property.\n    var child = !theme.button.option ? /*#__PURE__*/React.createElement(Box, {\n      align: \"start\",\n      pad: \"small\",\n      direction: \"row\",\n      gap: item.gap || ((_theme$menu$item = theme.menu.item) == null ? void 0 : _theme$menu$item.gap),\n      justify: item.justify || ((_theme$menu$item2 = theme.menu.item) == null ? void 0 : _theme$menu$item2.justify)\n    }, item.reverse && item.label, item.icon, !item.reverse && item.label) : undefined;\n\n    // if we have a child, turn on plain, and hoverIndicator\n    return /*#__PURE__*/(\n      // eslint-disable-next-line react/no-array-index-key\n      React.createElement(Box, {\n        key: index,\n        flex: false,\n        role: \"none\"\n      }, /*#__PURE__*/React.createElement(Button, _extends({\n        ref: function ref(r) {\n          buttonRefs.current[index] = r;\n        },\n        role: \"menuitem\",\n        onFocus: function onFocus() {\n          setActiveItemIndex(index);\n        },\n        active: activeItemIndex === index,\n        focusIndicator: false,\n        plain: !child ? undefined : true,\n        align: \"start\",\n        kind: !child ? 'option' : undefined,\n        hoverIndicator: !child ? undefined : 'background'\n      }, theme.menu.item, {\n        justify: item.justify || ((_theme$menu$item3 = theme.menu.item) == null ? void 0 : _theme$menu$item3.justify)\n      }, !child ? item : _extends({}, item, {\n        gap: undefined,\n        icon: undefined,\n        label: undefined,\n        reverse: undefined\n      }), {\n        onClick: function onClick() {\n          if (item.onClick) {\n            item.onClick.apply(item, arguments);\n          }\n          if (item.close !== false) {\n            onDropClose();\n          }\n        }\n      }), child))\n    );\n  };\n  var menuContent;\n  if (itemCount && Array.isArray(items[0])) {\n    var index = 0;\n    menuContent = items.map(function (group, groupIndex) {\n      var _theme$menu$group, _theme$menu$group$sep, _theme$menu$group2, _theme$menu$group2$se, _theme$menu$group3;\n      return /*#__PURE__*/React.createElement(Box\n      // eslint-disable-next-line react/no-array-index-key\n      , {\n        key: groupIndex\n      }, groupIndex > 0 && /*#__PURE__*/React.createElement(Box, {\n        pad: theme.menu.group.separator.pad\n      }, /*#__PURE__*/React.createElement(Box, {\n        border: {\n          side: 'top',\n          color: (_theme$menu$group = theme.menu.group) == null ? void 0 : (_theme$menu$group$sep = _theme$menu$group.separator) == null ? void 0 : _theme$menu$group$sep.color,\n          size: (_theme$menu$group2 = theme.menu.group) == null ? void 0 : (_theme$menu$group2$se = _theme$menu$group2.separator) == null ? void 0 : _theme$menu$group2$se.size\n        }\n      })), /*#__PURE__*/React.createElement(Box, (_theme$menu$group3 = theme.menu.group) == null ? void 0 : _theme$menu$group3.container, group.map(function (item) {\n        // item index needs to be its index in the entire menu as if\n        // it were a flat array\n        var currentIndex = index;\n        index += 1;\n        return menuItem(item, currentIndex);\n      })));\n    });\n  } else menuContent = items.map(function (item, index) {\n    return menuItem(item, index);\n  });\n  return /*#__PURE__*/React.createElement(Keyboard, {\n    onDown: onDropOpen,\n    onUp: onDropOpen,\n    onSpace: onSelectMenuItem,\n    onEsc: onDropClose,\n    onTab: onDropClose,\n    onKeyDown: onKeyDown\n  }, /*#__PURE__*/React.createElement(DropButton, _extends({\n    ref: ref\n  }, rest, buttonProps, {\n    a11yTitle: a11y || format({\n      id: 'menu.openMenu',\n      messages: messages\n    }),\n    \"aria-haspopup\": \"menu\",\n    \"aria-expanded\": isOpen,\n    onAlign: setAlignControlMirror,\n    disabled: disabled,\n    dropAlign: align,\n    dropTarget: dropTarget,\n    dropProps: dropProps || themeDropProps,\n    open: isOpen,\n    onOpen: onDropOpen,\n    onClose: onDropClose,\n    dropContent: /*#__PURE__*/React.createElement(Keyboard, {\n      onTab: function onTab(event) {\n        return event.shiftKey ? onPreviousMenuItem(event) : onNextMenuItem(event);\n      },\n      onDown: onNextMenuItem,\n      onUp: onPreviousMenuItem,\n      onEnter: onSelectMenuItem\n    }, /*#__PURE__*/React.createElement(ContainerBox, {\n      ref: dropContainerRef,\n      tabIndex: -1,\n      background: dropBackground || theme.menu.background\n    }, alignControlMirror === 'top' && align.top === 'top' ? controlMirror : undefined, /*#__PURE__*/React.createElement(Box, {\n      overflow: \"auto\",\n      role: \"menu\",\n      a11yTitle: a11y\n    }, menuContent), !initialAlignTop && (alignControlMirror === 'bottom' || align.bottom === 'bottom') ? controlMirror : undefined))\n  }), content));\n});\nMenu.defaultProps = {\n  items: [],\n  messages: undefined,\n  justifyContent: 'start'\n};\nMenu.displayName = 'Menu';\nMenu.propTypes = MenuPropTypes;\nexport { Menu };","map":{"version":3,"names":["_excluded","_excluded2","_extends","Object","assign","bind","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutPropertiesLoose","excluded","sourceKeys","keys","indexOf","React","useRef","forwardRef","useCallback","useContext","useMemo","useState","useEffect","styled","ThemeContext","defaultProps","Box","Button","DropButton","Keyboard","Text","normalizeColor","MessageContext","MenuPropTypes","ContainerBox","withConfig","displayName","componentId","props","theme","menu","extend","Menu","ref","a11yTitle","ariaLabel","children","disabled","dropAlign","dropBackground","dropProps","dropTarget","justifyContent","icon","items","label","messages","onKeyDown","open","plain","size","rest","_useContext","format","iconColor","icons","color","_theme$menu$drop","drop","themeDropAlign","align","themeDropProps","a11y","itemCount","count","Array","isArray","forEach","group","controlButtonIndex","top","bottom","undefined","_useState","alignControlMirror","setAlignControlMirror","initialAlignTop","dropContainerRef","buttonRefs","constants","none","tab","controlTop","controlBottom","_useState2","activeItemIndex","setActiveItemIndex","_useState3","isOpen","setOpen","MenuIcon","up","down","onDropClose","onDropOpen","timer","setTimeout","optionsNode","current","focus","clearTimeout","onSelectMenuItem","event","preventDefault","stopPropagation","click","isTab","keyCode","which","onNextMenuItem","index","onPreviousMenuItem","menuIcon","createElement","buttonProps","content","button","direction","justify","pad","gap","reverse","controlMirror","flex","r","id","active","focusIndicator","hoverIndicator","onClick","onFocus","tabIndex","item","menuItem","_theme$menu$item","_theme$menu$item2","_theme$menu$item3","child","option","role","kind","close","menuContent","map","groupIndex","_theme$menu$group","_theme$menu$group$sep","_theme$menu$group2","_theme$menu$group2$se","_theme$menu$group3","separator","border","side","container","currentIndex","onDown","onUp","onSpace","onEsc","onTab","onAlign","onOpen","onClose","dropContent","shiftKey","onEnter","background","overflow","propTypes"],"sources":["C:/Users/malch/OneDrive/Documents/Projects/chucode/node_modules/grommet/es6/components/Menu/Menu.js"],"sourcesContent":["var _excluded = [\"a11yTitle\", \"aria-label\", \"children\", \"disabled\", \"dropAlign\", \"dropBackground\", \"dropProps\", \"dropTarget\", \"justifyContent\", \"icon\", \"items\", \"label\", \"messages\", \"onKeyDown\", \"open\", \"plain\", \"size\"],\n  _excluded2 = [\"align\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nimport React, { useRef, forwardRef, useCallback, useContext, useMemo, useState, useEffect } from 'react';\nimport styled, { ThemeContext } from 'styled-components';\nimport { defaultProps } from '../../default-props';\nimport { Box } from '../Box';\nimport { Button } from '../Button';\nimport { DropButton } from '../DropButton';\nimport { Keyboard } from '../Keyboard';\nimport { Text } from '../Text';\nimport { normalizeColor } from '../../utils';\nimport { MessageContext } from '../../contexts/MessageContext';\nimport { MenuPropTypes } from './propTypes';\nvar ContainerBox = styled(Box).withConfig({\n  displayName: \"Menu__ContainerBox\",\n  componentId: \"sc-17fcys9-0\"\n})([\"max-height:inherit;@media screen and (-ms-high-contrast:active),(-ms-high-contrast:none){width:100%;}:focus{outline:none;}\", \";\"], function (props) {\n  return props.theme.menu.extend;\n});\n\n/* Notes on keyboard interactivity (based on W3) // For details reference: https://www.w3.org/TR/wai-aria-practices/#menu\n\nTo open menu when menu button is focused:\n- Space/Enter/Up arrow/Down arrow will open menu\n\nTo navigate within menu:\n- Up/down arrow keys can be used and will loop through options\n(keeping focus within the Menu)\n- Tab can be used, but once the last menu item is reached, Tab will close the\nMenu and continue through page content.\n\nTo close the menu:\n- Tabbing beyond the first or last menu item.\n- Esc will close the menu\n- Select a menu item\n\nTo make a selection:\n- Enter key is pressed.\n- Space is pressed.\n*/\n\nvar Menu = /*#__PURE__*/forwardRef(function (props, ref) {\n  var a11yTitle = props.a11yTitle,\n    ariaLabel = props['aria-label'],\n    children = props.children,\n    disabled = props.disabled,\n    dropAlign = props.dropAlign,\n    dropBackground = props.dropBackground,\n    dropProps = props.dropProps,\n    dropTarget = props.dropTarget,\n    justifyContent = props.justifyContent,\n    icon = props.icon,\n    items = props.items,\n    label = props.label,\n    messages = props.messages,\n    onKeyDown = props.onKeyDown,\n    open = props.open,\n    plain = props.plain,\n    size = props.size,\n    rest = _objectWithoutPropertiesLoose(props, _excluded);\n  var theme = useContext(ThemeContext) || defaultProps.theme;\n  var _useContext = useContext(MessageContext),\n    format = _useContext.format;\n  var iconColor = normalizeColor(theme.menu.icons.color || 'control', theme);\n  // need to destructure the align otherwise it will get passed through\n  // to DropButton and override prop values\n  var _theme$menu$drop = theme.menu.drop,\n    themeDropAlign = _theme$menu$drop.align,\n    themeDropProps = _objectWithoutPropertiesLoose(_theme$menu$drop, _excluded2);\n  var a11y = ariaLabel || a11yTitle;\n\n  // total number of menu items\n  var itemCount = useMemo(function () {\n    var count = 0;\n    if (items && Array.isArray(items[0])) {\n      items.forEach(function (group) {\n        count += group.length;\n      });\n    } else count = items.length;\n    return count;\n  }, [items]);\n  var align = dropProps && dropProps.align || dropAlign || themeDropAlign;\n  var controlButtonIndex = useMemo(function () {\n    if (align.top === 'top') return -1;\n    if (align.bottom === 'bottom') return itemCount;\n    return undefined;\n  }, [align, itemCount]);\n\n  // Keeps track of whether menu options should be mirrored\n  // when there's not enough space below DropButton. This state\n  // is modified on /Drop/DropContainer.js.\n  var _useState = useState(),\n    alignControlMirror = _useState[0],\n    setAlignControlMirror = _useState[1];\n  var initialAlignTop = alignControlMirror === align.top;\n  var dropContainerRef = useRef();\n  var buttonRefs = useRef([]);\n  var constants = useMemo(function () {\n    return {\n      none: 'none',\n      tab: 9,\n      // Menu control button included on top of menu items\n      controlTop: align.top === 'top' || undefined,\n      // Menu control button included on the bottom of menu items\n      controlBottom: align.bottom === 'bottom' || undefined,\n      controlButtonIndex: controlButtonIndex\n    };\n  }, [align, controlButtonIndex]);\n  var _useState2 = useState(constants.none),\n    activeItemIndex = _useState2[0],\n    setActiveItemIndex = _useState2[1];\n  var _useState3 = useState(open || false),\n    isOpen = _useState3[0],\n    setOpen = _useState3[1];\n  var MenuIcon = isOpen && theme.menu.icons.up ? theme.menu.icons.up : theme.menu.icons.down;\n  var onDropClose = useCallback(function () {\n    setActiveItemIndex(constants.none);\n    setOpen(false);\n  }, [constants.none]);\n  var onDropOpen = useCallback(function () {\n    setOpen(true);\n  }, []);\n  useEffect(function () {\n    // need to wait for Drop to be ready\n    var timer = setTimeout(function () {\n      if (isOpen) {\n        var optionsNode = dropContainerRef.current;\n        if (optionsNode) {\n          optionsNode.focus();\n        }\n      }\n    }, 100);\n    return function () {\n      return clearTimeout(timer);\n    };\n  }, [isOpen]);\n  var onSelectMenuItem = function onSelectMenuItem(event) {\n    if (isOpen) {\n      if (activeItemIndex >= 0) {\n        event.preventDefault();\n        event.stopPropagation();\n        buttonRefs.current[activeItemIndex].click();\n      }\n    } else {\n      onDropOpen();\n    }\n  };\n  var isTab = function isTab(event) {\n    return event.keyCode === constants.tab || event.which === constants.tab;\n  };\n  var onNextMenuItem = function onNextMenuItem(event) {\n    event.preventDefault();\n    if (!isOpen) {\n      onDropOpen();\n    } else if (isTab(event) && (!constants.controlBottom && activeItemIndex === itemCount - 1 || constants.controlBottom && activeItemIndex === controlButtonIndex)) {\n      // User has reached end of the menu, this tab will close\n      // the menu drop because there are no more \"next items\" to access\n      onDropClose();\n    } else {\n      var index;\n      if (\n      // This checks if the user has reached the end of the menu.\n      // In the case the the menu control button is located at the\n      // bottom of the menu, it checks if the user has reached the button.\n      // Otherwise, it checks if the user is at the last menu item.\n      constants.controlBottom && activeItemIndex === controlButtonIndex || !constants.controlBottom && activeItemIndex === itemCount - 1 || activeItemIndex === constants.none) {\n        // place focus on the first menu item\n        index = 0;\n      } else {\n        index = activeItemIndex + 1;\n      }\n      setActiveItemIndex(index);\n      if (buttonRefs.current[index]) {\n        buttonRefs.current[index].focus();\n      }\n    }\n  };\n  var onPreviousMenuItem = function onPreviousMenuItem(event) {\n    event.preventDefault();\n    if (!isOpen) {\n      onDropOpen();\n    } else if (isTab(event) && (constants.controlTop && activeItemIndex === controlButtonIndex || !constants.controlTop && activeItemIndex - 1 < 0)) {\n      // User has reached beginning of the menu, this tab will close\n      // the menu drop because there are no more \"previous items\" to access\n      onDropClose();\n    } else {\n      var index;\n      if (activeItemIndex === 'none') {\n        index = itemCount - 1;\n      } else if (activeItemIndex - 1 < 0) {\n        if (constants.controlTop && activeItemIndex - 1 === controlButtonIndex) {\n          index = itemCount;\n        } else {\n          index = itemCount - 1;\n        }\n      } else {\n        index = activeItemIndex - 1;\n      }\n      setActiveItemIndex(index);\n      if (buttonRefs.current[index]) {\n        buttonRefs.current[index].focus();\n      }\n    }\n  };\n  var menuIcon = icon !== false ? icon !== true && icon || /*#__PURE__*/React.createElement(MenuIcon, {\n    color: iconColor,\n    size: size\n  }) : null;\n  var buttonProps = {\n    plain: plain,\n    size: size\n  };\n  var content;\n  if (children) {\n    content = children;\n  } else if (!theme.button[\"default\"]) {\n    content = /*#__PURE__*/React.createElement(Box, {\n      direction: \"row\",\n      justify: justifyContent,\n      align: \"center\",\n      pad: \"small\",\n      gap: label && icon !== false ? 'small' : undefined\n    }, /*#__PURE__*/React.createElement(Text, {\n      size: size\n    }, label), menuIcon);\n  } else {\n    // when a theme has theme.button.default, keep content as\n    // undefined so we can rely on Button label & icon props\n    buttonProps = {\n      icon: menuIcon,\n      label: label,\n      plain: plain,\n      reverse: true,\n      size: size\n    };\n    content = undefined;\n  }\n  var controlMirror = /*#__PURE__*/React.createElement(Box, {\n    flex: false\n  }, /*#__PURE__*/React.createElement(Button, _extends({\n    ref: function ref(r) {\n      // make it accessible at the end of all menu items\n      buttonRefs.current[itemCount] = r;\n    },\n    a11yTitle: a11y || format({\n      id: 'menu.closeMenu',\n      messages: messages\n    }),\n    active: activeItemIndex === controlButtonIndex,\n    focusIndicator: false,\n    hoverIndicator: \"background\",\n    onClick: onDropClose,\n    onFocus: function onFocus() {\n      return setActiveItemIndex(controlButtonIndex);\n    }\n    // On first tab into menu, the control button should not\n    // be able to receive tab focus because the focus should\n    // go to the first menu item instead.\n    ,\n    tabIndex: activeItemIndex === constants.none ? '-1' : undefined\n  }, theme.menu.item, buttonProps), typeof content === 'function' ? function () {\n    return content(_extends({}, props, {\n      drop: true\n    }));\n  } : content));\n  var menuItem = function menuItem(item, index) {\n    var _theme$menu$item, _theme$menu$item2, _theme$menu$item3;\n    // Determine whether the label is done as a child or\n    // as an option Button kind property.\n    var child = !theme.button.option ? /*#__PURE__*/React.createElement(Box, {\n      align: \"start\",\n      pad: \"small\",\n      direction: \"row\",\n      gap: item.gap || ((_theme$menu$item = theme.menu.item) == null ? void 0 : _theme$menu$item.gap),\n      justify: item.justify || ((_theme$menu$item2 = theme.menu.item) == null ? void 0 : _theme$menu$item2.justify)\n    }, item.reverse && item.label, item.icon, !item.reverse && item.label) : undefined;\n\n    // if we have a child, turn on plain, and hoverIndicator\n    return (\n      /*#__PURE__*/\n      // eslint-disable-next-line react/no-array-index-key\n      React.createElement(Box, {\n        key: index,\n        flex: false,\n        role: \"none\"\n      }, /*#__PURE__*/React.createElement(Button, _extends({\n        ref: function ref(r) {\n          buttonRefs.current[index] = r;\n        },\n        role: \"menuitem\",\n        onFocus: function onFocus() {\n          setActiveItemIndex(index);\n        },\n        active: activeItemIndex === index,\n        focusIndicator: false,\n        plain: !child ? undefined : true,\n        align: \"start\",\n        kind: !child ? 'option' : undefined,\n        hoverIndicator: !child ? undefined : 'background'\n      }, theme.menu.item, {\n        justify: item.justify || ((_theme$menu$item3 = theme.menu.item) == null ? void 0 : _theme$menu$item3.justify)\n      }, !child ? item : _extends({}, item, {\n        gap: undefined,\n        icon: undefined,\n        label: undefined,\n        reverse: undefined\n      }), {\n        onClick: function onClick() {\n          if (item.onClick) {\n            item.onClick.apply(item, arguments);\n          }\n          if (item.close !== false) {\n            onDropClose();\n          }\n        }\n      }), child))\n    );\n  };\n  var menuContent;\n  if (itemCount && Array.isArray(items[0])) {\n    var index = 0;\n    menuContent = items.map(function (group, groupIndex) {\n      var _theme$menu$group, _theme$menu$group$sep, _theme$menu$group2, _theme$menu$group2$se, _theme$menu$group3;\n      return /*#__PURE__*/React.createElement(Box\n      // eslint-disable-next-line react/no-array-index-key\n      , {\n        key: groupIndex\n      }, groupIndex > 0 && /*#__PURE__*/React.createElement(Box, {\n        pad: theme.menu.group.separator.pad\n      }, /*#__PURE__*/React.createElement(Box, {\n        border: {\n          side: 'top',\n          color: (_theme$menu$group = theme.menu.group) == null ? void 0 : (_theme$menu$group$sep = _theme$menu$group.separator) == null ? void 0 : _theme$menu$group$sep.color,\n          size: (_theme$menu$group2 = theme.menu.group) == null ? void 0 : (_theme$menu$group2$se = _theme$menu$group2.separator) == null ? void 0 : _theme$menu$group2$se.size\n        }\n      })), /*#__PURE__*/React.createElement(Box, (_theme$menu$group3 = theme.menu.group) == null ? void 0 : _theme$menu$group3.container, group.map(function (item) {\n        // item index needs to be its index in the entire menu as if\n        // it were a flat array\n        var currentIndex = index;\n        index += 1;\n        return menuItem(item, currentIndex);\n      })));\n    });\n  } else menuContent = items.map(function (item, index) {\n    return menuItem(item, index);\n  });\n  return /*#__PURE__*/React.createElement(Keyboard, {\n    onDown: onDropOpen,\n    onUp: onDropOpen,\n    onSpace: onSelectMenuItem,\n    onEsc: onDropClose,\n    onTab: onDropClose,\n    onKeyDown: onKeyDown\n  }, /*#__PURE__*/React.createElement(DropButton, _extends({\n    ref: ref\n  }, rest, buttonProps, {\n    a11yTitle: a11y || format({\n      id: 'menu.openMenu',\n      messages: messages\n    }),\n    \"aria-haspopup\": \"menu\",\n    \"aria-expanded\": isOpen,\n    onAlign: setAlignControlMirror,\n    disabled: disabled,\n    dropAlign: align,\n    dropTarget: dropTarget,\n    dropProps: dropProps || themeDropProps,\n    open: isOpen,\n    onOpen: onDropOpen,\n    onClose: onDropClose,\n    dropContent: /*#__PURE__*/React.createElement(Keyboard, {\n      onTab: function onTab(event) {\n        return event.shiftKey ? onPreviousMenuItem(event) : onNextMenuItem(event);\n      },\n      onDown: onNextMenuItem,\n      onUp: onPreviousMenuItem,\n      onEnter: onSelectMenuItem\n    }, /*#__PURE__*/React.createElement(ContainerBox, {\n      ref: dropContainerRef,\n      tabIndex: -1,\n      background: dropBackground || theme.menu.background\n    }, alignControlMirror === 'top' && align.top === 'top' ? controlMirror : undefined, /*#__PURE__*/React.createElement(Box, {\n      overflow: \"auto\",\n      role: \"menu\",\n      a11yTitle: a11y\n    }, menuContent), !initialAlignTop && (alignControlMirror === 'bottom' || align.bottom === 'bottom') ? controlMirror : undefined))\n  }), content));\n});\nMenu.defaultProps = {\n  items: [],\n  messages: undefined,\n  justifyContent: 'start'\n};\nMenu.displayName = 'Menu';\nMenu.propTypes = MenuPropTypes;\nexport { Menu };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}