{"ast":null,"code":"// TODO: share with DataTable, List, Cards, etc.\nvar datumValue = function datumValue(datum, property) {\n  if (!property) return undefined;\n  var parts = property.split('.');\n  if (parts.length === 1) return datum[property];\n  if (!datum[parts[0]]) return undefined;\n  return datumValue(datum[parts[0]], parts.slice(1).join('.'));\n};\n\n// This is where we filter the data internally, when the caller doesn't\n// provide an onView.\nexport var filter = function filter(data, view, properties) {\n  var _view$sort, _view$sort2;\n  // from https://stackoverflow.com/a/6300266/8513067\n  var searchExp = view != null && view.search ? new RegExp(view.search.replace(/[#-.]|[[-^]|[?|{}]/g, '\\\\$&'), 'i') : undefined;\n  var searchProperties;\n  if (searchExp && properties) {\n    // if we know where we want to search, look there\n    searchProperties = Object.keys(properties).filter(function (k) {\n      return properties[k].search;\n    });\n    // if none specified, look in all defined properties\n    if (searchProperties.length === 0) searchProperties = Object.keys(properties);\n  }\n  var filteredData = data.filter(function (datum) {\n    var matched = true;\n\n    // check whether it matches any search\n    if (searchExp) {\n      var searchWith = function searchWith(property) {\n        var value = datumValue(datum, property);\n        if (value === undefined) return false;\n        return searchExp.test(value);\n      };\n      if (searchProperties) matched = searchProperties.some(searchWith);else matched = Object.keys(datum).some(searchWith);\n    }\n\n    // check whether it matches any specific values\n    if (matched && view != null && view.properties) {\n      // if any properties don't match, overall not matched\n      matched = !Object.keys(view.properties).some(function (property) {\n        // returning true means it doesn't match the filter,\n        var filterValue = view.properties[property];\n        var value = datumValue(datum, property);\n\n        // range case\n        if (typeof (filterValue == null ? void 0 : filterValue.min) === 'number' || typeof (filterValue == null ? void 0 : filterValue.max) === 'number') return typeof value !== 'number' || value <= filterValue.min || value >= filterValue.max;\n\n        // options case\n        if (Array.isArray(filterValue)) return !filterValue.includes(value);\n\n        // presence case\n        if (typeof filterValue === 'boolean') return filterValue === !value;\n\n        // not sure, keep it\n        return false;\n      });\n    }\n    return matched;\n  });\n  if (view != null && (_view$sort = view.sort) != null && _view$sort.property || view != null && (_view$sort2 = view.sort) != null && _view$sort2.direction) {\n    var _view$sort3 = view.sort,\n      property = _view$sort3.property,\n      direction = _view$sort3.direction;\n    var prop = property || filteredData.length && Object.keys(filteredData[0])[0];\n    var sortDesc = direction === 'desc'; // default to asc\n    var before = sortDesc ? -1 : 1;\n    var after = sortDesc ? 1 : -1;\n    filteredData.sort(function (d1, d2) {\n      var d1Val = datumValue(d1, prop);\n      var d2Val = datumValue(d2, prop);\n      // sort strings via locale case insensitive\n      if (typeof d1Val === 'string' && typeof d2Val === 'string' || typeof d1Val === 'string' && !d2Val || typeof d2Val === 'string' && !d1Val) {\n        var sortResult = (d1Val || '').localeCompare(d2Val || '', undefined, {\n          sensitivity: 'base'\n        });\n        return sortDesc ? -sortResult : sortResult;\n      }\n      // numbers are easier to sort\n      if (d1Val > d2Val) return before;\n      if (d1Val < d2Val) return after;\n      return 0;\n    });\n  }\n  var pagedData;\n  if (view != null && view.step) {\n    var _view$page;\n    var start = view.step * (((_view$page = view == null ? void 0 : view.page) != null ? _view$page : 1) - 1);\n    pagedData = filteredData.slice(start, start + view.step);\n  }\n  return {\n    unfilteredData: data,\n    data: pagedData || filteredData,\n    total: data.length,\n    filteredTotal: filteredData.length\n  };\n};","map":{"version":3,"names":["datumValue","datum","property","undefined","parts","split","length","slice","join","filter","data","view","properties","_view$sort","_view$sort2","searchExp","search","RegExp","replace","searchProperties","Object","keys","k","filteredData","matched","searchWith","value","test","some","filterValue","min","max","Array","isArray","includes","sort","direction","_view$sort3","prop","sortDesc","before","after","d1","d2","d1Val","d2Val","sortResult","localeCompare","sensitivity","pagedData","step","_view$page","start","page","unfilteredData","total","filteredTotal"],"sources":["C:/Users/malch/OneDrive/Documents/Projects/chucode/node_modules/grommet/es6/components/Data/filter.js"],"sourcesContent":["// TODO: share with DataTable, List, Cards, etc.\nvar datumValue = function datumValue(datum, property) {\n  if (!property) return undefined;\n  var parts = property.split('.');\n  if (parts.length === 1) return datum[property];\n  if (!datum[parts[0]]) return undefined;\n  return datumValue(datum[parts[0]], parts.slice(1).join('.'));\n};\n\n// This is where we filter the data internally, when the caller doesn't\n// provide an onView.\nexport var filter = function filter(data, view, properties) {\n  var _view$sort, _view$sort2;\n  // from https://stackoverflow.com/a/6300266/8513067\n  var searchExp = view != null && view.search ? new RegExp(view.search.replace(/[#-.]|[[-^]|[?|{}]/g, '\\\\$&'), 'i') : undefined;\n  var searchProperties;\n  if (searchExp && properties) {\n    // if we know where we want to search, look there\n    searchProperties = Object.keys(properties).filter(function (k) {\n      return properties[k].search;\n    });\n    // if none specified, look in all defined properties\n    if (searchProperties.length === 0) searchProperties = Object.keys(properties);\n  }\n  var filteredData = data.filter(function (datum) {\n    var matched = true;\n\n    // check whether it matches any search\n    if (searchExp) {\n      var searchWith = function searchWith(property) {\n        var value = datumValue(datum, property);\n        if (value === undefined) return false;\n        return searchExp.test(value);\n      };\n      if (searchProperties) matched = searchProperties.some(searchWith);else matched = Object.keys(datum).some(searchWith);\n    }\n\n    // check whether it matches any specific values\n    if (matched && view != null && view.properties) {\n      // if any properties don't match, overall not matched\n      matched = !Object.keys(view.properties).some(function (property) {\n        // returning true means it doesn't match the filter,\n        var filterValue = view.properties[property];\n        var value = datumValue(datum, property);\n\n        // range case\n        if (typeof (filterValue == null ? void 0 : filterValue.min) === 'number' || typeof (filterValue == null ? void 0 : filterValue.max) === 'number') return typeof value !== 'number' || value <= filterValue.min || value >= filterValue.max;\n\n        // options case\n        if (Array.isArray(filterValue)) return !filterValue.includes(value);\n\n        // presence case\n        if (typeof filterValue === 'boolean') return filterValue === !value;\n\n        // not sure, keep it\n        return false;\n      });\n    }\n    return matched;\n  });\n  if (view != null && (_view$sort = view.sort) != null && _view$sort.property || view != null && (_view$sort2 = view.sort) != null && _view$sort2.direction) {\n    var _view$sort3 = view.sort,\n      property = _view$sort3.property,\n      direction = _view$sort3.direction;\n    var prop = property || filteredData.length && Object.keys(filteredData[0])[0];\n    var sortDesc = direction === 'desc'; // default to asc\n    var before = sortDesc ? -1 : 1;\n    var after = sortDesc ? 1 : -1;\n    filteredData.sort(function (d1, d2) {\n      var d1Val = datumValue(d1, prop);\n      var d2Val = datumValue(d2, prop);\n      // sort strings via locale case insensitive\n      if (typeof d1Val === 'string' && typeof d2Val === 'string' || typeof d1Val === 'string' && !d2Val || typeof d2Val === 'string' && !d1Val) {\n        var sortResult = (d1Val || '').localeCompare(d2Val || '', undefined, {\n          sensitivity: 'base'\n        });\n        return sortDesc ? -sortResult : sortResult;\n      }\n      // numbers are easier to sort\n      if (d1Val > d2Val) return before;\n      if (d1Val < d2Val) return after;\n      return 0;\n    });\n  }\n  var pagedData;\n  if (view != null && view.step) {\n    var _view$page;\n    var start = view.step * (((_view$page = view == null ? void 0 : view.page) != null ? _view$page : 1) - 1);\n    pagedData = filteredData.slice(start, start + view.step);\n  }\n  return {\n    unfilteredData: data,\n    data: pagedData || filteredData,\n    total: data.length,\n    filteredTotal: filteredData.length\n  };\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}