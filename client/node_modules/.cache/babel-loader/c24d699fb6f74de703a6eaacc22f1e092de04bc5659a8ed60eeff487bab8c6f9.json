{"ast":null,"code":"var _excluded = [\"children\", \"data\", \"defaultView\", \"filteredTotal\", \"id\", \"messages\", \"onView\", \"properties\", \"toolbar\", \"total\", \"updateOn\", \"view\", \"views\"];\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { Box } from '../Box';\nimport { DataFilters } from '../DataFilters';\nimport { DataSearch } from '../DataSearch';\nimport { DataSummary } from '../DataSummary';\nimport { DataView } from '../DataView';\nimport { Toolbar } from '../Toolbar';\nimport { DataContext } from '../../contexts/DataContext';\nimport { DataPropTypes } from './propTypes';\nimport { filter } from './filter';\nvar defaultDefaultView = {\n  search: ''\n};\nvar normalizeView = function normalizeView(viewProp, views) {\n  return typeof viewProp === 'string' && (views == null ? void 0 : views.find(function (v) {\n    return v.name === viewProp;\n  })) || typeof viewProp === 'object' && viewProp;\n};\nexport var Data = function Data(_ref) {\n  var children = _ref.children,\n    dataProp = _ref.data,\n    _ref$defaultView = _ref.defaultView,\n    defaultView = _ref$defaultView === void 0 ? defaultDefaultView : _ref$defaultView,\n    filteredTotal = _ref.filteredTotal,\n    _ref$id = _ref.id,\n    id = _ref$id === void 0 ? 'data' : _ref$id,\n    messages = _ref.messages,\n    onView = _ref.onView,\n    properties = _ref.properties,\n    toolbar = _ref.toolbar,\n    total = _ref.total,\n    _ref$updateOn = _ref.updateOn,\n    updateOn = _ref$updateOn === void 0 ? 'submit' : _ref$updateOn,\n    viewProp = _ref.view,\n    views = _ref.views,\n    rest = _objectWithoutPropertiesLoose(_ref, _excluded);\n  var _useState = useState(normalizeView(viewProp || defaultView, views)),\n    view = _useState[0],\n    setView = _useState[1];\n  useEffect(function () {\n    return setView(normalizeView(viewProp || defaultView, views));\n  }, [defaultView, viewProp, views]);\n  var _useState2 = useState([]),\n    toolbarKeys = _useState2[0],\n    setToolbarKeys = _useState2[1];\n  var result = useMemo(function () {\n    var _ref2;\n    if (onView)\n      // caller is filtering\n      return {\n        data: dataProp,\n        total: total,\n        filteredTotal: (_ref2 = filteredTotal != null ? filteredTotal : dataProp == null ? void 0 : dataProp.length) != null ? _ref2 : 0\n      };\n    return filter(dataProp, view, properties);\n  }, [dataProp, filteredTotal, onView, properties, total, view]);\n\n  // what we use for DataContext value\n  var contextValue = useMemo(function () {\n    var value = _extends({\n      id: id,\n      messages: messages,\n      properties: properties,\n      updateOn: updateOn,\n      view: view,\n      views: views\n    }, result);\n    value.clearFilters = function () {\n      var nextView = defaultView;\n      setView(nextView);\n      if (onView) onView(nextView);\n    };\n    value.onView = function (nextView) {\n      setView(nextView);\n      if (onView) onView(nextView);\n    };\n    value.addToolbarKey = function (key) {\n      setToolbarKeys(function (prevKeys) {\n        if (prevKeys.includes(key)) return prevKeys;\n        return [].concat(prevKeys, [key]);\n      });\n    };\n    value.toolbarKeys = toolbarKeys;\n    return value;\n  }, [defaultView, id, messages, onView, properties, result, toolbarKeys, updateOn, view, views]);\n  var toolbarContent;\n  if (toolbar) {\n    toolbarContent = [/*#__PURE__*/React.createElement(Toolbar, {\n      key: \"toolbar\"\n    }, (toolbar === true || toolbar === 'search') && /*#__PURE__*/React.createElement(DataSearch, null), (toolbar === true || toolbar === 'view') && /*#__PURE__*/React.createElement(DataView, null), (toolbar === true || toolbar === 'filters') && /*#__PURE__*/React.createElement(DataFilters, {\n      drop: true\n    })), /*#__PURE__*/React.createElement(DataSummary, {\n      key: \"summary\"\n    })];\n  }\n  return /*#__PURE__*/React.createElement(DataContext.Provider, {\n    value: contextValue\n  }, /*#__PURE__*/React.createElement(Box, _extends({\n    id: id,\n    flex: false\n  }, rest), toolbarContent, children));\n};\nData.propTypes = DataPropTypes;","map":{"version":3,"names":["_excluded","_extends","Object","assign","bind","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutPropertiesLoose","excluded","sourceKeys","keys","indexOf","React","useEffect","useMemo","useState","Box","DataFilters","DataSearch","DataSummary","DataView","Toolbar","DataContext","DataPropTypes","filter","defaultDefaultView","search","normalizeView","viewProp","views","find","v","name","Data","_ref","children","dataProp","data","_ref$defaultView","defaultView","filteredTotal","_ref$id","id","messages","onView","properties","toolbar","total","_ref$updateOn","updateOn","view","rest","_useState","setView","_useState2","toolbarKeys","setToolbarKeys","result","_ref2","contextValue","value","clearFilters","nextView","addToolbarKey","prevKeys","includes","concat","toolbarContent","createElement","drop","Provider","flex","propTypes"],"sources":["C:/Users/malch/OneDrive/Documents/Projects/chucode/node_modules/grommet/es6/components/Data/Data.js"],"sourcesContent":["var _excluded = [\"children\", \"data\", \"defaultView\", \"filteredTotal\", \"id\", \"messages\", \"onView\", \"properties\", \"toolbar\", \"total\", \"updateOn\", \"view\", \"views\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { Box } from '../Box';\nimport { DataFilters } from '../DataFilters';\nimport { DataSearch } from '../DataSearch';\nimport { DataSummary } from '../DataSummary';\nimport { DataView } from '../DataView';\nimport { Toolbar } from '../Toolbar';\nimport { DataContext } from '../../contexts/DataContext';\nimport { DataPropTypes } from './propTypes';\nimport { filter } from './filter';\nvar defaultDefaultView = {\n  search: ''\n};\nvar normalizeView = function normalizeView(viewProp, views) {\n  return typeof viewProp === 'string' && (views == null ? void 0 : views.find(function (v) {\n    return v.name === viewProp;\n  })) || typeof viewProp === 'object' && viewProp;\n};\nexport var Data = function Data(_ref) {\n  var children = _ref.children,\n    dataProp = _ref.data,\n    _ref$defaultView = _ref.defaultView,\n    defaultView = _ref$defaultView === void 0 ? defaultDefaultView : _ref$defaultView,\n    filteredTotal = _ref.filteredTotal,\n    _ref$id = _ref.id,\n    id = _ref$id === void 0 ? 'data' : _ref$id,\n    messages = _ref.messages,\n    onView = _ref.onView,\n    properties = _ref.properties,\n    toolbar = _ref.toolbar,\n    total = _ref.total,\n    _ref$updateOn = _ref.updateOn,\n    updateOn = _ref$updateOn === void 0 ? 'submit' : _ref$updateOn,\n    viewProp = _ref.view,\n    views = _ref.views,\n    rest = _objectWithoutPropertiesLoose(_ref, _excluded);\n  var _useState = useState(normalizeView(viewProp || defaultView, views)),\n    view = _useState[0],\n    setView = _useState[1];\n  useEffect(function () {\n    return setView(normalizeView(viewProp || defaultView, views));\n  }, [defaultView, viewProp, views]);\n  var _useState2 = useState([]),\n    toolbarKeys = _useState2[0],\n    setToolbarKeys = _useState2[1];\n  var result = useMemo(function () {\n    var _ref2;\n    if (onView)\n      // caller is filtering\n      return {\n        data: dataProp,\n        total: total,\n        filteredTotal: (_ref2 = filteredTotal != null ? filteredTotal : dataProp == null ? void 0 : dataProp.length) != null ? _ref2 : 0\n      };\n    return filter(dataProp, view, properties);\n  }, [dataProp, filteredTotal, onView, properties, total, view]);\n\n  // what we use for DataContext value\n  var contextValue = useMemo(function () {\n    var value = _extends({\n      id: id,\n      messages: messages,\n      properties: properties,\n      updateOn: updateOn,\n      view: view,\n      views: views\n    }, result);\n    value.clearFilters = function () {\n      var nextView = defaultView;\n      setView(nextView);\n      if (onView) onView(nextView);\n    };\n    value.onView = function (nextView) {\n      setView(nextView);\n      if (onView) onView(nextView);\n    };\n    value.addToolbarKey = function (key) {\n      setToolbarKeys(function (prevKeys) {\n        if (prevKeys.includes(key)) return prevKeys;\n        return [].concat(prevKeys, [key]);\n      });\n    };\n    value.toolbarKeys = toolbarKeys;\n    return value;\n  }, [defaultView, id, messages, onView, properties, result, toolbarKeys, updateOn, view, views]);\n  var toolbarContent;\n  if (toolbar) {\n    toolbarContent = [/*#__PURE__*/React.createElement(Toolbar, {\n      key: \"toolbar\"\n    }, (toolbar === true || toolbar === 'search') && /*#__PURE__*/React.createElement(DataSearch, null), (toolbar === true || toolbar === 'view') && /*#__PURE__*/React.createElement(DataView, null), (toolbar === true || toolbar === 'filters') && /*#__PURE__*/React.createElement(DataFilters, {\n      drop: true\n    })), /*#__PURE__*/React.createElement(DataSummary, {\n      key: \"summary\"\n    })];\n  }\n  return /*#__PURE__*/React.createElement(DataContext.Provider, {\n    value: contextValue\n  }, /*#__PURE__*/React.createElement(Box, _extends({\n    id: id,\n    flex: false\n  }, rest), toolbarContent, children));\n};\nData.propTypes = DataPropTypes;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}