{"ast":null,"code":"var _excluded = [\"background\", \"border\", \"columns\", \"data\", \"disabled\", \"fill\", \"groupBy\", \"onClickRow\", \"onMore\", \"onSearch\", \"onSelect\", \"onSort\", \"onUpdate\", \"replace\", \"pad\", \"paginate\", \"pin\", \"placeholder\", \"primaryKey\", \"resizeable\", \"rowProps\", \"select\", \"show\", \"size\", \"sort\", \"sortable\", \"rowDetails\", \"step\", \"verticalAlign\"];\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\nimport React, { useCallback, useContext, useEffect, useMemo, useRef, useState, Fragment } from 'react';\nimport { ThemeContext } from 'styled-components';\nimport { defaultProps } from '../../default-props';\nimport { useLayoutEffect } from '../../utils/use-isomorphic-layout-effect';\nimport { DataContext } from '../../contexts/DataContext';\nimport { Box } from '../Box';\nimport { Text } from '../Text';\nimport { Header } from './Header';\nimport { Footer } from './Footer';\nimport { Body } from './Body';\nimport { GroupedBody } from './GroupedBody';\nimport { Pagination } from '../Pagination';\nimport { buildFooterValues, buildGroups, buildGroupState, filterAndSortData, initializeFilters, normalizeCellProps, normalizePrimaryProperty } from './buildState';\nimport { normalizeShow, usePagination } from '../../utils';\nimport { StyledContainer, StyledDataTable, StyledPlaceholder } from './StyledDataTable';\nimport { DataTablePropTypes } from './propTypes';\nimport { PlaceholderBody } from './PlaceholderBody';\nvar emptyData = [];\nfunction useGroupState(groups, groupBy) {\n  var _useState = useState(function () {\n      return buildGroupState(groups, groupBy);\n    }),\n    groupState = _useState[0],\n    setGroupState = _useState[1];\n  var _useState2 = useState({\n      groups: groups,\n      groupBy: groupBy\n    }),\n    prevDeps = _useState2[0],\n    setPrevDeps = _useState2[1];\n  var prevGroups = prevDeps.groups,\n    prevGroupBy = prevDeps.groupBy;\n  if (groups !== prevGroups || groupBy !== prevGroupBy) {\n    setPrevDeps({\n      groups: groups,\n      groupBy: groupBy\n    });\n    var nextGroupState = buildGroupState(groups, groupBy);\n    setGroupState(nextGroupState);\n    return [nextGroupState, setGroupState];\n  }\n  return [groupState, setGroupState];\n}\nvar DataTable = function DataTable(_ref) {\n  var background = _ref.background,\n    border = _ref.border,\n    columnsProp = _ref.columns,\n    dataProp = _ref.data,\n    disabled = _ref.disabled,\n    fill = _ref.fill,\n    groupBy = _ref.groupBy,\n    onClickRow = _ref.onClickRow,\n    onMore = _ref.onMore,\n    onSearch = _ref.onSearch,\n    onSelect = _ref.onSelect,\n    onSortProp = _ref.onSort,\n    onUpdate = _ref.onUpdate,\n    replace = _ref.replace,\n    pad = _ref.pad,\n    paginate = _ref.paginate,\n    pin = _ref.pin,\n    placeholder = _ref.placeholder,\n    primaryKey = _ref.primaryKey,\n    resizeable = _ref.resizeable,\n    rowProps = _ref.rowProps,\n    select = _ref.select,\n    showProp = _ref.show,\n    size = _ref.size,\n    sortProp = _ref.sort,\n    sortable = _ref.sortable,\n    rowDetails = _ref.rowDetails,\n    _ref$step = _ref.step,\n    step = _ref$step === void 0 ? 50 : _ref$step,\n    verticalAlign = _ref.verticalAlign,\n    rest = _objectWithoutPropertiesLoose(_ref, _excluded);\n  var theme = useContext(ThemeContext) || defaultProps.theme;\n  var _useContext = useContext(DataContext),\n    view = _useContext.view,\n    contextData = _useContext.data,\n    properties = _useContext.properties,\n    onView = _useContext.onView;\n  var data = dataProp || contextData || emptyData;\n  var columns = useMemo(function () {\n    var result = [];\n    if (columnsProp) result = columnsProp;else if (properties) result = Object.keys(properties).map(function (p) {\n      return _extends({\n        property: p\n      }, properties[p]);\n    });else if (data.length) result = Object.keys(data[0]).map(function (p) {\n      return {\n        property: p\n      };\n    });\n    if (view != null && view.columns) result = result.filter(function (c) {\n      return view.columns.includes(c.property);\n    }).sort(function (c1, c2) {\n      return view.columns.indexOf(c1.property) - view.columns.indexOf(c2.property);\n    });\n    return result;\n  }, [columnsProp, data, properties, view]);\n\n  // property name of the primary property\n  var primaryProperty = useMemo(function () {\n    return normalizePrimaryProperty(columns, primaryKey);\n  }, [columns, primaryKey]);\n\n  // whether or not we should show a footer\n  var showFooter = useMemo(function () {\n    return columns.filter(function (c) {\n      return c.footer;\n    }).length > 0;\n  }, [columns]);\n\n  // what column we are actively capturing filter input on\n  var _useState3 = useState(),\n    filtering = _useState3[0],\n    setFiltering = _useState3[1];\n\n  // the currently active filters\n  var _useState4 = useState(initializeFilters(columns)),\n    filters = _useState4[0],\n    setFilters = _useState4[1];\n\n  // which column we are sorting on, with direction\n  var _useState5 = useState(sortProp || {}),\n    sort = _useState5[0],\n    setSort = _useState5[1];\n  useEffect(function () {\n    if (sortProp) setSort(sortProp);else if (view != null && view.sort) setSort(view.sort);\n  }, [sortProp, view]);\n\n  // the data filtered and sorted, if needed\n  // Note: onUpdate mode expects the data to be passed\n  //   in completely filtered and sorted already.\n  var adjustedData = useMemo(function () {\n    return onUpdate ? data : filterAndSortData(data, filters, onSearch, sort);\n  }, [data, filters, onSearch, onUpdate, sort]);\n\n  // the values to put in the footer cells\n  var footerValues = useMemo(function () {\n    return buildFooterValues(columns, adjustedData);\n  }, [adjustedData, columns]);\n\n  // cell styling properties: background, border, pad\n  var cellProps = useMemo(function () {\n    return normalizeCellProps({\n      background: background,\n      border: border,\n      pad: pad,\n      pin: pin\n    }, theme);\n  }, [background, border, pad, pin, theme]);\n\n  // if groupBy, an array with one item per unique groupBy key value\n  var groups = useMemo(function () {\n    return buildGroups(columns, adjustedData, groupBy, primaryProperty);\n  }, [adjustedData, columns, groupBy, primaryProperty]);\n\n  // an object indicating which group values are expanded\n  var _useGroupState = useGroupState(groups, groupBy),\n    groupState = _useGroupState[0],\n    setGroupState = _useGroupState[1];\n  var _useState6 = useState(step),\n    limit = _useState6[0],\n    setLimit = _useState6[1];\n  var _useState7 = useState(select || onSelect && [] || undefined),\n    selected = _useState7[0],\n    setSelected = _useState7[1];\n  useEffect(function () {\n    return setSelected(select || onSelect && [] || undefined);\n  }, [onSelect, select]);\n  var _useState8 = useState([]),\n    rowExpand = _useState8[0],\n    setRowExpand = _useState8[1];\n\n  // any customized column widths\n  var _useState9 = useState({}),\n    widths = _useState9[0],\n    setWidths = _useState9[1];\n\n  // placeholder placement stuff\n  var headerRef = useRef();\n  var bodyRef = useRef();\n  var footerRef = useRef();\n  var _useState10 = useState(),\n    headerHeight = _useState10[0],\n    setHeaderHeight = _useState10[1];\n  var _useState11 = useState(),\n    footerHeight = _useState11[0],\n    setFooterHeight = _useState11[1];\n\n  // offset compensation when body overflows\n  var _useState12 = useState(0),\n    scrollOffset = _useState12[0],\n    setScrollOffset = _useState12[1];\n\n  // multiple pinned columns offset\n  var _useState13 = useState(),\n    pinnedOffset = _useState13[0],\n    setPinnedOffset = _useState13[1];\n  var onHeaderWidths = useCallback(function (columnWidths) {\n    var hasSelectColumn = Boolean(select || onSelect);\n    var pinnedProperties = columns.map(function (pinnedColumn) {\n      return pinnedColumn.pin && pinnedColumn.property;\n    }).filter(function (n) {\n      return n;\n    });\n    if (hasSelectColumn && pinnedProperties.length > 0) {\n      pinnedProperties = ['_grommetDataTableSelect'].concat(pinnedProperties);\n    }\n    var nextPinnedOffset = {};\n    if (columnWidths !== []) {\n      pinnedProperties.forEach(function (property, index) {\n        var columnIndex = property === '_grommetDataTableSelect' ? 0 : columns.findIndex(function (column) {\n          return column.property === property;\n        }) + hasSelectColumn;\n        if (columnWidths[columnIndex]) {\n          nextPinnedOffset[property] = {\n            width: columnWidths[columnIndex],\n            left: index === 0 ? 0 : nextPinnedOffset[pinnedProperties[index - 1]].left + nextPinnedOffset[pinnedProperties[index - 1]].width\n          };\n        }\n      });\n      setPinnedOffset(nextPinnedOffset);\n    }\n  }, [columns, setPinnedOffset, select, onSelect]);\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useLayoutEffect(function () {\n    var _bodyRef$current$pare;\n    var nextScrollOffset = (((_bodyRef$current$pare = bodyRef.current.parentElement) == null ? void 0 : _bodyRef$current$pare.clientWidth) || 0) - bodyRef.current.clientWidth;\n    if (nextScrollOffset !== scrollOffset) setScrollOffset(nextScrollOffset);\n  });\n  useLayoutEffect(function () {\n    if (placeholder) {\n      if (headerRef.current) {\n        var nextHeaderHeight = headerRef.current.getBoundingClientRect().height;\n        setHeaderHeight(nextHeaderHeight);\n      } else setHeaderHeight(0);\n      if (footerRef.current) {\n        var nextFooterHeight = footerRef.current.getBoundingClientRect().height;\n        setFooterHeight(nextFooterHeight);\n      } else setFooterHeight(0);\n    }\n  }, [footerRef, headerRef, placeholder]);\n\n  // remember that we are filtering on this property\n  var onFiltering = function onFiltering(property) {\n    return setFiltering(property);\n  };\n\n  // remember the search text we should filter this property by\n  var onFilter = function onFilter(property, value) {\n    var nextFilters = _extends({}, filters);\n    nextFilters[property] = value;\n    setFilters(nextFilters);\n    // Let caller know about search, if interested\n    if (onSearch) onSearch(nextFilters);\n  };\n\n  // toggle the sort direction on this property\n  var onSort = function onSort(property) {\n    return function () {\n      var external = sort ? sort.external : false;\n      var direction;\n      if (!sort || property !== sort.property) direction = 'asc';else if (sort.direction === 'asc') direction = 'desc';else direction = 'asc';\n      var nextSort = {\n        property: property,\n        direction: direction,\n        external: external\n      };\n      setSort(nextSort);\n      if (onView) {\n        onView(_extends({}, view, {\n          sort: {\n            property: property,\n            direction: direction\n          }\n        }));\n      }\n      if (onUpdate) {\n        var opts = {\n          count: limit,\n          sort: nextSort\n        };\n        if (groups) {\n          opts.expanded = Object.keys(groupState).filter(function (k) {\n            return groupState[k].expanded;\n          });\n        }\n        if (showProp) opts.show = showProp;\n        onUpdate(opts);\n      }\n      if (onSortProp) onSortProp(nextSort);\n    };\n  };\n\n  // toggle whether the group is expanded\n  var onToggleGroup = function onToggleGroup(groupValue) {\n    return function () {\n      var nextGroupState = _extends({}, groupState);\n      nextGroupState[groupValue] = _extends({}, nextGroupState[groupValue], {\n        expanded: !nextGroupState[groupValue].expanded\n      });\n      setGroupState(nextGroupState);\n      var expandedKeys = Object.keys(nextGroupState).filter(function (k) {\n        return nextGroupState[k].expanded;\n      });\n      if (onUpdate) {\n        var opts = {\n          expanded: expandedKeys,\n          count: limit\n        };\n        if (sort != null && sort.property) opts.sort = sort;\n        if (showProp) opts.show = showProp;\n        onUpdate(opts);\n      }\n      if (groupBy.onExpand) {\n        groupBy.onExpand(expandedKeys);\n      }\n    };\n  };\n\n  // toggle whether all groups are expanded\n  var onToggleGroups = function onToggleGroups() {\n    var expanded = Object.keys(groupState).filter(function (k) {\n      return !groupState[k].expanded;\n    }).length === 0;\n    var nextGroupState = {};\n    Object.keys(groupState).forEach(function (k) {\n      nextGroupState[k] = _extends({}, groupState[k], {\n        expanded: !expanded\n      });\n    });\n    setGroupState(nextGroupState);\n    var expandedKeys = Object.keys(nextGroupState).filter(function (k) {\n      return nextGroupState[k].expanded;\n    });\n    if (onUpdate) {\n      var opts = {\n        expanded: expandedKeys,\n        count: limit\n      };\n      if (showProp) opts.show = showProp;\n      if (sort != null && sort.property) opts.sort = sort;\n      onUpdate(opts);\n    }\n    if (groupBy.onExpand) {\n      groupBy.onExpand(expandedKeys);\n    }\n  };\n\n  // remember the width this property's column should be\n  var onResize = useCallback(function (property, width) {\n    if (widths[property] !== width) {\n      var nextWidths = _extends({}, widths);\n      nextWidths[property] = width;\n      setWidths(nextWidths);\n    }\n  }, [widths]);\n  if (size && resizeable) {\n    console.warn('DataTable cannot combine \"size\" and \"resizeble\".');\n  }\n  if (onUpdate && onMore) {\n    console.warn('DataTable cannot combine \"onUpdate\" and \"onMore\".');\n  }\n  var _usePagination = usePagination(_extends({\n      data: adjustedData,\n      page: normalizeShow(showProp, step),\n      step: step\n    }, paginate)),\n    items = _usePagination[0],\n    paginationProps = _usePagination[1];\n  var paginationStep = paginationProps.step;\n  var Container = paginate ? StyledContainer : Fragment;\n  var containterProps = paginate ? _extends({}, theme.dataTable.container, {\n    fill: fill\n  }) : undefined;\n\n  // DataTable should overflow if paginating but pagination component\n  // should remain in its location\n  var OverflowContainer = paginate ? Box : Fragment;\n  var overflowContainerProps = paginate ? {\n    overflow: {\n      horizontal: 'auto'\n    }\n  } : undefined;\n\n  // necessary for Firefox, otherwise paginated DataTable will\n  // not fill its container like it does by default on other\n  // browsers like Chrome/Safari\n  var paginatedDataTableProps = paginate && (fill === true || fill === 'horizontal') ? {\n    style: {\n      minWidth: '100%'\n    }\n  } : undefined;\n  var placeholderContent = placeholder;\n  if (placeholder && typeof placeholder === 'string') {\n    placeholderContent = /*#__PURE__*/React.createElement(Box, {\n      background: {\n        color: 'background-front',\n        opacity: 'strong'\n      },\n      align: \"center\",\n      justify: \"center\",\n      fill: \"vertical\"\n    }, /*#__PURE__*/React.createElement(Text, null, placeholder));\n  }\n  var bodyContent = groups ? /*#__PURE__*/React.createElement(GroupedBody, {\n    ref: bodyRef,\n    cellProps: cellProps.body,\n    columns: columns,\n    disabled: disabled,\n    groupBy: typeof groupBy === 'string' ? {\n      property: groupBy\n    } : groupBy,\n    groups: groups,\n    groupState: groupState,\n    pinnedOffset: pinnedOffset,\n    primaryProperty: primaryProperty,\n    onMore: onUpdate ? function () {\n      if (adjustedData.length === limit) {\n        var opts = {\n          expanded: Object.keys(groupState).filter(function (k) {\n            return groupState[k].expanded;\n          }),\n          count: limit + paginationStep\n        };\n        if (sort != null && sort.property) opts.sort = sort;\n        if (showProp) opts.show = showProp;\n        onUpdate(opts);\n        setLimit(function (prev) {\n          return prev + paginationStep;\n        });\n      }\n    } : onMore,\n    onSelect: onSelect ? function (nextSelected, row) {\n      setSelected(nextSelected);\n      if (onSelect) onSelect(nextSelected, row);\n    } : undefined,\n    onToggle: onToggleGroup,\n    onUpdate: onUpdate,\n    replace: replace,\n    rowProps: rowProps,\n    selected: selected,\n    size: size,\n    step: paginationStep,\n    verticalAlign: typeof verticalAlign === 'string' ? verticalAlign : verticalAlign == null ? void 0 : verticalAlign.body\n  }) : /*#__PURE__*/React.createElement(Body, {\n    ref: bodyRef,\n    cellProps: cellProps.body,\n    columns: columns,\n    data: !paginate ? adjustedData : items,\n    disabled: disabled,\n    onMore: onUpdate ? function () {\n      if (adjustedData.length === limit) {\n        var opts = {\n          count: limit + paginationStep\n        };\n        if (sort != null && sort.property) opts.sort = sort;\n        if (showProp) opts.show = showProp;\n        onUpdate(opts);\n        setLimit(function (prev) {\n          return prev + paginationStep;\n        });\n      }\n    } : onMore,\n    replace: replace,\n    onClickRow: onClickRow,\n    onSelect: onSelect ? function (nextSelected, row) {\n      setSelected(nextSelected);\n      if (onSelect) onSelect(nextSelected, row);\n    } : undefined,\n    pinnedCellProps: cellProps.pinned,\n    pinnedOffset: pinnedOffset,\n    primaryProperty: primaryProperty,\n    rowProps: rowProps,\n    selected: selected,\n    show: !paginate ? showProp : undefined,\n    size: size,\n    step: paginationStep,\n    rowDetails: rowDetails,\n    rowExpand: rowExpand,\n    setRowExpand: setRowExpand,\n    verticalAlign: typeof verticalAlign === 'string' ? verticalAlign : verticalAlign == null ? void 0 : verticalAlign.body\n  });\n  return /*#__PURE__*/React.createElement(Container, containterProps, /*#__PURE__*/React.createElement(OverflowContainer, overflowContainerProps, /*#__PURE__*/React.createElement(StyledDataTable, _extends({\n    fillProp: !paginate ? fill : undefined\n  }, paginatedDataTableProps, rest), /*#__PURE__*/React.createElement(Header, {\n    ref: headerRef,\n    cellProps: cellProps.header,\n    columns: columns,\n    data: adjustedData,\n    disabled: disabled,\n    fill: fill,\n    filtering: filtering,\n    filters: filters,\n    groupBy: groupBy,\n    groups: groups,\n    groupState: groupState,\n    pin: pin === true || pin === 'header',\n    pinnedOffset: pinnedOffset,\n    selected: selected,\n    size: size,\n    sort: sort,\n    widths: widths,\n    onFiltering: onFiltering,\n    onFilter: onFilter,\n    onResize: resizeable ? onResize : undefined,\n    onSelect: onSelect ? function (nextSelected) {\n      setSelected(nextSelected);\n      if (onSelect) onSelect(nextSelected);\n    } : undefined,\n    onSort: sortable || sortProp || onSortProp ? onSort : undefined,\n    onToggle: onToggleGroups,\n    onWidths: onHeaderWidths,\n    primaryProperty: primaryProperty,\n    scrollOffset: scrollOffset,\n    rowDetails: rowDetails,\n    verticalAlign: typeof verticalAlign === 'string' ? verticalAlign : verticalAlign == null ? void 0 : verticalAlign.header\n  }), placeholder && (!items || items.length === 0) ? /*#__PURE__*/React.createElement(PlaceholderBody, {\n    ref: bodyRef,\n    columns: columns,\n    onSelect: onSelect\n  }, placeholderContent) : bodyContent, showFooter && /*#__PURE__*/React.createElement(Footer, {\n    ref: footerRef,\n    cellProps: cellProps.footer,\n    columns: columns,\n    fill: fill,\n    footerValues: footerValues,\n    groups: groups,\n    onSelect: onSelect,\n    pin: pin === true || pin === 'footer',\n    pinnedOffset: pinnedOffset,\n    primaryProperty: primaryProperty,\n    scrollOffset: scrollOffset,\n    selected: selected,\n    size: size,\n    verticalAlign: typeof verticalAlign === 'string' ? verticalAlign : verticalAlign == null ? void 0 : verticalAlign.footer\n  }), placeholder && items && items.length > 0 && /*#__PURE__*/React.createElement(StyledPlaceholder, {\n    top: headerHeight,\n    bottom: footerHeight\n  }, placeholderContent))), paginate && adjustedData.length > paginationStep && items && items.length ? /*#__PURE__*/React.createElement(Pagination, _extends({\n    alignSelf: \"end\"\n  }, paginationProps)) : null);\n};\nDataTable.propTypes = DataTablePropTypes;\nexport { DataTable };","map":{"version":3,"names":["_excluded","_extends","Object","assign","bind","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutPropertiesLoose","excluded","sourceKeys","keys","indexOf","React","useCallback","useContext","useEffect","useMemo","useRef","useState","Fragment","ThemeContext","defaultProps","useLayoutEffect","DataContext","Box","Text","Header","Footer","Body","GroupedBody","Pagination","buildFooterValues","buildGroups","buildGroupState","filterAndSortData","initializeFilters","normalizeCellProps","normalizePrimaryProperty","normalizeShow","usePagination","StyledContainer","StyledDataTable","StyledPlaceholder","DataTablePropTypes","PlaceholderBody","emptyData","useGroupState","groups","groupBy","_useState","groupState","setGroupState","_useState2","prevDeps","setPrevDeps","prevGroups","prevGroupBy","nextGroupState","DataTable","_ref","background","border","columnsProp","columns","dataProp","data","disabled","fill","onClickRow","onMore","onSearch","onSelect","onSortProp","onSort","onUpdate","replace","pad","paginate","pin","placeholder","primaryKey","resizeable","rowProps","select","showProp","show","size","sortProp","sort","sortable","rowDetails","_ref$step","step","verticalAlign","rest","theme","_useContext","view","contextData","properties","onView","result","map","p","property","filter","c","includes","c1","c2","primaryProperty","showFooter","footer","_useState3","filtering","setFiltering","_useState4","filters","setFilters","_useState5","setSort","adjustedData","footerValues","cellProps","_useGroupState","_useState6","limit","setLimit","_useState7","undefined","selected","setSelected","_useState8","rowExpand","setRowExpand","_useState9","widths","setWidths","headerRef","bodyRef","footerRef","_useState10","headerHeight","setHeaderHeight","_useState11","footerHeight","setFooterHeight","_useState12","scrollOffset","setScrollOffset","_useState13","pinnedOffset","setPinnedOffset","onHeaderWidths","columnWidths","hasSelectColumn","Boolean","pinnedProperties","pinnedColumn","n","concat","nextPinnedOffset","forEach","index","columnIndex","findIndex","column","width","left","_bodyRef$current$pare","nextScrollOffset","current","parentElement","clientWidth","nextHeaderHeight","getBoundingClientRect","height","nextFooterHeight","onFiltering","onFilter","value","nextFilters","external","direction","nextSort","opts","count","expanded","k","onToggleGroup","groupValue","expandedKeys","onExpand","onToggleGroups","onResize","nextWidths","console","warn","_usePagination","page","items","paginationProps","paginationStep","Container","containterProps","dataTable","container","OverflowContainer","overflowContainerProps","overflow","horizontal","paginatedDataTableProps","style","minWidth","placeholderContent","createElement","color","opacity","align","justify","bodyContent","ref","body","prev","nextSelected","row","onToggle","pinnedCellProps","pinned","fillProp","header","onWidths","top","bottom","alignSelf","propTypes"],"sources":["C:/Users/malch/OneDrive/Documents/Projects/chucode/node_modules/grommet/es6/components/DataTable/DataTable.js"],"sourcesContent":["var _excluded = [\"background\", \"border\", \"columns\", \"data\", \"disabled\", \"fill\", \"groupBy\", \"onClickRow\", \"onMore\", \"onSearch\", \"onSelect\", \"onSort\", \"onUpdate\", \"replace\", \"pad\", \"paginate\", \"pin\", \"placeholder\", \"primaryKey\", \"resizeable\", \"rowProps\", \"select\", \"show\", \"size\", \"sort\", \"sortable\", \"rowDetails\", \"step\", \"verticalAlign\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nimport React, { useCallback, useContext, useEffect, useMemo, useRef, useState, Fragment } from 'react';\nimport { ThemeContext } from 'styled-components';\nimport { defaultProps } from '../../default-props';\nimport { useLayoutEffect } from '../../utils/use-isomorphic-layout-effect';\nimport { DataContext } from '../../contexts/DataContext';\nimport { Box } from '../Box';\nimport { Text } from '../Text';\nimport { Header } from './Header';\nimport { Footer } from './Footer';\nimport { Body } from './Body';\nimport { GroupedBody } from './GroupedBody';\nimport { Pagination } from '../Pagination';\nimport { buildFooterValues, buildGroups, buildGroupState, filterAndSortData, initializeFilters, normalizeCellProps, normalizePrimaryProperty } from './buildState';\nimport { normalizeShow, usePagination } from '../../utils';\nimport { StyledContainer, StyledDataTable, StyledPlaceholder } from './StyledDataTable';\nimport { DataTablePropTypes } from './propTypes';\nimport { PlaceholderBody } from './PlaceholderBody';\nvar emptyData = [];\nfunction useGroupState(groups, groupBy) {\n  var _useState = useState(function () {\n      return buildGroupState(groups, groupBy);\n    }),\n    groupState = _useState[0],\n    setGroupState = _useState[1];\n  var _useState2 = useState({\n      groups: groups,\n      groupBy: groupBy\n    }),\n    prevDeps = _useState2[0],\n    setPrevDeps = _useState2[1];\n  var prevGroups = prevDeps.groups,\n    prevGroupBy = prevDeps.groupBy;\n  if (groups !== prevGroups || groupBy !== prevGroupBy) {\n    setPrevDeps({\n      groups: groups,\n      groupBy: groupBy\n    });\n    var nextGroupState = buildGroupState(groups, groupBy);\n    setGroupState(nextGroupState);\n    return [nextGroupState, setGroupState];\n  }\n  return [groupState, setGroupState];\n}\nvar DataTable = function DataTable(_ref) {\n  var background = _ref.background,\n    border = _ref.border,\n    columnsProp = _ref.columns,\n    dataProp = _ref.data,\n    disabled = _ref.disabled,\n    fill = _ref.fill,\n    groupBy = _ref.groupBy,\n    onClickRow = _ref.onClickRow,\n    onMore = _ref.onMore,\n    onSearch = _ref.onSearch,\n    onSelect = _ref.onSelect,\n    onSortProp = _ref.onSort,\n    onUpdate = _ref.onUpdate,\n    replace = _ref.replace,\n    pad = _ref.pad,\n    paginate = _ref.paginate,\n    pin = _ref.pin,\n    placeholder = _ref.placeholder,\n    primaryKey = _ref.primaryKey,\n    resizeable = _ref.resizeable,\n    rowProps = _ref.rowProps,\n    select = _ref.select,\n    showProp = _ref.show,\n    size = _ref.size,\n    sortProp = _ref.sort,\n    sortable = _ref.sortable,\n    rowDetails = _ref.rowDetails,\n    _ref$step = _ref.step,\n    step = _ref$step === void 0 ? 50 : _ref$step,\n    verticalAlign = _ref.verticalAlign,\n    rest = _objectWithoutPropertiesLoose(_ref, _excluded);\n  var theme = useContext(ThemeContext) || defaultProps.theme;\n  var _useContext = useContext(DataContext),\n    view = _useContext.view,\n    contextData = _useContext.data,\n    properties = _useContext.properties,\n    onView = _useContext.onView;\n  var data = dataProp || contextData || emptyData;\n  var columns = useMemo(function () {\n    var result = [];\n    if (columnsProp) result = columnsProp;else if (properties) result = Object.keys(properties).map(function (p) {\n      return _extends({\n        property: p\n      }, properties[p]);\n    });else if (data.length) result = Object.keys(data[0]).map(function (p) {\n      return {\n        property: p\n      };\n    });\n    if (view != null && view.columns) result = result.filter(function (c) {\n      return view.columns.includes(c.property);\n    }).sort(function (c1, c2) {\n      return view.columns.indexOf(c1.property) - view.columns.indexOf(c2.property);\n    });\n    return result;\n  }, [columnsProp, data, properties, view]);\n\n  // property name of the primary property\n  var primaryProperty = useMemo(function () {\n    return normalizePrimaryProperty(columns, primaryKey);\n  }, [columns, primaryKey]);\n\n  // whether or not we should show a footer\n  var showFooter = useMemo(function () {\n    return columns.filter(function (c) {\n      return c.footer;\n    }).length > 0;\n  }, [columns]);\n\n  // what column we are actively capturing filter input on\n  var _useState3 = useState(),\n    filtering = _useState3[0],\n    setFiltering = _useState3[1];\n\n  // the currently active filters\n  var _useState4 = useState(initializeFilters(columns)),\n    filters = _useState4[0],\n    setFilters = _useState4[1];\n\n  // which column we are sorting on, with direction\n  var _useState5 = useState(sortProp || {}),\n    sort = _useState5[0],\n    setSort = _useState5[1];\n  useEffect(function () {\n    if (sortProp) setSort(sortProp);else if (view != null && view.sort) setSort(view.sort);\n  }, [sortProp, view]);\n\n  // the data filtered and sorted, if needed\n  // Note: onUpdate mode expects the data to be passed\n  //   in completely filtered and sorted already.\n  var adjustedData = useMemo(function () {\n    return onUpdate ? data : filterAndSortData(data, filters, onSearch, sort);\n  }, [data, filters, onSearch, onUpdate, sort]);\n\n  // the values to put in the footer cells\n  var footerValues = useMemo(function () {\n    return buildFooterValues(columns, adjustedData);\n  }, [adjustedData, columns]);\n\n  // cell styling properties: background, border, pad\n  var cellProps = useMemo(function () {\n    return normalizeCellProps({\n      background: background,\n      border: border,\n      pad: pad,\n      pin: pin\n    }, theme);\n  }, [background, border, pad, pin, theme]);\n\n  // if groupBy, an array with one item per unique groupBy key value\n  var groups = useMemo(function () {\n    return buildGroups(columns, adjustedData, groupBy, primaryProperty);\n  }, [adjustedData, columns, groupBy, primaryProperty]);\n\n  // an object indicating which group values are expanded\n  var _useGroupState = useGroupState(groups, groupBy),\n    groupState = _useGroupState[0],\n    setGroupState = _useGroupState[1];\n  var _useState6 = useState(step),\n    limit = _useState6[0],\n    setLimit = _useState6[1];\n  var _useState7 = useState(select || onSelect && [] || undefined),\n    selected = _useState7[0],\n    setSelected = _useState7[1];\n  useEffect(function () {\n    return setSelected(select || onSelect && [] || undefined);\n  }, [onSelect, select]);\n  var _useState8 = useState([]),\n    rowExpand = _useState8[0],\n    setRowExpand = _useState8[1];\n\n  // any customized column widths\n  var _useState9 = useState({}),\n    widths = _useState9[0],\n    setWidths = _useState9[1];\n\n  // placeholder placement stuff\n  var headerRef = useRef();\n  var bodyRef = useRef();\n  var footerRef = useRef();\n  var _useState10 = useState(),\n    headerHeight = _useState10[0],\n    setHeaderHeight = _useState10[1];\n  var _useState11 = useState(),\n    footerHeight = _useState11[0],\n    setFooterHeight = _useState11[1];\n\n  // offset compensation when body overflows\n  var _useState12 = useState(0),\n    scrollOffset = _useState12[0],\n    setScrollOffset = _useState12[1];\n\n  // multiple pinned columns offset\n  var _useState13 = useState(),\n    pinnedOffset = _useState13[0],\n    setPinnedOffset = _useState13[1];\n  var onHeaderWidths = useCallback(function (columnWidths) {\n    var hasSelectColumn = Boolean(select || onSelect);\n    var pinnedProperties = columns.map(function (pinnedColumn) {\n      return pinnedColumn.pin && pinnedColumn.property;\n    }).filter(function (n) {\n      return n;\n    });\n    if (hasSelectColumn && pinnedProperties.length > 0) {\n      pinnedProperties = ['_grommetDataTableSelect'].concat(pinnedProperties);\n    }\n    var nextPinnedOffset = {};\n    if (columnWidths !== []) {\n      pinnedProperties.forEach(function (property, index) {\n        var columnIndex = property === '_grommetDataTableSelect' ? 0 : columns.findIndex(function (column) {\n          return column.property === property;\n        }) + hasSelectColumn;\n        if (columnWidths[columnIndex]) {\n          nextPinnedOffset[property] = {\n            width: columnWidths[columnIndex],\n            left: index === 0 ? 0 : nextPinnedOffset[pinnedProperties[index - 1]].left + nextPinnedOffset[pinnedProperties[index - 1]].width\n          };\n        }\n      });\n      setPinnedOffset(nextPinnedOffset);\n    }\n  }, [columns, setPinnedOffset, select, onSelect]);\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useLayoutEffect(function () {\n    var _bodyRef$current$pare;\n    var nextScrollOffset = (((_bodyRef$current$pare = bodyRef.current.parentElement) == null ? void 0 : _bodyRef$current$pare.clientWidth) || 0) - bodyRef.current.clientWidth;\n    if (nextScrollOffset !== scrollOffset) setScrollOffset(nextScrollOffset);\n  });\n  useLayoutEffect(function () {\n    if (placeholder) {\n      if (headerRef.current) {\n        var nextHeaderHeight = headerRef.current.getBoundingClientRect().height;\n        setHeaderHeight(nextHeaderHeight);\n      } else setHeaderHeight(0);\n      if (footerRef.current) {\n        var nextFooterHeight = footerRef.current.getBoundingClientRect().height;\n        setFooterHeight(nextFooterHeight);\n      } else setFooterHeight(0);\n    }\n  }, [footerRef, headerRef, placeholder]);\n\n  // remember that we are filtering on this property\n  var onFiltering = function onFiltering(property) {\n    return setFiltering(property);\n  };\n\n  // remember the search text we should filter this property by\n  var onFilter = function onFilter(property, value) {\n    var nextFilters = _extends({}, filters);\n    nextFilters[property] = value;\n    setFilters(nextFilters);\n    // Let caller know about search, if interested\n    if (onSearch) onSearch(nextFilters);\n  };\n\n  // toggle the sort direction on this property\n  var onSort = function onSort(property) {\n    return function () {\n      var external = sort ? sort.external : false;\n      var direction;\n      if (!sort || property !== sort.property) direction = 'asc';else if (sort.direction === 'asc') direction = 'desc';else direction = 'asc';\n      var nextSort = {\n        property: property,\n        direction: direction,\n        external: external\n      };\n      setSort(nextSort);\n      if (onView) {\n        onView(_extends({}, view, {\n          sort: {\n            property: property,\n            direction: direction\n          }\n        }));\n      }\n      if (onUpdate) {\n        var opts = {\n          count: limit,\n          sort: nextSort\n        };\n        if (groups) {\n          opts.expanded = Object.keys(groupState).filter(function (k) {\n            return groupState[k].expanded;\n          });\n        }\n        if (showProp) opts.show = showProp;\n        onUpdate(opts);\n      }\n      if (onSortProp) onSortProp(nextSort);\n    };\n  };\n\n  // toggle whether the group is expanded\n  var onToggleGroup = function onToggleGroup(groupValue) {\n    return function () {\n      var nextGroupState = _extends({}, groupState);\n      nextGroupState[groupValue] = _extends({}, nextGroupState[groupValue], {\n        expanded: !nextGroupState[groupValue].expanded\n      });\n      setGroupState(nextGroupState);\n      var expandedKeys = Object.keys(nextGroupState).filter(function (k) {\n        return nextGroupState[k].expanded;\n      });\n      if (onUpdate) {\n        var opts = {\n          expanded: expandedKeys,\n          count: limit\n        };\n        if (sort != null && sort.property) opts.sort = sort;\n        if (showProp) opts.show = showProp;\n        onUpdate(opts);\n      }\n      if (groupBy.onExpand) {\n        groupBy.onExpand(expandedKeys);\n      }\n    };\n  };\n\n  // toggle whether all groups are expanded\n  var onToggleGroups = function onToggleGroups() {\n    var expanded = Object.keys(groupState).filter(function (k) {\n      return !groupState[k].expanded;\n    }).length === 0;\n    var nextGroupState = {};\n    Object.keys(groupState).forEach(function (k) {\n      nextGroupState[k] = _extends({}, groupState[k], {\n        expanded: !expanded\n      });\n    });\n    setGroupState(nextGroupState);\n    var expandedKeys = Object.keys(nextGroupState).filter(function (k) {\n      return nextGroupState[k].expanded;\n    });\n    if (onUpdate) {\n      var opts = {\n        expanded: expandedKeys,\n        count: limit\n      };\n      if (showProp) opts.show = showProp;\n      if (sort != null && sort.property) opts.sort = sort;\n      onUpdate(opts);\n    }\n    if (groupBy.onExpand) {\n      groupBy.onExpand(expandedKeys);\n    }\n  };\n\n  // remember the width this property's column should be\n  var onResize = useCallback(function (property, width) {\n    if (widths[property] !== width) {\n      var nextWidths = _extends({}, widths);\n      nextWidths[property] = width;\n      setWidths(nextWidths);\n    }\n  }, [widths]);\n  if (size && resizeable) {\n    console.warn('DataTable cannot combine \"size\" and \"resizeble\".');\n  }\n  if (onUpdate && onMore) {\n    console.warn('DataTable cannot combine \"onUpdate\" and \"onMore\".');\n  }\n  var _usePagination = usePagination(_extends({\n      data: adjustedData,\n      page: normalizeShow(showProp, step),\n      step: step\n    }, paginate)),\n    items = _usePagination[0],\n    paginationProps = _usePagination[1];\n  var paginationStep = paginationProps.step;\n  var Container = paginate ? StyledContainer : Fragment;\n  var containterProps = paginate ? _extends({}, theme.dataTable.container, {\n    fill: fill\n  }) : undefined;\n\n  // DataTable should overflow if paginating but pagination component\n  // should remain in its location\n  var OverflowContainer = paginate ? Box : Fragment;\n  var overflowContainerProps = paginate ? {\n    overflow: {\n      horizontal: 'auto'\n    }\n  } : undefined;\n\n  // necessary for Firefox, otherwise paginated DataTable will\n  // not fill its container like it does by default on other\n  // browsers like Chrome/Safari\n  var paginatedDataTableProps = paginate && (fill === true || fill === 'horizontal') ? {\n    style: {\n      minWidth: '100%'\n    }\n  } : undefined;\n  var placeholderContent = placeholder;\n  if (placeholder && typeof placeholder === 'string') {\n    placeholderContent = /*#__PURE__*/React.createElement(Box, {\n      background: {\n        color: 'background-front',\n        opacity: 'strong'\n      },\n      align: \"center\",\n      justify: \"center\",\n      fill: \"vertical\"\n    }, /*#__PURE__*/React.createElement(Text, null, placeholder));\n  }\n  var bodyContent = groups ? /*#__PURE__*/React.createElement(GroupedBody, {\n    ref: bodyRef,\n    cellProps: cellProps.body,\n    columns: columns,\n    disabled: disabled,\n    groupBy: typeof groupBy === 'string' ? {\n      property: groupBy\n    } : groupBy,\n    groups: groups,\n    groupState: groupState,\n    pinnedOffset: pinnedOffset,\n    primaryProperty: primaryProperty,\n    onMore: onUpdate ? function () {\n      if (adjustedData.length === limit) {\n        var opts = {\n          expanded: Object.keys(groupState).filter(function (k) {\n            return groupState[k].expanded;\n          }),\n          count: limit + paginationStep\n        };\n        if (sort != null && sort.property) opts.sort = sort;\n        if (showProp) opts.show = showProp;\n        onUpdate(opts);\n        setLimit(function (prev) {\n          return prev + paginationStep;\n        });\n      }\n    } : onMore,\n    onSelect: onSelect ? function (nextSelected, row) {\n      setSelected(nextSelected);\n      if (onSelect) onSelect(nextSelected, row);\n    } : undefined,\n    onToggle: onToggleGroup,\n    onUpdate: onUpdate,\n    replace: replace,\n    rowProps: rowProps,\n    selected: selected,\n    size: size,\n    step: paginationStep,\n    verticalAlign: typeof verticalAlign === 'string' ? verticalAlign : verticalAlign == null ? void 0 : verticalAlign.body\n  }) : /*#__PURE__*/React.createElement(Body, {\n    ref: bodyRef,\n    cellProps: cellProps.body,\n    columns: columns,\n    data: !paginate ? adjustedData : items,\n    disabled: disabled,\n    onMore: onUpdate ? function () {\n      if (adjustedData.length === limit) {\n        var opts = {\n          count: limit + paginationStep\n        };\n        if (sort != null && sort.property) opts.sort = sort;\n        if (showProp) opts.show = showProp;\n        onUpdate(opts);\n        setLimit(function (prev) {\n          return prev + paginationStep;\n        });\n      }\n    } : onMore,\n    replace: replace,\n    onClickRow: onClickRow,\n    onSelect: onSelect ? function (nextSelected, row) {\n      setSelected(nextSelected);\n      if (onSelect) onSelect(nextSelected, row);\n    } : undefined,\n    pinnedCellProps: cellProps.pinned,\n    pinnedOffset: pinnedOffset,\n    primaryProperty: primaryProperty,\n    rowProps: rowProps,\n    selected: selected,\n    show: !paginate ? showProp : undefined,\n    size: size,\n    step: paginationStep,\n    rowDetails: rowDetails,\n    rowExpand: rowExpand,\n    setRowExpand: setRowExpand,\n    verticalAlign: typeof verticalAlign === 'string' ? verticalAlign : verticalAlign == null ? void 0 : verticalAlign.body\n  });\n  return /*#__PURE__*/React.createElement(Container, containterProps, /*#__PURE__*/React.createElement(OverflowContainer, overflowContainerProps, /*#__PURE__*/React.createElement(StyledDataTable, _extends({\n    fillProp: !paginate ? fill : undefined\n  }, paginatedDataTableProps, rest), /*#__PURE__*/React.createElement(Header, {\n    ref: headerRef,\n    cellProps: cellProps.header,\n    columns: columns,\n    data: adjustedData,\n    disabled: disabled,\n    fill: fill,\n    filtering: filtering,\n    filters: filters,\n    groupBy: groupBy,\n    groups: groups,\n    groupState: groupState,\n    pin: pin === true || pin === 'header',\n    pinnedOffset: pinnedOffset,\n    selected: selected,\n    size: size,\n    sort: sort,\n    widths: widths,\n    onFiltering: onFiltering,\n    onFilter: onFilter,\n    onResize: resizeable ? onResize : undefined,\n    onSelect: onSelect ? function (nextSelected) {\n      setSelected(nextSelected);\n      if (onSelect) onSelect(nextSelected);\n    } : undefined,\n    onSort: sortable || sortProp || onSortProp ? onSort : undefined,\n    onToggle: onToggleGroups,\n    onWidths: onHeaderWidths,\n    primaryProperty: primaryProperty,\n    scrollOffset: scrollOffset,\n    rowDetails: rowDetails,\n    verticalAlign: typeof verticalAlign === 'string' ? verticalAlign : verticalAlign == null ? void 0 : verticalAlign.header\n  }), placeholder && (!items || items.length === 0) ? /*#__PURE__*/React.createElement(PlaceholderBody, {\n    ref: bodyRef,\n    columns: columns,\n    onSelect: onSelect\n  }, placeholderContent) : bodyContent, showFooter && /*#__PURE__*/React.createElement(Footer, {\n    ref: footerRef,\n    cellProps: cellProps.footer,\n    columns: columns,\n    fill: fill,\n    footerValues: footerValues,\n    groups: groups,\n    onSelect: onSelect,\n    pin: pin === true || pin === 'footer',\n    pinnedOffset: pinnedOffset,\n    primaryProperty: primaryProperty,\n    scrollOffset: scrollOffset,\n    selected: selected,\n    size: size,\n    verticalAlign: typeof verticalAlign === 'string' ? verticalAlign : verticalAlign == null ? void 0 : verticalAlign.footer\n  }), placeholder && items && items.length > 0 && /*#__PURE__*/React.createElement(StyledPlaceholder, {\n    top: headerHeight,\n    bottom: footerHeight\n  }, placeholderContent))), paginate && adjustedData.length > paginationStep && items && items.length ? /*#__PURE__*/React.createElement(Pagination, _extends({\n    alignSelf: \"end\"\n  }, paginationProps)) : null);\n};\nDataTable.propTypes = DataTablePropTypes;\nexport { DataTable };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}