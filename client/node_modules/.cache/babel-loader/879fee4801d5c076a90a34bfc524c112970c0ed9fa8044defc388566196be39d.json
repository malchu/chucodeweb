{"ast":null,"code":"var _excluded = [\"activeDate\", \"animate\", \"bounds\", \"children\", \"date\", \"dates\", \"daysOfWeek\", \"disabled\", \"initialFocus\", \"fill\", \"firstDayOfWeek\", \"header\", \"locale\", \"messages\", \"onReference\", \"onSelect\", \"range\", \"reference\", \"showAdjacentDays\", \"size\", \"timestamp\"];\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nimport React, { forwardRef, useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport { ThemeContext } from 'styled-components';\nimport { AnnounceContext } from '../../contexts/AnnounceContext';\nimport { MessageContext } from '../../contexts/MessageContext';\nimport { defaultProps } from '../../default-props';\nimport { Box } from '../Box';\nimport { Button } from '../Button';\nimport { Heading } from '../Heading';\nimport { Keyboard } from '../Keyboard';\nimport { CalendarPropTypes } from './propTypes';\nimport { StyledCalendar, StyledDay, StyledDayContainer, StyledWeek, StyledWeeks, StyledWeeksContainer } from './StyledCalendar';\nimport { addDays, addMonths, betweenDates, daysApart, endOfMonth, handleOffset, sameDayOrAfter, sameDayOrBefore, startOfMonth, subtractDays, subtractMonths, withinDates } from './utils';\nimport { setHoursWithOffset } from '../../utils/dates';\nvar headingPadMap = {\n  small: 'xsmall',\n  medium: 'small',\n  large: 'medium'\n};\nvar getLocaleString = function getLocaleString(value, locale) {\n  return value == null ? void 0 : value.toLocaleDateString(locale, {\n    month: 'long',\n    day: 'numeric',\n    year: 'numeric'\n  });\n};\nvar currentlySelectedString = function currentlySelectedString(value, locale) {\n  var selected;\n  if (value instanceof Date) {\n    selected = \"Currently selected \" + getLocaleString(value, locale) + \";\";\n  } else if (value != null && value.length) {\n    selected = \"Currently selected \" + value.map(function (item) {\n      var dates;\n      if (!Array.isArray(item)) {\n        dates = \"\" + getLocaleString(item, locale);\n      } else {\n        var start = item[0] !== undefined ? getLocaleString(item[0], locale) : 'none';\n        var end = item[1] !== undefined ? getLocaleString(item[1], locale) : 'none';\n        dates = start + \" through \" + end;\n      }\n      return dates;\n    });\n  } else {\n    selected = 'No date selected';\n  }\n  return selected;\n};\n\n// calendar value may be a single date, multiple dates, a range of dates\n// supplied as ISOstrings.\nvar normalizeInput = function normalizeInput(dateValue) {\n  var result;\n  if (dateValue instanceof Date) {\n    result = dateValue;\n  }\n  // date may be an empty string ''\n  else if (typeof dateValue === 'string' && dateValue.length) {\n    result = setHoursWithOffset(dateValue);\n  } else if (Array.isArray(dateValue)) {\n    result = dateValue.map(function (d) {\n      return normalizeInput(d);\n    });\n  }\n  return result;\n};\nvar normalizeOutput = function normalizeOutput(dateValue, outputFormat) {\n  var result;\n  var normalize = function normalize(value) {\n    var normalizedValue = value.toISOString();\n    if (normalizedValue && outputFormat === 'no timezone') {\n      var _handleOffset$toISOSt = handleOffset(normalizedValue).toISOString().split('T');\n      normalizedValue = _handleOffset$toISOSt[0];\n    }\n    return normalizedValue;\n  };\n  if (dateValue instanceof Date) {\n    result = normalize(dateValue);\n  } else if (typeof dateValue === 'undefined') {\n    result = undefined;\n  } else {\n    result = dateValue.map(function (d) {\n      return normalizeOutput(d, outputFormat);\n    });\n  }\n  return result;\n};\n\n// format value to [[]] for internal functions\nvar normalizeRange = function normalizeRange(value, activeDate) {\n  var range = value;\n  if (range instanceof Date) range = activeDate === 'start' ? [[undefined, range]] : [[range, undefined]];else if (Array.isArray(range) && !Array.isArray(range[0])) range = [range];\n  return range;\n};\nvar getReference = function getReference(reference, value) {\n  var nextReference;\n  if (value) {\n    if (Array.isArray(value)) {\n      if (value[0] instanceof Date) {\n        nextReference = value[0];\n      } else if (Array.isArray(value[0])) {\n        nextReference = value[0][0] ? value[0][0] : value[0][1];\n      } else {\n        nextReference = new Date();\n        nextReference.setHours(0, 0, 0, 0);\n      }\n    } else nextReference = value;\n  } else if (reference) {\n    nextReference = reference;\n  } else {\n    nextReference = new Date();\n    nextReference.setHours(0, 0, 0, 0);\n  }\n  return nextReference;\n};\nvar buildDisplayBounds = function buildDisplayBounds(reference, firstDayOfWeek) {\n  var start = new Date(reference);\n  start.setDate(1); // first of month\n\n  // In case Sunday is the first day of the month, and the user asked for Monday\n  // to be the first day of the week, then we need to include Sunday and six\n  // days prior.\n  start = start.getDay() === 0 && firstDayOfWeek === 1 ? start = subtractDays(start, 6) :\n  // beginning of week\n  start = subtractDays(start, start.getDay() - firstDayOfWeek);\n  var end = addDays(start, 7 * 5 + 7); // 5 weeks to end of week\n  return [start, end];\n};\nvar disabledCalendarPreviousMonthButton = function disabledCalendarPreviousMonthButton(date, reference, bounds) {\n  if (!bounds) return false;\n  var lastBound = new Date(bounds[1]);\n  return !sameDayOrBefore(lastBound, reference) && !betweenDates(date, bounds);\n};\nvar disabledCalendarNextMonthButton = function disabledCalendarNextMonthButton(date, reference, bounds) {\n  if (!bounds) return false;\n  var firstBound = new Date(bounds[0]);\n  return !sameDayOrAfter(firstBound, reference) && !betweenDates(date, bounds);\n};\nexport var getOutputFormat = function getOutputFormat(dates) {\n  if (typeof dates === 'string' && (dates == null ? void 0 : dates.indexOf('T')) === -1) {\n    return 'no timezone';\n  }\n  if (Array.isArray(dates)) {\n    return getOutputFormat(dates[0]);\n  }\n  return 'date timezone';\n};\nvar millisecondsPerYear = 31557600000;\nvar CalendarDayButton = function CalendarDayButton(props) {\n  return /*#__PURE__*/React.createElement(Button, _extends({\n    tabIndex: -1,\n    plain: true\n  }, props));\n};\nvar CalendarDay = function CalendarDay(_ref) {\n  var children = _ref.children,\n    fill = _ref.fill,\n    size = _ref.size,\n    isInRange = _ref.isInRange,\n    isSelected = _ref.isSelected,\n    otherMonth = _ref.otherMonth,\n    _ref$buttonProps = _ref.buttonProps,\n    buttonProps = _ref$buttonProps === void 0 ? {} : _ref$buttonProps;\n  return /*#__PURE__*/React.createElement(StyledDayContainer, {\n    role: \"gridcell\",\n    sizeProp: size,\n    fillContainer: fill\n  }, /*#__PURE__*/React.createElement(CalendarDayButton, _extends({\n    fill: fill\n  }, buttonProps), /*#__PURE__*/React.createElement(StyledDay, {\n    disabledProp: buttonProps.disabled,\n    inRange: isInRange,\n    otherMonth: otherMonth,\n    isSelected: isSelected,\n    sizeProp: size,\n    fillContainer: fill\n  }, children)));\n};\nvar CalendarCustomDay = function CalendarCustomDay(_ref2) {\n  var children = _ref2.children,\n    fill = _ref2.fill,\n    size = _ref2.size,\n    buttonProps = _ref2.buttonProps;\n  if (!buttonProps) {\n    return /*#__PURE__*/React.createElement(StyledDayContainer, {\n      role: \"gridcell\",\n      sizeProp: size,\n      fillContainer: fill\n    }, children);\n  }\n  return /*#__PURE__*/React.createElement(StyledDayContainer, {\n    role: \"gridcell\",\n    sizeProp: size,\n    fillContainer: fill\n  }, /*#__PURE__*/React.createElement(CalendarDayButton, _extends({\n    fill: fill\n  }, buttonProps), children));\n};\nvar Calendar = /*#__PURE__*/forwardRef(function (_ref3, ref) {\n  var activeDateProp = _ref3.activeDate,\n    _ref3$animate = _ref3.animate,\n    animate = _ref3$animate === void 0 ? true : _ref3$animate,\n    boundsProp = _ref3.bounds,\n    children = _ref3.children,\n    dateProp = _ref3.date,\n    datesProp = _ref3.dates,\n    daysOfWeek = _ref3.daysOfWeek,\n    disabled = _ref3.disabled,\n    initialFocus = _ref3.initialFocus,\n    fill = _ref3.fill,\n    _ref3$firstDayOfWeek = _ref3.firstDayOfWeek,\n    firstDayOfWeek = _ref3$firstDayOfWeek === void 0 ? 0 : _ref3$firstDayOfWeek,\n    header = _ref3.header,\n    _ref3$locale = _ref3.locale,\n    locale = _ref3$locale === void 0 ? 'en-US' : _ref3$locale,\n    messages = _ref3.messages,\n    onReference = _ref3.onReference,\n    onSelect = _ref3.onSelect,\n    range = _ref3.range,\n    referenceProp = _ref3.reference,\n    _ref3$showAdjacentDay = _ref3.showAdjacentDays,\n    showAdjacentDays = _ref3$showAdjacentDay === void 0 ? true : _ref3$showAdjacentDay,\n    _ref3$size = _ref3.size,\n    size = _ref3$size === void 0 ? 'medium' : _ref3$size,\n    timestampProp = _ref3.timestamp,\n    rest = _objectWithoutPropertiesLoose(_ref3, _excluded);\n  var theme = useContext(ThemeContext) || defaultProps.theme;\n  var announce = useContext(AnnounceContext);\n  var _useContext = useContext(MessageContext),\n    format = _useContext.format;\n\n  // when mousedown, we don't want to let Calendar set\n  // active date to firstInMonth\n  var _useState = useState(false),\n    mouseDown = _useState[0],\n    setMouseDown = _useState[1];\n  var onMouseDown = function onMouseDown() {\n    return setMouseDown(true);\n  };\n  var onMouseUp = function onMouseUp() {\n    return setMouseDown(false);\n  };\n  useEffect(function () {\n    document.addEventListener('mousedown', onMouseDown);\n    document.addEventListener('mouseup', onMouseUp);\n    return function () {\n      document.removeEventListener('mousedown', onMouseDown);\n      document.removeEventListener('mouseup', onMouseUp);\n    };\n  }, []);\n\n  // set activeDate when caller changes it, allows us to change\n  // it internally too\n  var _useState2 = useState(dateProp && typeof dateProp === 'string' && range ? 'end' : 'start'),\n    activeDate = _useState2[0],\n    setActiveDate = _useState2[1];\n  useEffect(function () {\n    if (activeDateProp) setActiveDate(activeDateProp);\n  }, [activeDateProp]);\n  var _useState3 = useState(normalizeInput(dateProp || datesProp)),\n    value = _useState3[0],\n    setValue = _useState3[1];\n  useEffect(function () {\n    var val = dateProp || datesProp;\n    setValue(normalizeInput(val));\n  }, [dateProp, datesProp]);\n  var _useState4 = useState(getReference(normalizeInput(referenceProp), value)),\n    reference = _useState4[0],\n    setReference = _useState4[1];\n  useEffect(function () {\n    if (value) {\n      setReference(getReference(normalizeInput(referenceProp), value));\n    }\n  }, [referenceProp, value]);\n  var _useState5 = useState(getOutputFormat(dateProp || datesProp)),\n    outputFormat = _useState5[0],\n    setOutputFormat = _useState5[1];\n  useEffect(function () {\n    setOutputFormat(getOutputFormat(dateProp || datesProp));\n  }, [dateProp, datesProp]);\n\n  // normalize bounds\n  var _useState6 = useState(boundsProp),\n    bounds = _useState6[0],\n    setBounds = _useState6[1];\n  useEffect(function () {\n    if (boundsProp) setBounds(boundsProp);else setBounds(undefined);\n  }, [boundsProp]);\n\n  // calculate the bounds we display based on the reference\n  var _useState7 = useState(buildDisplayBounds(reference, firstDayOfWeek)),\n    displayBounds = _useState7[0],\n    setDisplayBounds = _useState7[1];\n  var _useState8 = useState(),\n    targetDisplayBounds = _useState8[0],\n    setTargetDisplayBounds = _useState8[1];\n  var _useState9 = useState(),\n    slide = _useState9[0],\n    setSlide = _useState9[1];\n  var _useState10 = useState(),\n    animating = _useState10[0],\n    setAnimating = _useState10[1];\n\n  // When the reference changes, we need to update the displayBounds.\n  // This is easy when we aren't animating. If we are animating,\n  // we temporarily increase the displayBounds to be the union of the old\n  // and new ones and set slide to drive the animation. We keep track\n  // of where we are heading via targetDisplayBounds. When the animation\n  // finishes, we prune displayBounds down to where we are headed and\n  // clear the slide and targetDisplayBounds.\n  useEffect(function () {\n    var nextDisplayBounds = buildDisplayBounds(reference, firstDayOfWeek);\n\n    // Checks if the difference between the current and next DisplayBounds is\n    // greater than a year. If that's the case, calendar should update without\n    // animation.\n    if (nextDisplayBounds[0].getTime() !== displayBounds[0].getTime() && nextDisplayBounds[1].getTime() !== displayBounds[1].getTime()) {\n      var diffBoundsAboveYear = false;\n      if (nextDisplayBounds[0].getTime() < displayBounds[0].getTime()) {\n        if (displayBounds[0].getTime() - nextDisplayBounds[0].getTime() > millisecondsPerYear) {\n          diffBoundsAboveYear = true;\n        }\n      } else if (nextDisplayBounds[1].getTime() > displayBounds[1].getTime()) {\n        if (nextDisplayBounds[1].getTime() - displayBounds[1].getTime() > millisecondsPerYear) {\n          diffBoundsAboveYear = true;\n        }\n      }\n      if (!animate || diffBoundsAboveYear) {\n        setDisplayBounds(nextDisplayBounds);\n      } else {\n        setTargetDisplayBounds(nextDisplayBounds);\n      }\n    }\n  }, [animate, firstDayOfWeek, reference, displayBounds]);\n  useEffect(function () {\n    // if the reference timezone has changed (e.g., controlled component),\n    // both ends of the displayBounds should inherit that new timestamp\n    if (targetDisplayBounds) {\n      if (targetDisplayBounds[0].getTime() < displayBounds[0].getTime() || targetDisplayBounds[1].getTime() > displayBounds[1].getTime()) {\n        setDisplayBounds([targetDisplayBounds[0], targetDisplayBounds[1]]);\n      }\n      if (targetDisplayBounds[0].getTime() < displayBounds[0].getTime()) {\n        // only animate if the duration is within a year\n        if (displayBounds[0].getTime() - targetDisplayBounds[0].getTime() < millisecondsPerYear && daysApart(displayBounds[0], targetDisplayBounds[0])) {\n          setSlide({\n            direction: 'down',\n            weeks: daysApart(displayBounds[0], targetDisplayBounds[0]) / 7\n          });\n          setAnimating(true);\n        }\n      } else if (targetDisplayBounds[1].getTime() > displayBounds[1].getTime()) {\n        if (targetDisplayBounds[1].getTime() - displayBounds[1].getTime() < millisecondsPerYear && daysApart(targetDisplayBounds[1], displayBounds[1])) {\n          setSlide({\n            direction: 'up',\n            weeks: daysApart(targetDisplayBounds[1], displayBounds[1]) / 7\n          });\n          setAnimating(true);\n        }\n      }\n      return undefined;\n    }\n    setSlide(undefined);\n    return undefined;\n  }, [animating, displayBounds, targetDisplayBounds]);\n\n  // Last step in updating the displayBounds. Allows for pruning\n  // displayBounds and cleaning up states to occur after animation.\n  useEffect(function () {\n    if (animating && targetDisplayBounds) {\n      // Wait for animation to finish before cleaning up.\n      var timer = setTimeout(function () {\n        setDisplayBounds(targetDisplayBounds);\n        setTargetDisplayBounds(undefined);\n        setSlide(undefined);\n        setAnimating(false);\n      }, 400 // Empirically determined.\n      );\n\n      return function () {\n        return clearTimeout(timer);\n      };\n    }\n    return undefined;\n  }, [animating, targetDisplayBounds]);\n\n  // We have to deal with reference being the end of a month with more\n  // days than the month we are changing to. So, we always set reference\n  // to the first of the month before changing the month.\n  var previousMonth = useMemo(function () {\n    return endOfMonth(subtractMonths(startOfMonth(reference), 1));\n  }, [reference]);\n  var nextMonth = useMemo(function () {\n    return startOfMonth(addMonths(startOfMonth(reference), 1));\n  }, [reference]);\n  var daysRef = useRef();\n  var _useState11 = useState(),\n    focus = _useState11[0],\n    setFocus = _useState11[1];\n  var _useState12 = useState(),\n    active = _useState12[0],\n    setActive = _useState12[1];\n  useEffect(function () {\n    if (initialFocus === 'days') daysRef.current.focus();\n  }, [initialFocus]);\n  var handleReference = useCallback(function (nextReference) {\n    setReference(nextReference);\n    if (onReference) onReference(nextReference.toISOString());\n  }, [onReference]);\n  var changeReference = useCallback(function (nextReference) {\n    if (betweenDates(nextReference, bounds)) handleReference(nextReference);\n  }, [handleReference, bounds]);\n  var changeCalendarMonth = function changeCalendarMonth(messageId, newMonth) {\n    handleReference(newMonth);\n    announce(format({\n      id: messageId,\n      messages: messages,\n      values: {\n        date: newMonth.toLocaleDateString(locale, {\n          month: 'long',\n          year: 'numeric'\n        })\n      }\n    }));\n  };\n  var handleRange = useCallback(function (selectedDate) {\n    var _priorRange$, _priorRange$$, _priorRange$2, _priorRange$2$;\n    var result;\n    var priorRange = normalizeRange(value, activeDate);\n    // deselect when date clicked was the start/end of the range\n    if (selectedDate.getTime() === (priorRange == null ? void 0 : (_priorRange$ = priorRange[0]) == null ? void 0 : (_priorRange$$ = _priorRange$[0]) == null ? void 0 : _priorRange$$.getTime())) {\n      result = [[undefined, priorRange[0][1]]];\n      setActiveDate('start');\n    } else if (selectedDate.getTime() === (priorRange == null ? void 0 : (_priorRange$2 = priorRange[0]) == null ? void 0 : (_priorRange$2$ = _priorRange$2[1]) == null ? void 0 : _priorRange$2$.getTime())) {\n      result = [[priorRange[0][0], undefined]];\n      setActiveDate('end');\n    }\n    // selecting start date\n    else if (activeDate === 'start') {\n      if (!priorRange) {\n        result = [[selectedDate, undefined]];\n      } else if (!priorRange[0][1]) {\n        result = [[selectedDate, priorRange[0][1]]];\n      } else if (selectedDate.getTime() < priorRange[0][1].getTime()) {\n        result = [[selectedDate, priorRange[0][1]]];\n      } else if (selectedDate.getTime() > priorRange[0][1].getTime()) {\n        result = [[selectedDate, undefined]];\n      }\n      setActiveDate('end');\n    }\n    // selecting end date\n    else if (!priorRange) {\n      result = [[undefined, selectedDate]];\n      setActiveDate('start');\n    } else if (selectedDate.getTime() < priorRange[0][0].getTime()) {\n      result = [[selectedDate, undefined]];\n      setActiveDate('end');\n    } else if (selectedDate.getTime() > priorRange[0][0].getTime()) {\n      result = [[priorRange[0][0], selectedDate]];\n      setActiveDate('start');\n    }\n\n    // If no dates selected, always return undefined; else format\n    // result according to specified range value.\n    if (result[0].includes(undefined)) {\n      if (range === 'array') {\n        result = !result[0][0] && !result[0][1] ? undefined : result;\n      } else {\n        result = result[0].find(function (d) {\n          return d !== undefined;\n        });\n      }\n    }\n    setValue(result);\n    return result;\n  }, [activeDate, value, range]);\n  var selectDate = useCallback(function (selectedDate) {\n    var nextValue;\n    if (range || Array.isArray(value == null ? void 0 : value[0])) {\n      nextValue = handleRange(selectedDate);\n    } else {\n      nextValue = selectedDate;\n    }\n    if (onSelect) {\n      nextValue = normalizeOutput(nextValue, outputFormat);\n      onSelect(nextValue);\n    }\n  }, [handleRange, onSelect, outputFormat, range, value]);\n  var _onClick = function onClick(selectedDate) {\n    selectDate(selectedDate);\n    announce(\"Selected \" + getLocaleString(selectedDate, locale), 'assertive');\n    // Chrome moves the focus indicator to this button. Set\n    // the focus to the grid of days instead.\n    daysRef.current.focus();\n    setActive(selectedDate);\n  };\n  var renderCalendarHeader = function renderCalendarHeader() {\n    var PreviousIcon = size === 'small' ? theme.calendar.icons.small.previous : theme.calendar.icons.previous;\n    var NextIcon = size === 'small' ? theme.calendar.icons.small.next : theme.calendar.icons.next;\n    return /*#__PURE__*/React.createElement(Box, {\n      direction: \"row\",\n      justify: \"between\",\n      align: \"center\"\n    }, /*#__PURE__*/React.createElement(Box, {\n      flex: true,\n      pad: {\n        horizontal: headingPadMap[size] || 'small'\n      }\n    }, /*#__PURE__*/React.createElement(Heading, {\n      level: size === 'small' ? theme.calendar.heading && theme.calendar.heading.level || 4 : (theme.calendar.heading && theme.calendar.heading.level || 4) - 1,\n      size: size,\n      margin: \"none\",\n      overflowWrap: \"normal\"\n    }, reference.toLocaleDateString(locale, {\n      month: 'long',\n      year: 'numeric'\n    }))), /*#__PURE__*/React.createElement(Box, {\n      flex: false,\n      direction: \"row\",\n      align: \"center\"\n    }, /*#__PURE__*/React.createElement(Button, {\n      a11yTitle: format({\n        id: 'calendar.previous',\n        messages: messages,\n        values: {\n          date: previousMonth.toLocaleDateString(locale, {\n            month: 'long',\n            year: 'numeric'\n          })\n        }\n      }),\n      icon: /*#__PURE__*/React.createElement(PreviousIcon, {\n        size: size !== 'small' ? size : undefined\n      }),\n      disabled: disabledCalendarPreviousMonthButton(previousMonth, reference, bounds),\n      onClick: function onClick() {\n        return changeCalendarMonth('calendar.previousMove', previousMonth);\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      a11yTitle: format({\n        id: 'calendar.next',\n        messages: messages,\n        values: {\n          date: nextMonth.toLocaleDateString(locale, {\n            month: 'long',\n            year: 'numeric'\n          })\n        }\n      }),\n      icon: /*#__PURE__*/React.createElement(NextIcon, {\n        size: size !== 'small' ? size : undefined\n      }),\n      disabled: disabledCalendarNextMonthButton(nextMonth, reference, bounds),\n      onClick: function onClick() {\n        return changeCalendarMonth('calendar.nextMove', nextMonth);\n      }\n    })));\n  };\n  var renderDaysOfWeek = function renderDaysOfWeek() {\n    var day = new Date(displayBounds[0]);\n    var days = [];\n    while (days.length < 7) {\n      days.push( /*#__PURE__*/React.createElement(StyledDayContainer, {\n        role: \"gridcell\",\n        key: days.length,\n        sizeProp: size,\n        fillContainer: fill\n      }, /*#__PURE__*/React.createElement(StyledDay, {\n        otherMonth: true,\n        sizeProp: size,\n        fillContainer: fill\n      }, day.toLocaleDateString(locale, {\n        weekday: 'narrow'\n      }))));\n      day = addDays(day, 1);\n    }\n    return /*#__PURE__*/React.createElement(StyledWeek, {\n      role: \"row\"\n    }, days);\n  };\n  var weeks = [];\n  var day = new Date(displayBounds[0]);\n  var days;\n  var firstDayInMonth;\n  var blankWeek = false;\n  var _loop = function _loop() {\n    if (day.getDay() === firstDayOfWeek) {\n      if (days) {\n        weeks.push( /*#__PURE__*/React.createElement(StyledWeek, {\n          role: \"row\",\n          key: day.getTime(),\n          fillContainer: fill\n        }, days));\n      }\n      days = [];\n    }\n    var otherMonth = day.getMonth() !== reference.getMonth();\n    if (!showAdjacentDays && otherMonth) {\n      days.push( /*#__PURE__*/React.createElement(StyledDayContainer, {\n        key: day.getTime(),\n        sizeProp: size,\n        fillContainer: fill\n      }, /*#__PURE__*/React.createElement(StyledDay, {\n        sizeProp: size,\n        fillContainer: fill\n      })));\n      if (weeks.length === 5 &&\n      /* If the length days array is less than the current getDate()\n      we know that all days in the array are from the next month. */\n      days.length < day.getDate()) {\n        blankWeek = true;\n      }\n    } else if (\n    /* Do not show adjacent days in 6th row if all days\n    fall in the next month */\n    showAdjacentDays === 'trim' && otherMonth && weeks.length === 5 &&\n    /* If the length days array is less than the current getDate()\n    we know that all days in the array are from the next month. */\n    days.length < day.getDate()) {\n      blankWeek = true;\n      days.push( /*#__PURE__*/React.createElement(StyledDayContainer, {\n        key: day.getTime(),\n        sizeProp: size,\n        fillContainer: fill\n      }, /*#__PURE__*/React.createElement(StyledDay, {\n        sizeProp: size,\n        fillContainer: fill\n      })));\n    } else {\n      var dateObject = day;\n      // this.dayRefs[dateObject] = React.createRef();\n      var selected = false;\n      var inRange = false;\n      var selectedState = withinDates(day, range ? normalizeRange(value, activeDate) : value);\n      if (selectedState === 2) {\n        selected = true;\n      } else if (selectedState === 1) {\n        inRange = true;\n      }\n      var dayDisabled = withinDates(day, normalizeInput(disabled)) || bounds && !betweenDates(day, normalizeInput(bounds));\n      if (!firstDayInMonth && !dayDisabled && day.getMonth() === reference.getMonth()) {\n        firstDayInMonth = dateObject;\n      }\n      if (!children) {\n        days.push( /*#__PURE__*/React.createElement(CalendarDay, {\n          key: day.getTime(),\n          buttonProps: {\n            a11yTitle: day.toDateString(),\n            active: active && active.getTime() === day.getTime(),\n            disabled: dayDisabled && !!dayDisabled,\n            onClick: function onClick() {\n              return _onClick(dateObject);\n            },\n            onMouseOver: function onMouseOver() {\n              return setActive(dateObject);\n            },\n            onMouseOut: function onMouseOut() {\n              return setActive(undefined);\n            }\n          },\n          isInRange: inRange,\n          isSelected: selected,\n          otherMonth: day.getMonth() !== reference.getMonth(),\n          size: size,\n          fill: fill\n        }, day.getDate()));\n      } else {\n        days.push( /*#__PURE__*/React.createElement(CalendarCustomDay, {\n          key: day.getTime(),\n          buttonProps: onSelect ? {\n            a11yTitle: day.toDateString(),\n            active: active && active.getTime() === day.getTime(),\n            disabled: dayDisabled && !!dayDisabled,\n            onClick: function onClick() {\n              return _onClick(dateObject);\n            },\n            onMouseOver: function onMouseOver() {\n              return setActive(dateObject);\n            },\n            onMouseOut: function onMouseOut() {\n              return setActive(undefined);\n            }\n          } : null,\n          size: size,\n          fill: fill\n        }, children({\n          date: day,\n          day: day.getDate(),\n          isInRange: inRange,\n          isSelected: selected\n        })));\n      }\n    }\n    day = addDays(day, 1);\n  };\n  while (day.getTime() < displayBounds[1].getTime()) {\n    _loop();\n  }\n  weeks.push( /*#__PURE__*/React.createElement(StyledWeek\n  // if a week contains only blank days, for screen reader accessibility\n  // we don't want to set role=\"row\"\n  , {\n    role: !blankWeek ? 'row' : undefined,\n    key: day.getTime(),\n    fillContainer: fill\n  }, days));\n  return /*#__PURE__*/React.createElement(StyledCalendar, _extends({\n    ref: ref,\n    sizeProp: size,\n    fillContainer: fill\n  }, rest), /*#__PURE__*/React.createElement(Box, {\n    fill: fill\n  }, header ? header({\n    date: reference,\n    locale: locale,\n    onPreviousMonth: function onPreviousMonth() {\n      changeReference(previousMonth);\n      announce(format({\n        id: 'calendar.previous',\n        messages: messages,\n        values: {\n          date: previousMonth.toLocaleDateString(locale, {\n            month: 'long',\n            year: 'numeric'\n          })\n        }\n      }));\n    },\n    onNextMonth: function onNextMonth() {\n      changeReference(nextMonth);\n      announce(format({\n        id: 'calendar.next',\n        messages: messages,\n        values: {\n          date: nextMonth.toLocaleDateString(locale, {\n            month: 'long',\n            year: 'numeric'\n          })\n        }\n      }));\n    },\n    previousInBound: betweenDates(previousMonth, bounds),\n    nextInBound: betweenDates(nextMonth, bounds)\n  }) : renderCalendarHeader(previousMonth, nextMonth), daysOfWeek && renderDaysOfWeek(), /*#__PURE__*/React.createElement(Keyboard, {\n    onEnter: function onEnter() {\n      return active !== undefined ? _onClick(active) : undefined;\n    },\n    onUp: function onUp(event) {\n      event.preventDefault();\n      event.stopPropagation(); // so the page doesn't scroll\n      setActive(addDays(active, -7));\n      if (!betweenDates(addDays(active, -7), displayBounds)) {\n        changeReference(addDays(active, -7));\n      }\n    },\n    onDown: function onDown(event) {\n      event.preventDefault();\n      event.stopPropagation(); // so the page doesn't scroll\n      setActive(addDays(active, 7));\n      if (!betweenDates(addDays(active, 7), displayBounds)) {\n        changeReference(active);\n      }\n    },\n    onLeft: function onLeft() {\n      setActive(addDays(active, -1));\n      if (!betweenDates(addDays(active, -1), displayBounds)) {\n        changeReference(active);\n      }\n    },\n    onRight: function onRight() {\n      setActive(addDays(active, 1));\n      if (!betweenDates(addDays(active, 2), displayBounds)) {\n        changeReference(active);\n      }\n    }\n  }, /*#__PURE__*/React.createElement(StyledWeeksContainer, {\n    tabIndex: 0,\n    role: \"grid\",\n    \"aria-label\": reference.toLocaleDateString(locale, {\n      month: 'long',\n      year: 'numeric'\n    }) + \"; \" + currentlySelectedString(value, locale),\n    ref: daysRef,\n    sizeProp: size,\n    fillContainer: fill,\n    focus: focus,\n    onFocus: function onFocus() {\n      setFocus(true);\n      // caller focused onto Calendar via keyboard\n      if (!mouseDown) {\n        setActive(new Date(firstDayInMonth));\n      }\n    },\n    onBlur: function onBlur() {\n      setFocus(false);\n      setActive(undefined);\n    }\n  }, /*#__PURE__*/React.createElement(StyledWeeks, {\n    slide: slide,\n    sizeProp: size,\n    fillContainer: fill\n  }, weeks)))));\n});\nCalendar.displayName = 'Calendar';\nCalendar.propTypes = CalendarPropTypes;\nexport { Calendar };","map":{"version":3,"names":["_excluded","_objectWithoutPropertiesLoose","source","excluded","target","sourceKeys","Object","keys","key","i","length","indexOf","_extends","assign","bind","arguments","prototype","hasOwnProperty","call","apply","React","forwardRef","useCallback","useContext","useEffect","useMemo","useRef","useState","ThemeContext","AnnounceContext","MessageContext","defaultProps","Box","Button","Heading","Keyboard","CalendarPropTypes","StyledCalendar","StyledDay","StyledDayContainer","StyledWeek","StyledWeeks","StyledWeeksContainer","addDays","addMonths","betweenDates","daysApart","endOfMonth","handleOffset","sameDayOrAfter","sameDayOrBefore","startOfMonth","subtractDays","subtractMonths","withinDates","setHoursWithOffset","headingPadMap","small","medium","large","getLocaleString","value","locale","toLocaleDateString","month","day","year","currentlySelectedString","selected","Date","map","item","dates","Array","isArray","start","undefined","end","normalizeInput","dateValue","result","d","normalizeOutput","outputFormat","normalize","normalizedValue","toISOString","_handleOffset$toISOSt","split","normalizeRange","activeDate","range","getReference","reference","nextReference","setHours","buildDisplayBounds","firstDayOfWeek","setDate","getDay","disabledCalendarPreviousMonthButton","date","bounds","lastBound","disabledCalendarNextMonthButton","firstBound","getOutputFormat","millisecondsPerYear","CalendarDayButton","props","createElement","tabIndex","plain","CalendarDay","_ref","children","fill","size","isInRange","isSelected","otherMonth","_ref$buttonProps","buttonProps","role","sizeProp","fillContainer","disabledProp","disabled","inRange","CalendarCustomDay","_ref2","Calendar","_ref3","ref","activeDateProp","_ref3$animate","animate","boundsProp","dateProp","datesProp","daysOfWeek","initialFocus","_ref3$firstDayOfWeek","header","_ref3$locale","messages","onReference","onSelect","referenceProp","_ref3$showAdjacentDay","showAdjacentDays","_ref3$size","timestampProp","timestamp","rest","theme","announce","_useContext","format","_useState","mouseDown","setMouseDown","onMouseDown","onMouseUp","document","addEventListener","removeEventListener","_useState2","setActiveDate","_useState3","setValue","val","_useState4","setReference","_useState5","setOutputFormat","_useState6","setBounds","_useState7","displayBounds","setDisplayBounds","_useState8","targetDisplayBounds","setTargetDisplayBounds","_useState9","slide","setSlide","_useState10","animating","setAnimating","nextDisplayBounds","getTime","diffBoundsAboveYear","direction","weeks","timer","setTimeout","clearTimeout","previousMonth","nextMonth","daysRef","_useState11","focus","setFocus","_useState12","active","setActive","current","handleReference","changeReference","changeCalendarMonth","messageId","newMonth","id","values","handleRange","selectedDate","_priorRange$","_priorRange$$","_priorRange$2","_priorRange$2$","priorRange","includes","find","selectDate","nextValue","_onClick","onClick","renderCalendarHeader","PreviousIcon","calendar","icons","previous","NextIcon","next","justify","align","flex","pad","horizontal","level","heading","margin","overflowWrap","a11yTitle","icon","renderDaysOfWeek","days","push","weekday","firstDayInMonth","blankWeek","_loop","getMonth","getDate","dateObject","selectedState","dayDisabled","toDateString","onMouseOver","onMouseOut","onPreviousMonth","onNextMonth","previousInBound","nextInBound","onEnter","onUp","event","preventDefault","stopPropagation","onDown","onLeft","onRight","onFocus","onBlur","displayName","propTypes"],"sources":["C:/Users/malch/OneDrive/Documents/Projects/chucode/node_modules/grommet/es6/components/Calendar/Calendar.js"],"sourcesContent":["var _excluded = [\"activeDate\", \"animate\", \"bounds\", \"children\", \"date\", \"dates\", \"daysOfWeek\", \"disabled\", \"initialFocus\", \"fill\", \"firstDayOfWeek\", \"header\", \"locale\", \"messages\", \"onReference\", \"onSelect\", \"range\", \"reference\", \"showAdjacentDays\", \"size\", \"timestamp\"];\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport React, { forwardRef, useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport { ThemeContext } from 'styled-components';\nimport { AnnounceContext } from '../../contexts/AnnounceContext';\nimport { MessageContext } from '../../contexts/MessageContext';\nimport { defaultProps } from '../../default-props';\nimport { Box } from '../Box';\nimport { Button } from '../Button';\nimport { Heading } from '../Heading';\nimport { Keyboard } from '../Keyboard';\nimport { CalendarPropTypes } from './propTypes';\nimport { StyledCalendar, StyledDay, StyledDayContainer, StyledWeek, StyledWeeks, StyledWeeksContainer } from './StyledCalendar';\nimport { addDays, addMonths, betweenDates, daysApart, endOfMonth, handleOffset, sameDayOrAfter, sameDayOrBefore, startOfMonth, subtractDays, subtractMonths, withinDates } from './utils';\nimport { setHoursWithOffset } from '../../utils/dates';\nvar headingPadMap = {\n  small: 'xsmall',\n  medium: 'small',\n  large: 'medium'\n};\nvar getLocaleString = function getLocaleString(value, locale) {\n  return value == null ? void 0 : value.toLocaleDateString(locale, {\n    month: 'long',\n    day: 'numeric',\n    year: 'numeric'\n  });\n};\nvar currentlySelectedString = function currentlySelectedString(value, locale) {\n  var selected;\n  if (value instanceof Date) {\n    selected = \"Currently selected \" + getLocaleString(value, locale) + \";\";\n  } else if (value != null && value.length) {\n    selected = \"Currently selected \" + value.map(function (item) {\n      var dates;\n      if (!Array.isArray(item)) {\n        dates = \"\" + getLocaleString(item, locale);\n      } else {\n        var start = item[0] !== undefined ? getLocaleString(item[0], locale) : 'none';\n        var end = item[1] !== undefined ? getLocaleString(item[1], locale) : 'none';\n        dates = start + \" through \" + end;\n      }\n      return dates;\n    });\n  } else {\n    selected = 'No date selected';\n  }\n  return selected;\n};\n\n// calendar value may be a single date, multiple dates, a range of dates\n// supplied as ISOstrings.\nvar normalizeInput = function normalizeInput(dateValue) {\n  var result;\n  if (dateValue instanceof Date) {\n    result = dateValue;\n  }\n  // date may be an empty string ''\n  else if (typeof dateValue === 'string' && dateValue.length) {\n    result = setHoursWithOffset(dateValue);\n  } else if (Array.isArray(dateValue)) {\n    result = dateValue.map(function (d) {\n      return normalizeInput(d);\n    });\n  }\n  return result;\n};\nvar normalizeOutput = function normalizeOutput(dateValue, outputFormat) {\n  var result;\n  var normalize = function normalize(value) {\n    var normalizedValue = value.toISOString();\n    if (normalizedValue && outputFormat === 'no timezone') {\n      var _handleOffset$toISOSt = handleOffset(normalizedValue).toISOString().split('T');\n      normalizedValue = _handleOffset$toISOSt[0];\n    }\n    return normalizedValue;\n  };\n  if (dateValue instanceof Date) {\n    result = normalize(dateValue);\n  } else if (typeof dateValue === 'undefined') {\n    result = undefined;\n  } else {\n    result = dateValue.map(function (d) {\n      return normalizeOutput(d, outputFormat);\n    });\n  }\n  return result;\n};\n\n// format value to [[]] for internal functions\nvar normalizeRange = function normalizeRange(value, activeDate) {\n  var range = value;\n  if (range instanceof Date) range = activeDate === 'start' ? [[undefined, range]] : [[range, undefined]];else if (Array.isArray(range) && !Array.isArray(range[0])) range = [range];\n  return range;\n};\nvar getReference = function getReference(reference, value) {\n  var nextReference;\n  if (value) {\n    if (Array.isArray(value)) {\n      if (value[0] instanceof Date) {\n        nextReference = value[0];\n      } else if (Array.isArray(value[0])) {\n        nextReference = value[0][0] ? value[0][0] : value[0][1];\n      } else {\n        nextReference = new Date();\n        nextReference.setHours(0, 0, 0, 0);\n      }\n    } else nextReference = value;\n  } else if (reference) {\n    nextReference = reference;\n  } else {\n    nextReference = new Date();\n    nextReference.setHours(0, 0, 0, 0);\n  }\n  return nextReference;\n};\nvar buildDisplayBounds = function buildDisplayBounds(reference, firstDayOfWeek) {\n  var start = new Date(reference);\n  start.setDate(1); // first of month\n\n  // In case Sunday is the first day of the month, and the user asked for Monday\n  // to be the first day of the week, then we need to include Sunday and six\n  // days prior.\n  start = start.getDay() === 0 && firstDayOfWeek === 1 ? start = subtractDays(start, 6) :\n  // beginning of week\n  start = subtractDays(start, start.getDay() - firstDayOfWeek);\n  var end = addDays(start, 7 * 5 + 7); // 5 weeks to end of week\n  return [start, end];\n};\nvar disabledCalendarPreviousMonthButton = function disabledCalendarPreviousMonthButton(date, reference, bounds) {\n  if (!bounds) return false;\n  var lastBound = new Date(bounds[1]);\n  return !sameDayOrBefore(lastBound, reference) && !betweenDates(date, bounds);\n};\nvar disabledCalendarNextMonthButton = function disabledCalendarNextMonthButton(date, reference, bounds) {\n  if (!bounds) return false;\n  var firstBound = new Date(bounds[0]);\n  return !sameDayOrAfter(firstBound, reference) && !betweenDates(date, bounds);\n};\nexport var getOutputFormat = function getOutputFormat(dates) {\n  if (typeof dates === 'string' && (dates == null ? void 0 : dates.indexOf('T')) === -1) {\n    return 'no timezone';\n  }\n  if (Array.isArray(dates)) {\n    return getOutputFormat(dates[0]);\n  }\n  return 'date timezone';\n};\nvar millisecondsPerYear = 31557600000;\nvar CalendarDayButton = function CalendarDayButton(props) {\n  return /*#__PURE__*/React.createElement(Button, _extends({\n    tabIndex: -1,\n    plain: true\n  }, props));\n};\nvar CalendarDay = function CalendarDay(_ref) {\n  var children = _ref.children,\n    fill = _ref.fill,\n    size = _ref.size,\n    isInRange = _ref.isInRange,\n    isSelected = _ref.isSelected,\n    otherMonth = _ref.otherMonth,\n    _ref$buttonProps = _ref.buttonProps,\n    buttonProps = _ref$buttonProps === void 0 ? {} : _ref$buttonProps;\n  return /*#__PURE__*/React.createElement(StyledDayContainer, {\n    role: \"gridcell\",\n    sizeProp: size,\n    fillContainer: fill\n  }, /*#__PURE__*/React.createElement(CalendarDayButton, _extends({\n    fill: fill\n  }, buttonProps), /*#__PURE__*/React.createElement(StyledDay, {\n    disabledProp: buttonProps.disabled,\n    inRange: isInRange,\n    otherMonth: otherMonth,\n    isSelected: isSelected,\n    sizeProp: size,\n    fillContainer: fill\n  }, children)));\n};\nvar CalendarCustomDay = function CalendarCustomDay(_ref2) {\n  var children = _ref2.children,\n    fill = _ref2.fill,\n    size = _ref2.size,\n    buttonProps = _ref2.buttonProps;\n  if (!buttonProps) {\n    return /*#__PURE__*/React.createElement(StyledDayContainer, {\n      role: \"gridcell\",\n      sizeProp: size,\n      fillContainer: fill\n    }, children);\n  }\n  return /*#__PURE__*/React.createElement(StyledDayContainer, {\n    role: \"gridcell\",\n    sizeProp: size,\n    fillContainer: fill\n  }, /*#__PURE__*/React.createElement(CalendarDayButton, _extends({\n    fill: fill\n  }, buttonProps), children));\n};\nvar Calendar = /*#__PURE__*/forwardRef(function (_ref3, ref) {\n  var activeDateProp = _ref3.activeDate,\n    _ref3$animate = _ref3.animate,\n    animate = _ref3$animate === void 0 ? true : _ref3$animate,\n    boundsProp = _ref3.bounds,\n    children = _ref3.children,\n    dateProp = _ref3.date,\n    datesProp = _ref3.dates,\n    daysOfWeek = _ref3.daysOfWeek,\n    disabled = _ref3.disabled,\n    initialFocus = _ref3.initialFocus,\n    fill = _ref3.fill,\n    _ref3$firstDayOfWeek = _ref3.firstDayOfWeek,\n    firstDayOfWeek = _ref3$firstDayOfWeek === void 0 ? 0 : _ref3$firstDayOfWeek,\n    header = _ref3.header,\n    _ref3$locale = _ref3.locale,\n    locale = _ref3$locale === void 0 ? 'en-US' : _ref3$locale,\n    messages = _ref3.messages,\n    onReference = _ref3.onReference,\n    onSelect = _ref3.onSelect,\n    range = _ref3.range,\n    referenceProp = _ref3.reference,\n    _ref3$showAdjacentDay = _ref3.showAdjacentDays,\n    showAdjacentDays = _ref3$showAdjacentDay === void 0 ? true : _ref3$showAdjacentDay,\n    _ref3$size = _ref3.size,\n    size = _ref3$size === void 0 ? 'medium' : _ref3$size,\n    timestampProp = _ref3.timestamp,\n    rest = _objectWithoutPropertiesLoose(_ref3, _excluded);\n  var theme = useContext(ThemeContext) || defaultProps.theme;\n  var announce = useContext(AnnounceContext);\n  var _useContext = useContext(MessageContext),\n    format = _useContext.format;\n\n  // when mousedown, we don't want to let Calendar set\n  // active date to firstInMonth\n  var _useState = useState(false),\n    mouseDown = _useState[0],\n    setMouseDown = _useState[1];\n  var onMouseDown = function onMouseDown() {\n    return setMouseDown(true);\n  };\n  var onMouseUp = function onMouseUp() {\n    return setMouseDown(false);\n  };\n  useEffect(function () {\n    document.addEventListener('mousedown', onMouseDown);\n    document.addEventListener('mouseup', onMouseUp);\n    return function () {\n      document.removeEventListener('mousedown', onMouseDown);\n      document.removeEventListener('mouseup', onMouseUp);\n    };\n  }, []);\n\n  // set activeDate when caller changes it, allows us to change\n  // it internally too\n  var _useState2 = useState(dateProp && typeof dateProp === 'string' && range ? 'end' : 'start'),\n    activeDate = _useState2[0],\n    setActiveDate = _useState2[1];\n  useEffect(function () {\n    if (activeDateProp) setActiveDate(activeDateProp);\n  }, [activeDateProp]);\n  var _useState3 = useState(normalizeInput(dateProp || datesProp)),\n    value = _useState3[0],\n    setValue = _useState3[1];\n  useEffect(function () {\n    var val = dateProp || datesProp;\n    setValue(normalizeInput(val));\n  }, [dateProp, datesProp]);\n  var _useState4 = useState(getReference(normalizeInput(referenceProp), value)),\n    reference = _useState4[0],\n    setReference = _useState4[1];\n  useEffect(function () {\n    if (value) {\n      setReference(getReference(normalizeInput(referenceProp), value));\n    }\n  }, [referenceProp, value]);\n  var _useState5 = useState(getOutputFormat(dateProp || datesProp)),\n    outputFormat = _useState5[0],\n    setOutputFormat = _useState5[1];\n  useEffect(function () {\n    setOutputFormat(getOutputFormat(dateProp || datesProp));\n  }, [dateProp, datesProp]);\n\n  // normalize bounds\n  var _useState6 = useState(boundsProp),\n    bounds = _useState6[0],\n    setBounds = _useState6[1];\n  useEffect(function () {\n    if (boundsProp) setBounds(boundsProp);else setBounds(undefined);\n  }, [boundsProp]);\n\n  // calculate the bounds we display based on the reference\n  var _useState7 = useState(buildDisplayBounds(reference, firstDayOfWeek)),\n    displayBounds = _useState7[0],\n    setDisplayBounds = _useState7[1];\n  var _useState8 = useState(),\n    targetDisplayBounds = _useState8[0],\n    setTargetDisplayBounds = _useState8[1];\n  var _useState9 = useState(),\n    slide = _useState9[0],\n    setSlide = _useState9[1];\n  var _useState10 = useState(),\n    animating = _useState10[0],\n    setAnimating = _useState10[1];\n\n  // When the reference changes, we need to update the displayBounds.\n  // This is easy when we aren't animating. If we are animating,\n  // we temporarily increase the displayBounds to be the union of the old\n  // and new ones and set slide to drive the animation. We keep track\n  // of where we are heading via targetDisplayBounds. When the animation\n  // finishes, we prune displayBounds down to where we are headed and\n  // clear the slide and targetDisplayBounds.\n  useEffect(function () {\n    var nextDisplayBounds = buildDisplayBounds(reference, firstDayOfWeek);\n\n    // Checks if the difference between the current and next DisplayBounds is\n    // greater than a year. If that's the case, calendar should update without\n    // animation.\n    if (nextDisplayBounds[0].getTime() !== displayBounds[0].getTime() && nextDisplayBounds[1].getTime() !== displayBounds[1].getTime()) {\n      var diffBoundsAboveYear = false;\n      if (nextDisplayBounds[0].getTime() < displayBounds[0].getTime()) {\n        if (displayBounds[0].getTime() - nextDisplayBounds[0].getTime() > millisecondsPerYear) {\n          diffBoundsAboveYear = true;\n        }\n      } else if (nextDisplayBounds[1].getTime() > displayBounds[1].getTime()) {\n        if (nextDisplayBounds[1].getTime() - displayBounds[1].getTime() > millisecondsPerYear) {\n          diffBoundsAboveYear = true;\n        }\n      }\n      if (!animate || diffBoundsAboveYear) {\n        setDisplayBounds(nextDisplayBounds);\n      } else {\n        setTargetDisplayBounds(nextDisplayBounds);\n      }\n    }\n  }, [animate, firstDayOfWeek, reference, displayBounds]);\n  useEffect(function () {\n    // if the reference timezone has changed (e.g., controlled component),\n    // both ends of the displayBounds should inherit that new timestamp\n    if (targetDisplayBounds) {\n      if (targetDisplayBounds[0].getTime() < displayBounds[0].getTime() || targetDisplayBounds[1].getTime() > displayBounds[1].getTime()) {\n        setDisplayBounds([targetDisplayBounds[0], targetDisplayBounds[1]]);\n      }\n      if (targetDisplayBounds[0].getTime() < displayBounds[0].getTime()) {\n        // only animate if the duration is within a year\n        if (displayBounds[0].getTime() - targetDisplayBounds[0].getTime() < millisecondsPerYear && daysApart(displayBounds[0], targetDisplayBounds[0])) {\n          setSlide({\n            direction: 'down',\n            weeks: daysApart(displayBounds[0], targetDisplayBounds[0]) / 7\n          });\n          setAnimating(true);\n        }\n      } else if (targetDisplayBounds[1].getTime() > displayBounds[1].getTime()) {\n        if (targetDisplayBounds[1].getTime() - displayBounds[1].getTime() < millisecondsPerYear && daysApart(targetDisplayBounds[1], displayBounds[1])) {\n          setSlide({\n            direction: 'up',\n            weeks: daysApart(targetDisplayBounds[1], displayBounds[1]) / 7\n          });\n          setAnimating(true);\n        }\n      }\n      return undefined;\n    }\n    setSlide(undefined);\n    return undefined;\n  }, [animating, displayBounds, targetDisplayBounds]);\n\n  // Last step in updating the displayBounds. Allows for pruning\n  // displayBounds and cleaning up states to occur after animation.\n  useEffect(function () {\n    if (animating && targetDisplayBounds) {\n      // Wait for animation to finish before cleaning up.\n      var timer = setTimeout(function () {\n        setDisplayBounds(targetDisplayBounds);\n        setTargetDisplayBounds(undefined);\n        setSlide(undefined);\n        setAnimating(false);\n      }, 400 // Empirically determined.\n      );\n\n      return function () {\n        return clearTimeout(timer);\n      };\n    }\n    return undefined;\n  }, [animating, targetDisplayBounds]);\n\n  // We have to deal with reference being the end of a month with more\n  // days than the month we are changing to. So, we always set reference\n  // to the first of the month before changing the month.\n  var previousMonth = useMemo(function () {\n    return endOfMonth(subtractMonths(startOfMonth(reference), 1));\n  }, [reference]);\n  var nextMonth = useMemo(function () {\n    return startOfMonth(addMonths(startOfMonth(reference), 1));\n  }, [reference]);\n  var daysRef = useRef();\n  var _useState11 = useState(),\n    focus = _useState11[0],\n    setFocus = _useState11[1];\n  var _useState12 = useState(),\n    active = _useState12[0],\n    setActive = _useState12[1];\n  useEffect(function () {\n    if (initialFocus === 'days') daysRef.current.focus();\n  }, [initialFocus]);\n  var handleReference = useCallback(function (nextReference) {\n    setReference(nextReference);\n    if (onReference) onReference(nextReference.toISOString());\n  }, [onReference]);\n  var changeReference = useCallback(function (nextReference) {\n    if (betweenDates(nextReference, bounds)) handleReference(nextReference);\n  }, [handleReference, bounds]);\n  var changeCalendarMonth = function changeCalendarMonth(messageId, newMonth) {\n    handleReference(newMonth);\n    announce(format({\n      id: messageId,\n      messages: messages,\n      values: {\n        date: newMonth.toLocaleDateString(locale, {\n          month: 'long',\n          year: 'numeric'\n        })\n      }\n    }));\n  };\n  var handleRange = useCallback(function (selectedDate) {\n    var _priorRange$, _priorRange$$, _priorRange$2, _priorRange$2$;\n    var result;\n    var priorRange = normalizeRange(value, activeDate);\n    // deselect when date clicked was the start/end of the range\n    if (selectedDate.getTime() === (priorRange == null ? void 0 : (_priorRange$ = priorRange[0]) == null ? void 0 : (_priorRange$$ = _priorRange$[0]) == null ? void 0 : _priorRange$$.getTime())) {\n      result = [[undefined, priorRange[0][1]]];\n      setActiveDate('start');\n    } else if (selectedDate.getTime() === (priorRange == null ? void 0 : (_priorRange$2 = priorRange[0]) == null ? void 0 : (_priorRange$2$ = _priorRange$2[1]) == null ? void 0 : _priorRange$2$.getTime())) {\n      result = [[priorRange[0][0], undefined]];\n      setActiveDate('end');\n    }\n    // selecting start date\n    else if (activeDate === 'start') {\n      if (!priorRange) {\n        result = [[selectedDate, undefined]];\n      } else if (!priorRange[0][1]) {\n        result = [[selectedDate, priorRange[0][1]]];\n      } else if (selectedDate.getTime() < priorRange[0][1].getTime()) {\n        result = [[selectedDate, priorRange[0][1]]];\n      } else if (selectedDate.getTime() > priorRange[0][1].getTime()) {\n        result = [[selectedDate, undefined]];\n      }\n      setActiveDate('end');\n    }\n    // selecting end date\n    else if (!priorRange) {\n      result = [[undefined, selectedDate]];\n      setActiveDate('start');\n    } else if (selectedDate.getTime() < priorRange[0][0].getTime()) {\n      result = [[selectedDate, undefined]];\n      setActiveDate('end');\n    } else if (selectedDate.getTime() > priorRange[0][0].getTime()) {\n      result = [[priorRange[0][0], selectedDate]];\n      setActiveDate('start');\n    }\n\n    // If no dates selected, always return undefined; else format\n    // result according to specified range value.\n    if (result[0].includes(undefined)) {\n      if (range === 'array') {\n        result = !result[0][0] && !result[0][1] ? undefined : result;\n      } else {\n        result = result[0].find(function (d) {\n          return d !== undefined;\n        });\n      }\n    }\n    setValue(result);\n    return result;\n  }, [activeDate, value, range]);\n  var selectDate = useCallback(function (selectedDate) {\n    var nextValue;\n    if (range || Array.isArray(value == null ? void 0 : value[0])) {\n      nextValue = handleRange(selectedDate);\n    } else {\n      nextValue = selectedDate;\n    }\n    if (onSelect) {\n      nextValue = normalizeOutput(nextValue, outputFormat);\n      onSelect(nextValue);\n    }\n  }, [handleRange, onSelect, outputFormat, range, value]);\n  var _onClick = function onClick(selectedDate) {\n    selectDate(selectedDate);\n    announce(\"Selected \" + getLocaleString(selectedDate, locale), 'assertive');\n    // Chrome moves the focus indicator to this button. Set\n    // the focus to the grid of days instead.\n    daysRef.current.focus();\n    setActive(selectedDate);\n  };\n  var renderCalendarHeader = function renderCalendarHeader() {\n    var PreviousIcon = size === 'small' ? theme.calendar.icons.small.previous : theme.calendar.icons.previous;\n    var NextIcon = size === 'small' ? theme.calendar.icons.small.next : theme.calendar.icons.next;\n    return /*#__PURE__*/React.createElement(Box, {\n      direction: \"row\",\n      justify: \"between\",\n      align: \"center\"\n    }, /*#__PURE__*/React.createElement(Box, {\n      flex: true,\n      pad: {\n        horizontal: headingPadMap[size] || 'small'\n      }\n    }, /*#__PURE__*/React.createElement(Heading, {\n      level: size === 'small' ? theme.calendar.heading && theme.calendar.heading.level || 4 : (theme.calendar.heading && theme.calendar.heading.level || 4) - 1,\n      size: size,\n      margin: \"none\",\n      overflowWrap: \"normal\"\n    }, reference.toLocaleDateString(locale, {\n      month: 'long',\n      year: 'numeric'\n    }))), /*#__PURE__*/React.createElement(Box, {\n      flex: false,\n      direction: \"row\",\n      align: \"center\"\n    }, /*#__PURE__*/React.createElement(Button, {\n      a11yTitle: format({\n        id: 'calendar.previous',\n        messages: messages,\n        values: {\n          date: previousMonth.toLocaleDateString(locale, {\n            month: 'long',\n            year: 'numeric'\n          })\n        }\n      }),\n      icon: /*#__PURE__*/React.createElement(PreviousIcon, {\n        size: size !== 'small' ? size : undefined\n      }),\n      disabled: disabledCalendarPreviousMonthButton(previousMonth, reference, bounds),\n      onClick: function onClick() {\n        return changeCalendarMonth('calendar.previousMove', previousMonth);\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      a11yTitle: format({\n        id: 'calendar.next',\n        messages: messages,\n        values: {\n          date: nextMonth.toLocaleDateString(locale, {\n            month: 'long',\n            year: 'numeric'\n          })\n        }\n      }),\n      icon: /*#__PURE__*/React.createElement(NextIcon, {\n        size: size !== 'small' ? size : undefined\n      }),\n      disabled: disabledCalendarNextMonthButton(nextMonth, reference, bounds),\n      onClick: function onClick() {\n        return changeCalendarMonth('calendar.nextMove', nextMonth);\n      }\n    })));\n  };\n  var renderDaysOfWeek = function renderDaysOfWeek() {\n    var day = new Date(displayBounds[0]);\n    var days = [];\n    while (days.length < 7) {\n      days.push( /*#__PURE__*/React.createElement(StyledDayContainer, {\n        role: \"gridcell\",\n        key: days.length,\n        sizeProp: size,\n        fillContainer: fill\n      }, /*#__PURE__*/React.createElement(StyledDay, {\n        otherMonth: true,\n        sizeProp: size,\n        fillContainer: fill\n      }, day.toLocaleDateString(locale, {\n        weekday: 'narrow'\n      }))));\n      day = addDays(day, 1);\n    }\n    return /*#__PURE__*/React.createElement(StyledWeek, {\n      role: \"row\"\n    }, days);\n  };\n  var weeks = [];\n  var day = new Date(displayBounds[0]);\n  var days;\n  var firstDayInMonth;\n  var blankWeek = false;\n  var _loop = function _loop() {\n    if (day.getDay() === firstDayOfWeek) {\n      if (days) {\n        weeks.push( /*#__PURE__*/React.createElement(StyledWeek, {\n          role: \"row\",\n          key: day.getTime(),\n          fillContainer: fill\n        }, days));\n      }\n      days = [];\n    }\n    var otherMonth = day.getMonth() !== reference.getMonth();\n    if (!showAdjacentDays && otherMonth) {\n      days.push( /*#__PURE__*/React.createElement(StyledDayContainer, {\n        key: day.getTime(),\n        sizeProp: size,\n        fillContainer: fill\n      }, /*#__PURE__*/React.createElement(StyledDay, {\n        sizeProp: size,\n        fillContainer: fill\n      })));\n      if (weeks.length === 5 &&\n      /* If the length days array is less than the current getDate()\n      we know that all days in the array are from the next month. */\n      days.length < day.getDate()) {\n        blankWeek = true;\n      }\n    } else if (\n    /* Do not show adjacent days in 6th row if all days\n    fall in the next month */\n    showAdjacentDays === 'trim' && otherMonth && weeks.length === 5 &&\n    /* If the length days array is less than the current getDate()\n    we know that all days in the array are from the next month. */\n    days.length < day.getDate()) {\n      blankWeek = true;\n      days.push( /*#__PURE__*/React.createElement(StyledDayContainer, {\n        key: day.getTime(),\n        sizeProp: size,\n        fillContainer: fill\n      }, /*#__PURE__*/React.createElement(StyledDay, {\n        sizeProp: size,\n        fillContainer: fill\n      })));\n    } else {\n      var dateObject = day;\n      // this.dayRefs[dateObject] = React.createRef();\n      var selected = false;\n      var inRange = false;\n      var selectedState = withinDates(day, range ? normalizeRange(value, activeDate) : value);\n      if (selectedState === 2) {\n        selected = true;\n      } else if (selectedState === 1) {\n        inRange = true;\n      }\n      var dayDisabled = withinDates(day, normalizeInput(disabled)) || bounds && !betweenDates(day, normalizeInput(bounds));\n      if (!firstDayInMonth && !dayDisabled && day.getMonth() === reference.getMonth()) {\n        firstDayInMonth = dateObject;\n      }\n      if (!children) {\n        days.push( /*#__PURE__*/React.createElement(CalendarDay, {\n          key: day.getTime(),\n          buttonProps: {\n            a11yTitle: day.toDateString(),\n            active: active && active.getTime() === day.getTime(),\n            disabled: dayDisabled && !!dayDisabled,\n            onClick: function onClick() {\n              return _onClick(dateObject);\n            },\n            onMouseOver: function onMouseOver() {\n              return setActive(dateObject);\n            },\n            onMouseOut: function onMouseOut() {\n              return setActive(undefined);\n            }\n          },\n          isInRange: inRange,\n          isSelected: selected,\n          otherMonth: day.getMonth() !== reference.getMonth(),\n          size: size,\n          fill: fill\n        }, day.getDate()));\n      } else {\n        days.push( /*#__PURE__*/React.createElement(CalendarCustomDay, {\n          key: day.getTime(),\n          buttonProps: onSelect ? {\n            a11yTitle: day.toDateString(),\n            active: active && active.getTime() === day.getTime(),\n            disabled: dayDisabled && !!dayDisabled,\n            onClick: function onClick() {\n              return _onClick(dateObject);\n            },\n            onMouseOver: function onMouseOver() {\n              return setActive(dateObject);\n            },\n            onMouseOut: function onMouseOut() {\n              return setActive(undefined);\n            }\n          } : null,\n          size: size,\n          fill: fill\n        }, children({\n          date: day,\n          day: day.getDate(),\n          isInRange: inRange,\n          isSelected: selected\n        })));\n      }\n    }\n    day = addDays(day, 1);\n  };\n  while (day.getTime() < displayBounds[1].getTime()) {\n    _loop();\n  }\n  weeks.push( /*#__PURE__*/React.createElement(StyledWeek\n  // if a week contains only blank days, for screen reader accessibility\n  // we don't want to set role=\"row\"\n  , {\n    role: !blankWeek ? 'row' : undefined,\n    key: day.getTime(),\n    fillContainer: fill\n  }, days));\n  return /*#__PURE__*/React.createElement(StyledCalendar, _extends({\n    ref: ref,\n    sizeProp: size,\n    fillContainer: fill\n  }, rest), /*#__PURE__*/React.createElement(Box, {\n    fill: fill\n  }, header ? header({\n    date: reference,\n    locale: locale,\n    onPreviousMonth: function onPreviousMonth() {\n      changeReference(previousMonth);\n      announce(format({\n        id: 'calendar.previous',\n        messages: messages,\n        values: {\n          date: previousMonth.toLocaleDateString(locale, {\n            month: 'long',\n            year: 'numeric'\n          })\n        }\n      }));\n    },\n    onNextMonth: function onNextMonth() {\n      changeReference(nextMonth);\n      announce(format({\n        id: 'calendar.next',\n        messages: messages,\n        values: {\n          date: nextMonth.toLocaleDateString(locale, {\n            month: 'long',\n            year: 'numeric'\n          })\n        }\n      }));\n    },\n    previousInBound: betweenDates(previousMonth, bounds),\n    nextInBound: betweenDates(nextMonth, bounds)\n  }) : renderCalendarHeader(previousMonth, nextMonth), daysOfWeek && renderDaysOfWeek(), /*#__PURE__*/React.createElement(Keyboard, {\n    onEnter: function onEnter() {\n      return active !== undefined ? _onClick(active) : undefined;\n    },\n    onUp: function onUp(event) {\n      event.preventDefault();\n      event.stopPropagation(); // so the page doesn't scroll\n      setActive(addDays(active, -7));\n      if (!betweenDates(addDays(active, -7), displayBounds)) {\n        changeReference(addDays(active, -7));\n      }\n    },\n    onDown: function onDown(event) {\n      event.preventDefault();\n      event.stopPropagation(); // so the page doesn't scroll\n      setActive(addDays(active, 7));\n      if (!betweenDates(addDays(active, 7), displayBounds)) {\n        changeReference(active);\n      }\n    },\n    onLeft: function onLeft() {\n      setActive(addDays(active, -1));\n      if (!betweenDates(addDays(active, -1), displayBounds)) {\n        changeReference(active);\n      }\n    },\n    onRight: function onRight() {\n      setActive(addDays(active, 1));\n      if (!betweenDates(addDays(active, 2), displayBounds)) {\n        changeReference(active);\n      }\n    }\n  }, /*#__PURE__*/React.createElement(StyledWeeksContainer, {\n    tabIndex: 0,\n    role: \"grid\",\n    \"aria-label\": reference.toLocaleDateString(locale, {\n      month: 'long',\n      year: 'numeric'\n    }) + \"; \" + currentlySelectedString(value, locale),\n    ref: daysRef,\n    sizeProp: size,\n    fillContainer: fill,\n    focus: focus,\n    onFocus: function onFocus() {\n      setFocus(true);\n      // caller focused onto Calendar via keyboard\n      if (!mouseDown) {\n        setActive(new Date(firstDayInMonth));\n      }\n    },\n    onBlur: function onBlur() {\n      setFocus(false);\n      setActive(undefined);\n    }\n  }, /*#__PURE__*/React.createElement(StyledWeeks, {\n    slide: slide,\n    sizeProp: size,\n    fillContainer: fill\n  }, weeks)))));\n});\nCalendar.displayName = 'Calendar';\nCalendar.propTypes = CalendarPropTypes;\nexport { Calendar };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}