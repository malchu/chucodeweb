{"ast":null,"code":"import React, { forwardRef, useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport styled, { ThemeContext } from 'styled-components';\nimport { useLayoutEffect } from '../../utils/use-isomorphic-layout-effect';\nimport { defaultProps } from '../../default-props';\nimport { useForwardedRef } from '../../utils';\nimport { Box } from '../Box';\nimport { CollapsiblePropTypes } from './propTypes';\nvar AnimatedBox = styled(Box).withConfig({\n  displayName: \"Collapsible__AnimatedBox\",\n  componentId: \"sc-15kniua-0\"\n})([\"\", \"\"], function (props) {\n  return props.shouldOpen ? \"visibility: hidden;\\n      position: absolute;\\n      pointer-events: none;\" :\n  // eslint-disable-next-line max-len\n  \"transition: \" + (\"max-\" + props.dimension + \" \" + props.speedProp + \"ms, opacity \" + props.speedProp + \"ms\") + \";\\n      opacity: \" + (props.open ? 1 : 0) + \";\\n      overflow: \" + (props.animate || !props.open ? 'hidden' : 'visible') + \";\";\n});\nvar Collapsible = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var children = _ref.children,\n    direction = _ref.direction,\n    openArg = _ref.open;\n  var theme = useContext(ThemeContext) || defaultProps.theme;\n  var _useState = useState(openArg),\n    open = _useState[0],\n    setOpen = _useState[1];\n  var _useState2 = useState(false),\n    animate = _useState2[0],\n    setAnimate = _useState2[1];\n  var _useState3 = useState(theme.collapsible.minSpeed),\n    speed = _useState3[0],\n    setSpeed = _useState3[1];\n  var dimension = useMemo(function () {\n    return direction === 'horizontal' ? 'width' : 'height';\n  }, [direction]);\n  var containerRef = useForwardedRef(ref);\n  var sizeRef = useRef(0);\n  var shouldOpen = !open && openArg;\n  var shouldClose = open && !openArg;\n\n  // when the caller changes openArg, trigger animation\n  useEffect(function () {\n    if (openArg !== open) {\n      setAnimate(true);\n      setOpen(openArg);\n    }\n  }, [open, openArg]);\n\n  // prepare to open or close\n  useLayoutEffect(function () {\n    var container = containerRef.current;\n\n    // skip this if animation is in progress\n    if (!animate && shouldOpen) {\n      var parentPrevPosition = container.parentNode.style.position;\n      container.parentNode.style.position = 'relative';\n      var _container$getBoundin = container.getBoundingClientRect(),\n        size = _container$getBoundin[dimension];\n      container.parentNode.style.position = parentPrevPosition;\n      sizeRef.current = size;\n    }\n    if (shouldOpen) {\n      container.style[\"max-\" + dimension] = 0;\n    } else if (shouldClose) {\n      var _container$getBoundin2 = container.getBoundingClientRect(),\n        _size = _container$getBoundin2[dimension];\n      container.style[\"max-\" + dimension] = _size + \"px\";\n    }\n  }, [shouldOpen, shouldClose, containerRef, dimension, animate]);\n  useEffect(function () {\n    if (shouldOpen || shouldClose) {\n      var container = containerRef.current;\n      var _theme$collapsible = theme.collapsible,\n        minSpeed = _theme$collapsible.minSpeed,\n        baseline = _theme$collapsible.baseline;\n      var nextSpeed = Math.max(sizeRef.current / baseline * minSpeed, minSpeed);\n      setSpeed(nextSpeed);\n      requestAnimationFrame(function () {\n        requestAnimationFrame(function () {\n          // Change the max to where we want to end up, the transition will\n          // animate to get there. We do this in an animation frame to\n          // give our starter setting a chance to fully render.\n          container.style[\"max-\" + dimension] = shouldOpen ? sizeRef.current + \"px\" : 0;\n        });\n      });\n    }\n  }, [shouldOpen, shouldClose, containerRef, dimension, theme]);\n  useEffect(function () {\n    if (animate) {\n      var container = containerRef.current;\n      var timer = setTimeout(function () {\n        setAnimate(false);\n        container.removeAttribute('style');\n      }, speed);\n      return function () {\n        return clearTimeout(timer);\n      };\n    }\n    return undefined;\n    // we need open here to cancel the timer and restart it\n  }, [animate, containerRef, speed, open]);\n  return /*#__PURE__*/React.createElement(AnimatedBox, {\n    \"aria-hidden\": !open,\n    ref: containerRef,\n    open: open,\n    animate: animate,\n    dimension: dimension,\n    speedProp: speed\n    // an intermediate state that will render invisible element\n    // we need to do this because we can't use scrollHeight/scrollWidth\n    // to get size while overflow is hidden.\n    // skipped if animation is in progress\n    ,\n\n    shouldOpen: !animate && shouldOpen\n  }, shouldOpen || open || animate ? children : null);\n});\nCollapsible.displayName = 'Collapsible';\nCollapsible.propTypes = CollapsiblePropTypes;\nexport { Collapsible };","map":{"version":3,"names":["React","forwardRef","useContext","useEffect","useMemo","useRef","useState","styled","ThemeContext","useLayoutEffect","defaultProps","useForwardedRef","Box","CollapsiblePropTypes","AnimatedBox","withConfig","displayName","componentId","props","shouldOpen","dimension","speedProp","open","animate","Collapsible","_ref","ref","children","direction","openArg","theme","_useState","setOpen","_useState2","setAnimate","_useState3","collapsible","minSpeed","speed","setSpeed","containerRef","sizeRef","shouldClose","container","current","parentPrevPosition","parentNode","style","position","_container$getBoundin","getBoundingClientRect","size","_container$getBoundin2","_size","_theme$collapsible","baseline","nextSpeed","Math","max","requestAnimationFrame","timer","setTimeout","removeAttribute","clearTimeout","undefined","createElement","propTypes"],"sources":["C:/Users/malch/OneDrive/Documents/Projects/chucode/node_modules/grommet/es6/components/Collapsible/Collapsible.js"],"sourcesContent":["import React, { forwardRef, useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport styled, { ThemeContext } from 'styled-components';\nimport { useLayoutEffect } from '../../utils/use-isomorphic-layout-effect';\nimport { defaultProps } from '../../default-props';\nimport { useForwardedRef } from '../../utils';\nimport { Box } from '../Box';\nimport { CollapsiblePropTypes } from './propTypes';\nvar AnimatedBox = styled(Box).withConfig({\n  displayName: \"Collapsible__AnimatedBox\",\n  componentId: \"sc-15kniua-0\"\n})([\"\", \"\"], function (props) {\n  return props.shouldOpen ? \"visibility: hidden;\\n      position: absolute;\\n      pointer-events: none;\" : // eslint-disable-next-line max-len\n  \"transition: \" + (\"max-\" + props.dimension + \" \" + props.speedProp + \"ms, opacity \" + props.speedProp + \"ms\") + \";\\n      opacity: \" + (props.open ? 1 : 0) + \";\\n      overflow: \" + (props.animate || !props.open ? 'hidden' : 'visible') + \";\";\n});\nvar Collapsible = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var children = _ref.children,\n    direction = _ref.direction,\n    openArg = _ref.open;\n  var theme = useContext(ThemeContext) || defaultProps.theme;\n  var _useState = useState(openArg),\n    open = _useState[0],\n    setOpen = _useState[1];\n  var _useState2 = useState(false),\n    animate = _useState2[0],\n    setAnimate = _useState2[1];\n  var _useState3 = useState(theme.collapsible.minSpeed),\n    speed = _useState3[0],\n    setSpeed = _useState3[1];\n  var dimension = useMemo(function () {\n    return direction === 'horizontal' ? 'width' : 'height';\n  }, [direction]);\n  var containerRef = useForwardedRef(ref);\n  var sizeRef = useRef(0);\n  var shouldOpen = !open && openArg;\n  var shouldClose = open && !openArg;\n\n  // when the caller changes openArg, trigger animation\n  useEffect(function () {\n    if (openArg !== open) {\n      setAnimate(true);\n      setOpen(openArg);\n    }\n  }, [open, openArg]);\n\n  // prepare to open or close\n  useLayoutEffect(function () {\n    var container = containerRef.current;\n\n    // skip this if animation is in progress\n    if (!animate && shouldOpen) {\n      var parentPrevPosition = container.parentNode.style.position;\n      container.parentNode.style.position = 'relative';\n      var _container$getBoundin = container.getBoundingClientRect(),\n        size = _container$getBoundin[dimension];\n      container.parentNode.style.position = parentPrevPosition;\n      sizeRef.current = size;\n    }\n    if (shouldOpen) {\n      container.style[\"max-\" + dimension] = 0;\n    } else if (shouldClose) {\n      var _container$getBoundin2 = container.getBoundingClientRect(),\n        _size = _container$getBoundin2[dimension];\n      container.style[\"max-\" + dimension] = _size + \"px\";\n    }\n  }, [shouldOpen, shouldClose, containerRef, dimension, animate]);\n  useEffect(function () {\n    if (shouldOpen || shouldClose) {\n      var container = containerRef.current;\n      var _theme$collapsible = theme.collapsible,\n        minSpeed = _theme$collapsible.minSpeed,\n        baseline = _theme$collapsible.baseline;\n      var nextSpeed = Math.max(sizeRef.current / baseline * minSpeed, minSpeed);\n      setSpeed(nextSpeed);\n      requestAnimationFrame(function () {\n        requestAnimationFrame(function () {\n          // Change the max to where we want to end up, the transition will\n          // animate to get there. We do this in an animation frame to\n          // give our starter setting a chance to fully render.\n          container.style[\"max-\" + dimension] = shouldOpen ? sizeRef.current + \"px\" : 0;\n        });\n      });\n    }\n  }, [shouldOpen, shouldClose, containerRef, dimension, theme]);\n  useEffect(function () {\n    if (animate) {\n      var container = containerRef.current;\n      var timer = setTimeout(function () {\n        setAnimate(false);\n        container.removeAttribute('style');\n      }, speed);\n      return function () {\n        return clearTimeout(timer);\n      };\n    }\n    return undefined;\n    // we need open here to cancel the timer and restart it\n  }, [animate, containerRef, speed, open]);\n  return /*#__PURE__*/React.createElement(AnimatedBox, {\n    \"aria-hidden\": !open,\n    ref: containerRef,\n    open: open,\n    animate: animate,\n    dimension: dimension,\n    speedProp: speed\n    // an intermediate state that will render invisible element\n    // we need to do this because we can't use scrollHeight/scrollWidth\n    // to get size while overflow is hidden.\n    // skipped if animation is in progress\n    ,\n    shouldOpen: !animate && shouldOpen\n  }, shouldOpen || open || animate ? children : null);\n});\nCollapsible.displayName = 'Collapsible';\nCollapsible.propTypes = CollapsiblePropTypes;\nexport { Collapsible };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}