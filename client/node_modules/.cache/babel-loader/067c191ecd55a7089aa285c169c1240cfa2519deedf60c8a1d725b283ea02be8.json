{"ast":null,"code":"var _excluded = [\"clear\", \"onClear\", \"name\", \"theme\"];\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\nimport React, { forwardRef, useCallback, useContext, useEffect, useRef, useState } from 'react';\nimport styled, { ThemeContext } from 'styled-components';\nimport { setFocusWithoutScroll, getHoverIndicatorStyle, containsFocus } from '../../utils';\nimport { defaultProps } from '../../default-props';\nimport { Box } from '../Box';\nimport { Button } from '../Button';\nimport { InfiniteScroll } from '../InfiniteScroll';\nimport { Keyboard } from '../Keyboard';\nimport { Text } from '../Text';\nimport { TextInput } from '../TextInput';\nimport { StyledContainer, OptionsContainer, SelectOption } from './StyledSelect';\nimport { applyKey, useDisabled, getOptionLabel, getOptionValue } from './utils';\nimport { EmptySearchOption } from './EmptySearchOption';\n\n// ensure ClearButton receives visual indication of keyboard\nvar StyledButton = styled(Button).withConfig({\n  displayName: \"SelectContainer__StyledButton\",\n  componentId: \"sc-1wi0ul8-0\"\n})([\"&:focus{\", \"}\"], function (props) {\n  return getHoverIndicatorStyle('background', props.theme);\n});\nvar ClearButton = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var clear = _ref.clear,\n    onClear = _ref.onClear,\n    name = _ref.name,\n    theme = _ref.theme,\n    rest = _objectWithoutPropertiesLoose(_ref, _excluded);\n  var label = clear.label,\n    position = clear.position;\n  var align = position !== 'bottom' ? 'start' : 'center';\n  var buttonLabel = label || \"Clear \" + (name || 'selection');\n  return /*#__PURE__*/React.createElement(StyledButton, _extends({\n    a11yTitle: buttonLabel + \". Or, press \" + (position === 'bottom' ? 'shift tab' : 'down arrow') + \" to move to select options\",\n    fill: \"horizontal\",\n    ref: ref,\n    onClick: onClear,\n    focusIndicator: false\n  }, rest), /*#__PURE__*/React.createElement(Box, _extends({}, theme.select.clear.container, {\n    align: align\n  }), /*#__PURE__*/React.createElement(Text, theme.select.clear.text, buttonLabel)));\n});\nvar SelectContainer = /*#__PURE__*/forwardRef(function (_ref2, ref) {\n  var clear = _ref2.clear,\n    _ref2$children = _ref2.children,\n    children = _ref2$children === void 0 ? null : _ref2$children,\n    disabled = _ref2.disabled,\n    disabledKey = _ref2.disabledKey,\n    dropHeight = _ref2.dropHeight,\n    _ref2$emptySearchMess = _ref2.emptySearchMessage,\n    emptySearchMessage = _ref2$emptySearchMess === void 0 ? 'No matches found' : _ref2$emptySearchMess,\n    id = _ref2.id,\n    labelKey = _ref2.labelKey,\n    multiple = _ref2.multiple,\n    name = _ref2.name,\n    onChange = _ref2.onChange,\n    onKeyDown = _ref2.onKeyDown,\n    onMore = _ref2.onMore,\n    onSearch = _ref2.onSearch,\n    optionIndexesInValue = _ref2.optionIndexesInValue,\n    options = _ref2.options,\n    allOptions = _ref2.allOptions,\n    searchPlaceholder = _ref2.searchPlaceholder,\n    search = _ref2.search,\n    setSearch = _ref2.setSearch,\n    selected = _ref2.selected,\n    usingKeyboard = _ref2.usingKeyboard,\n    _ref2$value = _ref2.value,\n    value = _ref2$value === void 0 ? '' : _ref2$value,\n    valueKey = _ref2.valueKey,\n    _ref2$replace = _ref2.replace,\n    replace = _ref2$replace === void 0 ? true : _ref2$replace;\n  var theme = useContext(ThemeContext) || defaultProps.theme;\n  var shouldShowClearButton = useCallback(function (position) {\n    var hasValue = Boolean(multiple && value ? value.length : value);\n    var showAtPosition = position === 'bottom' ? (clear == null ? void 0 : clear.position) === 'bottom' : (clear == null ? void 0 : clear.position) !== 'bottom';\n    return clear && hasValue && showAtPosition;\n  }, [clear, multiple, value]);\n  var isDisabled = useDisabled(disabled, disabledKey, options, valueKey || labelKey);\n  var _useState = useState(usingKeyboard && !shouldShowClearButton('top') ? 0 : -1),\n    activeIndex = _useState[0],\n    setActiveIndex = _useState[1];\n  var _useState2 = useState(usingKeyboard),\n    keyboardNavigation = _useState2[0],\n    setKeyboardNavigation = _useState2[1];\n  var searchRef = useRef();\n  var optionsRef = useRef();\n  var clearRef = useRef();\n  var activeRef = useRef();\n\n  // for keyboard/screenreader, keep the active option in focus\n  useEffect(function () {\n    var _activeRef$current;\n    if (activeIndex >= 0) (_activeRef$current = activeRef.current) == null ? void 0 : _activeRef$current.focus();\n  }, [activeIndex]);\n\n  // set initial focus\n  useEffect(function () {\n    // need to wait for Drop to be ready\n    var timer = setTimeout(function () {\n      var optionsNode = optionsRef.current;\n      var clearButton = clearRef.current;\n      if (onSearch) {\n        var searchInput = searchRef.current;\n        if (searchInput && searchInput.focus) {\n          setFocusWithoutScroll(searchInput);\n        }\n      } else if (clear && clearButton && clearButton.focus && clear.position !== 'bottom') {\n        setFocusWithoutScroll(clearButton);\n      } else if (usingKeyboard && activeRef.current) {\n        setFocusWithoutScroll(activeRef.current);\n      } else if (optionsNode) {\n        setFocusWithoutScroll(optionsNode);\n      }\n    }, 100);\n    return function () {\n      return clearTimeout(timer);\n    };\n  }, [onSearch, usingKeyboard, clear]);\n  var isSelected = useCallback(function (index) {\n    var result;\n    if (selected) {\n      // deprecated in favor of value\n      result = selected.indexOf(index) !== -1;\n    } else {\n      var optionVal = getOptionValue(index, options, valueKey);\n      if (Array.isArray(value)) {\n        if (value.length === 0) {\n          result = false;\n        } else if (typeof value[0] !== 'object') {\n          result = value.indexOf(optionVal) !== -1;\n        } else if (valueKey) {\n          result = value.some(function (valueItem) {\n            var valueValue = typeof valueKey === 'function' ? valueKey(valueItem) : valueItem[valueKey] || valueItem[valueKey.key];\n            return valueValue === optionVal;\n          });\n        }\n      } else if (valueKey && value !== null && typeof value === 'object') {\n        var valueValue = typeof valueKey === 'function' ? valueKey(value) : value[valueKey];\n        result = valueValue === optionVal;\n      } else {\n        result = value === optionVal;\n      }\n    }\n    return result;\n  }, [selected, value, valueKey, options]);\n  var selectOption = useCallback(function (index) {\n    return function (event) {\n      if (onChange) {\n        var nextValue;\n        var nextSelected;\n        if (multiple) {\n          var nextOptionIndexesInValue = optionIndexesInValue.slice(0);\n          var allOptionsIndex = allOptions.indexOf(options[index]);\n          var valueIndex = optionIndexesInValue.indexOf(allOptionsIndex);\n          if (valueIndex === -1) {\n            nextOptionIndexesInValue.push(allOptionsIndex);\n          } else {\n            nextOptionIndexesInValue.splice(valueIndex, 1);\n          }\n          nextValue = nextOptionIndexesInValue.map(function (i) {\n            return valueKey && valueKey.reduce ? applyKey(allOptions[i], valueKey) : allOptions[i];\n          });\n          nextSelected = nextOptionIndexesInValue;\n        } else {\n          nextValue = valueKey && valueKey.reduce ? applyKey(options[index], valueKey) : options[index];\n          nextSelected = index;\n        }\n        onChange(event, {\n          option: options[index],\n          value: nextValue,\n          selected: nextSelected\n        });\n      }\n    };\n  }, [multiple, onChange, optionIndexesInValue, options, allOptions, valueKey]);\n  var onClear = useCallback(function (event) {\n    onChange(event, {\n      option: undefined,\n      value: '',\n      selected: ''\n    });\n  }, [onChange]);\n  var onNextOption = useCallback(function (event) {\n    event.preventDefault();\n    var nextActiveIndex = activeIndex + 1;\n    while (nextActiveIndex < options.length && isDisabled(nextActiveIndex)) {\n      nextActiveIndex += 1;\n    }\n    if (nextActiveIndex !== options.length) {\n      setActiveIndex(nextActiveIndex);\n      setKeyboardNavigation(true);\n    }\n  }, [activeIndex, options, isDisabled]);\n  var onPreviousOption = useCallback(function (event) {\n    event.preventDefault();\n    var nextActiveIndex = activeIndex - 1;\n    if (nextActiveIndex === -1) {\n      var searchInput = searchRef.current;\n      var clearButton = clearRef.current;\n      if (clearButton && clearButton.focus && shouldShowClearButton('top')) {\n        setActiveIndex(nextActiveIndex);\n        setFocusWithoutScroll(clearButton);\n      } else if (searchInput && searchInput.focus) {\n        setActiveIndex(nextActiveIndex);\n        setFocusWithoutScroll(searchInput);\n      }\n    }\n    while (nextActiveIndex >= 0 && isDisabled(nextActiveIndex)) {\n      nextActiveIndex -= 1;\n    }\n    if (nextActiveIndex >= 0) {\n      setActiveIndex(nextActiveIndex);\n      setKeyboardNavigation(true);\n    }\n  }, [activeIndex, isDisabled, shouldShowClearButton]);\n  var onKeyDownOption = useCallback(function (event) {\n    if (!onSearch) {\n      var nextActiveIndex = options.findIndex(function (e, index) {\n        var label;\n        if (typeof e === 'object') {\n          label = e.label || applyKey(e, labelKey);\n        } else {\n          label = e;\n        }\n        return typeof label === 'string' && label.charAt(0).toLowerCase() === event.key.toLowerCase() && !isDisabled(index);\n      });\n      if (nextActiveIndex >= 0) {\n        event.preventDefault();\n        setActiveIndex(nextActiveIndex);\n        setKeyboardNavigation(true);\n      }\n    }\n    if (onKeyDown) {\n      onKeyDown(event);\n    }\n  }, [isDisabled, labelKey, onKeyDown, options, onSearch]);\n  var onActiveOption = useCallback(function (index) {\n    return function () {\n      if (!keyboardNavigation) setActiveIndex(index);\n    };\n  }, [keyboardNavigation]);\n  var onSelectOption = useCallback(function (event) {\n    if ((shouldShowClearButton('bottom') || shouldShowClearButton('top')) && containsFocus(clearRef.current)) {\n      onChange(event, {\n        option: undefined,\n        value: '',\n        selected: ''\n      });\n    } else if (activeIndex >= 0 && activeIndex < options.length) {\n      event.preventDefault(); // prevent submitting forms\n      selectOption(activeIndex)(event);\n    }\n  }, [activeIndex, selectOption, options, onChange, shouldShowClearButton]);\n  var customSearchInput = theme.select.searchInput;\n  var SelectTextInput = customSearchInput || TextInput;\n  var selectOptionsStyle = theme.select.options ? _extends({}, theme.select.options.box, theme.select.options.container) : {};\n  return /*#__PURE__*/React.createElement(Keyboard, {\n    onEnter: onSelectOption,\n    onSpace: onSelectOption,\n    onUp: onPreviousOption,\n    onDown: onNextOption,\n    onKeyDown: onKeyDownOption\n  }, /*#__PURE__*/React.createElement(StyledContainer, {\n    ref: ref,\n    as: Box,\n    id: id ? id + \"__select-drop\" : undefined,\n    dropHeight: dropHeight\n  }, onSearch && /*#__PURE__*/React.createElement(Box, {\n    pad: !customSearchInput ? 'xsmall' : undefined,\n    flex: false\n  }, /*#__PURE__*/React.createElement(SelectTextInput, {\n    focusIndicator: !customSearchInput,\n    size: \"small\",\n    ref: searchRef,\n    type: \"search\",\n    value: search || '',\n    placeholder: searchPlaceholder,\n    onChange: function onChange(event) {\n      var nextSearch = event.target.value;\n      setSearch(nextSearch);\n      setActiveIndex(-1);\n      onSearch(nextSearch);\n    }\n  })), shouldShowClearButton('top') && /*#__PURE__*/React.createElement(ClearButton, {\n    ref: clearRef,\n    clear: clear,\n    name: name,\n    onClear: onClear,\n    onFocus: function onFocus() {\n      return setActiveIndex(-1);\n    },\n    onMouseOver: function onMouseOver() {\n      return setActiveIndex(-1);\n    },\n    theme: theme\n  }), /*#__PURE__*/React.createElement(OptionsContainer, {\n    role: \"listbox\",\n    tabIndex: \"-1\",\n    ref: optionsRef,\n    \"aria-multiselectable\": multiple,\n    onMouseMove: function onMouseMove() {\n      return setKeyboardNavigation(false);\n    }\n  }, options.length > 0 ? /*#__PURE__*/React.createElement(InfiniteScroll, {\n    items: options,\n    step: theme.select.step,\n    onMore: onMore,\n    replace: replace,\n    show: activeIndex !== -1 ? activeIndex : undefined\n  }, function (option, index, optionRef) {\n    var optionDisabled = isDisabled(index);\n    var optionSelected = isSelected(index);\n    var optionActive = activeIndex === index;\n    // Determine whether the label is done as a child or\n    // as an option Button kind property.\n    var child;\n    var textComponent = false;\n    if (children) {\n      child = children(option, index, options, {\n        active: optionActive,\n        disabled: optionDisabled,\n        selected: optionSelected\n      });\n      if (typeof child === 'string' || child.props && child.props.children && typeof child.props.children === 'string') textComponent = true;\n    } else if (theme.select.options) {\n      child = /*#__PURE__*/React.createElement(Box, selectOptionsStyle, /*#__PURE__*/React.createElement(Text, theme.select.options.text, getOptionLabel(index, options, labelKey)));\n      textComponent = true;\n    }\n\n    // if we have a child, turn on plain, and hoverIndicator\n    return /*#__PURE__*/React.createElement(SelectOption\n    // eslint-disable-next-line react/no-array-index-key\n    , {\n      key: index\n      // merge optionRef and activeRef\n      ,\n\n      ref: function ref(node) {\n        // eslint-disable-next-line no-param-reassign\n        if (optionRef) optionRef.current = node;\n        if (optionActive) activeRef.current = node;\n      },\n      tabIndex: optionSelected ? '0' : '-1',\n      role: \"option\",\n      \"aria-setsize\": options.length,\n      \"aria-posinset\": index + 1,\n      \"aria-selected\": optionSelected,\n      focusIndicator: false,\n      \"aria-disabled\": optionDisabled || undefined,\n      plain: !child ? undefined : true,\n      align: \"start\",\n      kind: !child ? 'option' : undefined,\n      label: !child ? getOptionLabel(index, options, labelKey || valueKey) : undefined,\n      disabled: optionDisabled || undefined,\n      active: optionActive,\n      selected: optionSelected\n      // allow keyboard navigation to start from\n      // selected option after tabbing to it\n      ,\n\n      onFocus: function onFocus() {\n        return setActiveIndex(index);\n      },\n      onMouseOver: !optionDisabled ? onActiveOption(index) : undefined,\n      onClick: !optionDisabled ? selectOption(index) : undefined,\n      textComponent: textComponent\n    }, child);\n  }) : /*#__PURE__*/React.createElement(EmptySearchOption, {\n    emptySearchMessage: emptySearchMessage,\n    selectOptionsStyle: selectOptionsStyle,\n    theme: theme\n  })), shouldShowClearButton('bottom') && /*#__PURE__*/React.createElement(ClearButton, {\n    ref: clearRef,\n    clear: clear,\n    name: name,\n    onClear: onClear,\n    onFocus: function onFocus() {\n      return setActiveIndex(-1);\n    },\n    onMouseOver: function onMouseOver() {\n      return setActiveIndex(-1);\n    },\n    theme: theme\n  })));\n});\nexport { SelectContainer };","map":{"version":3,"names":["_excluded","_extends","Object","assign","bind","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutPropertiesLoose","excluded","sourceKeys","keys","indexOf","React","forwardRef","useCallback","useContext","useEffect","useRef","useState","styled","ThemeContext","setFocusWithoutScroll","getHoverIndicatorStyle","containsFocus","defaultProps","Box","Button","InfiniteScroll","Keyboard","Text","TextInput","StyledContainer","OptionsContainer","SelectOption","applyKey","useDisabled","getOptionLabel","getOptionValue","EmptySearchOption","StyledButton","withConfig","displayName","componentId","props","theme","ClearButton","_ref","ref","clear","onClear","name","rest","label","position","align","buttonLabel","createElement","a11yTitle","fill","onClick","focusIndicator","select","container","text","SelectContainer","_ref2","_ref2$children","children","disabled","disabledKey","dropHeight","_ref2$emptySearchMess","emptySearchMessage","id","labelKey","multiple","onChange","onKeyDown","onMore","onSearch","optionIndexesInValue","options","allOptions","searchPlaceholder","search","setSearch","selected","usingKeyboard","_ref2$value","value","valueKey","_ref2$replace","replace","shouldShowClearButton","hasValue","Boolean","showAtPosition","isDisabled","_useState","activeIndex","setActiveIndex","_useState2","keyboardNavigation","setKeyboardNavigation","searchRef","optionsRef","clearRef","activeRef","_activeRef$current","current","focus","timer","setTimeout","optionsNode","clearButton","searchInput","clearTimeout","isSelected","index","result","optionVal","Array","isArray","some","valueItem","valueValue","selectOption","event","nextValue","nextSelected","nextOptionIndexesInValue","slice","allOptionsIndex","valueIndex","push","splice","map","reduce","option","undefined","onNextOption","preventDefault","nextActiveIndex","onPreviousOption","onKeyDownOption","findIndex","e","charAt","toLowerCase","onActiveOption","onSelectOption","customSearchInput","SelectTextInput","selectOptionsStyle","box","onEnter","onSpace","onUp","onDown","as","pad","flex","size","type","placeholder","nextSearch","onFocus","onMouseOver","role","tabIndex","onMouseMove","items","step","show","optionRef","optionDisabled","optionSelected","optionActive","child","textComponent","active","node","plain","kind"],"sources":["C:/Users/malch/OneDrive/Documents/Projects/chucode/node_modules/grommet/es6/components/Select/SelectContainer.js"],"sourcesContent":["var _excluded = [\"clear\", \"onClear\", \"name\", \"theme\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nimport React, { forwardRef, useCallback, useContext, useEffect, useRef, useState } from 'react';\nimport styled, { ThemeContext } from 'styled-components';\nimport { setFocusWithoutScroll, getHoverIndicatorStyle, containsFocus } from '../../utils';\nimport { defaultProps } from '../../default-props';\nimport { Box } from '../Box';\nimport { Button } from '../Button';\nimport { InfiniteScroll } from '../InfiniteScroll';\nimport { Keyboard } from '../Keyboard';\nimport { Text } from '../Text';\nimport { TextInput } from '../TextInput';\nimport { StyledContainer, OptionsContainer, SelectOption } from './StyledSelect';\nimport { applyKey, useDisabled, getOptionLabel, getOptionValue } from './utils';\nimport { EmptySearchOption } from './EmptySearchOption';\n\n// ensure ClearButton receives visual indication of keyboard\nvar StyledButton = styled(Button).withConfig({\n  displayName: \"SelectContainer__StyledButton\",\n  componentId: \"sc-1wi0ul8-0\"\n})([\"&:focus{\", \"}\"], function (props) {\n  return getHoverIndicatorStyle('background', props.theme);\n});\nvar ClearButton = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var clear = _ref.clear,\n    onClear = _ref.onClear,\n    name = _ref.name,\n    theme = _ref.theme,\n    rest = _objectWithoutPropertiesLoose(_ref, _excluded);\n  var label = clear.label,\n    position = clear.position;\n  var align = position !== 'bottom' ? 'start' : 'center';\n  var buttonLabel = label || \"Clear \" + (name || 'selection');\n  return /*#__PURE__*/React.createElement(StyledButton, _extends({\n    a11yTitle: buttonLabel + \". Or, press \" + (position === 'bottom' ? 'shift tab' : 'down arrow') + \" to move to select options\",\n    fill: \"horizontal\",\n    ref: ref,\n    onClick: onClear,\n    focusIndicator: false\n  }, rest), /*#__PURE__*/React.createElement(Box, _extends({}, theme.select.clear.container, {\n    align: align\n  }), /*#__PURE__*/React.createElement(Text, theme.select.clear.text, buttonLabel)));\n});\nvar SelectContainer = /*#__PURE__*/forwardRef(function (_ref2, ref) {\n  var clear = _ref2.clear,\n    _ref2$children = _ref2.children,\n    children = _ref2$children === void 0 ? null : _ref2$children,\n    disabled = _ref2.disabled,\n    disabledKey = _ref2.disabledKey,\n    dropHeight = _ref2.dropHeight,\n    _ref2$emptySearchMess = _ref2.emptySearchMessage,\n    emptySearchMessage = _ref2$emptySearchMess === void 0 ? 'No matches found' : _ref2$emptySearchMess,\n    id = _ref2.id,\n    labelKey = _ref2.labelKey,\n    multiple = _ref2.multiple,\n    name = _ref2.name,\n    onChange = _ref2.onChange,\n    onKeyDown = _ref2.onKeyDown,\n    onMore = _ref2.onMore,\n    onSearch = _ref2.onSearch,\n    optionIndexesInValue = _ref2.optionIndexesInValue,\n    options = _ref2.options,\n    allOptions = _ref2.allOptions,\n    searchPlaceholder = _ref2.searchPlaceholder,\n    search = _ref2.search,\n    setSearch = _ref2.setSearch,\n    selected = _ref2.selected,\n    usingKeyboard = _ref2.usingKeyboard,\n    _ref2$value = _ref2.value,\n    value = _ref2$value === void 0 ? '' : _ref2$value,\n    valueKey = _ref2.valueKey,\n    _ref2$replace = _ref2.replace,\n    replace = _ref2$replace === void 0 ? true : _ref2$replace;\n  var theme = useContext(ThemeContext) || defaultProps.theme;\n  var shouldShowClearButton = useCallback(function (position) {\n    var hasValue = Boolean(multiple && value ? value.length : value);\n    var showAtPosition = position === 'bottom' ? (clear == null ? void 0 : clear.position) === 'bottom' : (clear == null ? void 0 : clear.position) !== 'bottom';\n    return clear && hasValue && showAtPosition;\n  }, [clear, multiple, value]);\n  var isDisabled = useDisabled(disabled, disabledKey, options, valueKey || labelKey);\n  var _useState = useState(usingKeyboard && !shouldShowClearButton('top') ? 0 : -1),\n    activeIndex = _useState[0],\n    setActiveIndex = _useState[1];\n  var _useState2 = useState(usingKeyboard),\n    keyboardNavigation = _useState2[0],\n    setKeyboardNavigation = _useState2[1];\n  var searchRef = useRef();\n  var optionsRef = useRef();\n  var clearRef = useRef();\n  var activeRef = useRef();\n\n  // for keyboard/screenreader, keep the active option in focus\n  useEffect(function () {\n    var _activeRef$current;\n    if (activeIndex >= 0) (_activeRef$current = activeRef.current) == null ? void 0 : _activeRef$current.focus();\n  }, [activeIndex]);\n\n  // set initial focus\n  useEffect(function () {\n    // need to wait for Drop to be ready\n    var timer = setTimeout(function () {\n      var optionsNode = optionsRef.current;\n      var clearButton = clearRef.current;\n      if (onSearch) {\n        var searchInput = searchRef.current;\n        if (searchInput && searchInput.focus) {\n          setFocusWithoutScroll(searchInput);\n        }\n      } else if (clear && clearButton && clearButton.focus && clear.position !== 'bottom') {\n        setFocusWithoutScroll(clearButton);\n      } else if (usingKeyboard && activeRef.current) {\n        setFocusWithoutScroll(activeRef.current);\n      } else if (optionsNode) {\n        setFocusWithoutScroll(optionsNode);\n      }\n    }, 100);\n    return function () {\n      return clearTimeout(timer);\n    };\n  }, [onSearch, usingKeyboard, clear]);\n  var isSelected = useCallback(function (index) {\n    var result;\n    if (selected) {\n      // deprecated in favor of value\n      result = selected.indexOf(index) !== -1;\n    } else {\n      var optionVal = getOptionValue(index, options, valueKey);\n      if (Array.isArray(value)) {\n        if (value.length === 0) {\n          result = false;\n        } else if (typeof value[0] !== 'object') {\n          result = value.indexOf(optionVal) !== -1;\n        } else if (valueKey) {\n          result = value.some(function (valueItem) {\n            var valueValue = typeof valueKey === 'function' ? valueKey(valueItem) : valueItem[valueKey] || valueItem[valueKey.key];\n            return valueValue === optionVal;\n          });\n        }\n      } else if (valueKey && value !== null && typeof value === 'object') {\n        var valueValue = typeof valueKey === 'function' ? valueKey(value) : value[valueKey];\n        result = valueValue === optionVal;\n      } else {\n        result = value === optionVal;\n      }\n    }\n    return result;\n  }, [selected, value, valueKey, options]);\n  var selectOption = useCallback(function (index) {\n    return function (event) {\n      if (onChange) {\n        var nextValue;\n        var nextSelected;\n        if (multiple) {\n          var nextOptionIndexesInValue = optionIndexesInValue.slice(0);\n          var allOptionsIndex = allOptions.indexOf(options[index]);\n          var valueIndex = optionIndexesInValue.indexOf(allOptionsIndex);\n          if (valueIndex === -1) {\n            nextOptionIndexesInValue.push(allOptionsIndex);\n          } else {\n            nextOptionIndexesInValue.splice(valueIndex, 1);\n          }\n          nextValue = nextOptionIndexesInValue.map(function (i) {\n            return valueKey && valueKey.reduce ? applyKey(allOptions[i], valueKey) : allOptions[i];\n          });\n          nextSelected = nextOptionIndexesInValue;\n        } else {\n          nextValue = valueKey && valueKey.reduce ? applyKey(options[index], valueKey) : options[index];\n          nextSelected = index;\n        }\n        onChange(event, {\n          option: options[index],\n          value: nextValue,\n          selected: nextSelected\n        });\n      }\n    };\n  }, [multiple, onChange, optionIndexesInValue, options, allOptions, valueKey]);\n  var onClear = useCallback(function (event) {\n    onChange(event, {\n      option: undefined,\n      value: '',\n      selected: ''\n    });\n  }, [onChange]);\n  var onNextOption = useCallback(function (event) {\n    event.preventDefault();\n    var nextActiveIndex = activeIndex + 1;\n    while (nextActiveIndex < options.length && isDisabled(nextActiveIndex)) {\n      nextActiveIndex += 1;\n    }\n    if (nextActiveIndex !== options.length) {\n      setActiveIndex(nextActiveIndex);\n      setKeyboardNavigation(true);\n    }\n  }, [activeIndex, options, isDisabled]);\n  var onPreviousOption = useCallback(function (event) {\n    event.preventDefault();\n    var nextActiveIndex = activeIndex - 1;\n    if (nextActiveIndex === -1) {\n      var searchInput = searchRef.current;\n      var clearButton = clearRef.current;\n      if (clearButton && clearButton.focus && shouldShowClearButton('top')) {\n        setActiveIndex(nextActiveIndex);\n        setFocusWithoutScroll(clearButton);\n      } else if (searchInput && searchInput.focus) {\n        setActiveIndex(nextActiveIndex);\n        setFocusWithoutScroll(searchInput);\n      }\n    }\n    while (nextActiveIndex >= 0 && isDisabled(nextActiveIndex)) {\n      nextActiveIndex -= 1;\n    }\n    if (nextActiveIndex >= 0) {\n      setActiveIndex(nextActiveIndex);\n      setKeyboardNavigation(true);\n    }\n  }, [activeIndex, isDisabled, shouldShowClearButton]);\n  var onKeyDownOption = useCallback(function (event) {\n    if (!onSearch) {\n      var nextActiveIndex = options.findIndex(function (e, index) {\n        var label;\n        if (typeof e === 'object') {\n          label = e.label || applyKey(e, labelKey);\n        } else {\n          label = e;\n        }\n        return typeof label === 'string' && label.charAt(0).toLowerCase() === event.key.toLowerCase() && !isDisabled(index);\n      });\n      if (nextActiveIndex >= 0) {\n        event.preventDefault();\n        setActiveIndex(nextActiveIndex);\n        setKeyboardNavigation(true);\n      }\n    }\n    if (onKeyDown) {\n      onKeyDown(event);\n    }\n  }, [isDisabled, labelKey, onKeyDown, options, onSearch]);\n  var onActiveOption = useCallback(function (index) {\n    return function () {\n      if (!keyboardNavigation) setActiveIndex(index);\n    };\n  }, [keyboardNavigation]);\n  var onSelectOption = useCallback(function (event) {\n    if ((shouldShowClearButton('bottom') || shouldShowClearButton('top')) && containsFocus(clearRef.current)) {\n      onChange(event, {\n        option: undefined,\n        value: '',\n        selected: ''\n      });\n    } else if (activeIndex >= 0 && activeIndex < options.length) {\n      event.preventDefault(); // prevent submitting forms\n      selectOption(activeIndex)(event);\n    }\n  }, [activeIndex, selectOption, options, onChange, shouldShowClearButton]);\n  var customSearchInput = theme.select.searchInput;\n  var SelectTextInput = customSearchInput || TextInput;\n  var selectOptionsStyle = theme.select.options ? _extends({}, theme.select.options.box, theme.select.options.container) : {};\n  return /*#__PURE__*/React.createElement(Keyboard, {\n    onEnter: onSelectOption,\n    onSpace: onSelectOption,\n    onUp: onPreviousOption,\n    onDown: onNextOption,\n    onKeyDown: onKeyDownOption\n  }, /*#__PURE__*/React.createElement(StyledContainer, {\n    ref: ref,\n    as: Box,\n    id: id ? id + \"__select-drop\" : undefined,\n    dropHeight: dropHeight\n  }, onSearch && /*#__PURE__*/React.createElement(Box, {\n    pad: !customSearchInput ? 'xsmall' : undefined,\n    flex: false\n  }, /*#__PURE__*/React.createElement(SelectTextInput, {\n    focusIndicator: !customSearchInput,\n    size: \"small\",\n    ref: searchRef,\n    type: \"search\",\n    value: search || '',\n    placeholder: searchPlaceholder,\n    onChange: function onChange(event) {\n      var nextSearch = event.target.value;\n      setSearch(nextSearch);\n      setActiveIndex(-1);\n      onSearch(nextSearch);\n    }\n  })), shouldShowClearButton('top') && /*#__PURE__*/React.createElement(ClearButton, {\n    ref: clearRef,\n    clear: clear,\n    name: name,\n    onClear: onClear,\n    onFocus: function onFocus() {\n      return setActiveIndex(-1);\n    },\n    onMouseOver: function onMouseOver() {\n      return setActiveIndex(-1);\n    },\n    theme: theme\n  }), /*#__PURE__*/React.createElement(OptionsContainer, {\n    role: \"listbox\",\n    tabIndex: \"-1\",\n    ref: optionsRef,\n    \"aria-multiselectable\": multiple,\n    onMouseMove: function onMouseMove() {\n      return setKeyboardNavigation(false);\n    }\n  }, options.length > 0 ? /*#__PURE__*/React.createElement(InfiniteScroll, {\n    items: options,\n    step: theme.select.step,\n    onMore: onMore,\n    replace: replace,\n    show: activeIndex !== -1 ? activeIndex : undefined\n  }, function (option, index, optionRef) {\n    var optionDisabled = isDisabled(index);\n    var optionSelected = isSelected(index);\n    var optionActive = activeIndex === index;\n    // Determine whether the label is done as a child or\n    // as an option Button kind property.\n    var child;\n    var textComponent = false;\n    if (children) {\n      child = children(option, index, options, {\n        active: optionActive,\n        disabled: optionDisabled,\n        selected: optionSelected\n      });\n      if (typeof child === 'string' || child.props && child.props.children && typeof child.props.children === 'string') textComponent = true;\n    } else if (theme.select.options) {\n      child = /*#__PURE__*/React.createElement(Box, selectOptionsStyle, /*#__PURE__*/React.createElement(Text, theme.select.options.text, getOptionLabel(index, options, labelKey)));\n      textComponent = true;\n    }\n\n    // if we have a child, turn on plain, and hoverIndicator\n    return /*#__PURE__*/React.createElement(SelectOption\n    // eslint-disable-next-line react/no-array-index-key\n    , {\n      key: index\n      // merge optionRef and activeRef\n      ,\n      ref: function ref(node) {\n        // eslint-disable-next-line no-param-reassign\n        if (optionRef) optionRef.current = node;\n        if (optionActive) activeRef.current = node;\n      },\n      tabIndex: optionSelected ? '0' : '-1',\n      role: \"option\",\n      \"aria-setsize\": options.length,\n      \"aria-posinset\": index + 1,\n      \"aria-selected\": optionSelected,\n      focusIndicator: false,\n      \"aria-disabled\": optionDisabled || undefined,\n      plain: !child ? undefined : true,\n      align: \"start\",\n      kind: !child ? 'option' : undefined,\n      label: !child ? getOptionLabel(index, options, labelKey || valueKey) : undefined,\n      disabled: optionDisabled || undefined,\n      active: optionActive,\n      selected: optionSelected\n      // allow keyboard navigation to start from\n      // selected option after tabbing to it\n      ,\n      onFocus: function onFocus() {\n        return setActiveIndex(index);\n      },\n      onMouseOver: !optionDisabled ? onActiveOption(index) : undefined,\n      onClick: !optionDisabled ? selectOption(index) : undefined,\n      textComponent: textComponent\n    }, child);\n  }) : /*#__PURE__*/React.createElement(EmptySearchOption, {\n    emptySearchMessage: emptySearchMessage,\n    selectOptionsStyle: selectOptionsStyle,\n    theme: theme\n  })), shouldShowClearButton('bottom') && /*#__PURE__*/React.createElement(ClearButton, {\n    ref: clearRef,\n    clear: clear,\n    name: name,\n    onClear: onClear,\n    onFocus: function onFocus() {\n      return setActiveIndex(-1);\n    },\n    onMouseOver: function onMouseOver() {\n      return setActiveIndex(-1);\n    },\n    theme: theme\n  })));\n});\nexport { SelectContainer };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}