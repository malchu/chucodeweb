{"ast":null,"code":"import React, { useCallback, useContext, useEffect, useRef } from 'react';\nexport var AnalyticsContext = /*#__PURE__*/React.createContext(function () {});\nexport var useAnalytics = function useAnalytics() {\n  return useContext(AnalyticsContext);\n};\nexport var AnalyticsProvider = function AnalyticsProvider(_ref) {\n  var onAnalytics = _ref.onAnalytics,\n    children = _ref.children;\n  var lastUrlRef = useRef();\n  var sendAnalytics = useCallback(function (data) {\n    return onAnalytics && onAnalytics(data);\n  }, [onAnalytics]);\n  useEffect(function () {\n    var observer;\n    if (onAnalytics) {\n      observer = new window.MutationObserver(function () {\n        var _window, _window$location;\n        var url = (_window = window) == null ? void 0 : (_window$location = _window.location) == null ? void 0 : _window$location.href;\n        var previousUrl = lastUrlRef.current;\n        if (url !== previousUrl) {\n          lastUrlRef.current = url;\n          sendAnalytics({\n            type: 'pageView',\n            url: url,\n            previousUrl: previousUrl\n          });\n        }\n      });\n      observer.observe(document, {\n        subtree: true,\n        childList: true\n      });\n    }\n    return function () {\n      var _observer;\n      return (_observer = observer) == null ? void 0 : _observer.disconnect();\n    };\n  }, [sendAnalytics, onAnalytics]);\n  return /*#__PURE__*/React.createElement(AnalyticsContext.Provider, {\n    value: sendAnalytics\n  }, children);\n};","map":{"version":3,"names":["React","useCallback","useContext","useEffect","useRef","AnalyticsContext","createContext","useAnalytics","AnalyticsProvider","_ref","onAnalytics","children","lastUrlRef","sendAnalytics","data","observer","window","MutationObserver","_window","_window$location","url","location","href","previousUrl","current","type","observe","document","subtree","childList","_observer","disconnect","createElement","Provider","value"],"sources":["C:/Users/malch/OneDrive/Documents/Projects/chucode/node_modules/grommet/es6/contexts/AnalyticsContext/AnalyticsContext.js"],"sourcesContent":["import React, { useCallback, useContext, useEffect, useRef } from 'react';\nexport var AnalyticsContext = /*#__PURE__*/React.createContext(function () {});\nexport var useAnalytics = function useAnalytics() {\n  return useContext(AnalyticsContext);\n};\nexport var AnalyticsProvider = function AnalyticsProvider(_ref) {\n  var onAnalytics = _ref.onAnalytics,\n    children = _ref.children;\n  var lastUrlRef = useRef();\n  var sendAnalytics = useCallback(function (data) {\n    return onAnalytics && onAnalytics(data);\n  }, [onAnalytics]);\n  useEffect(function () {\n    var observer;\n    if (onAnalytics) {\n      observer = new window.MutationObserver(function () {\n        var _window, _window$location;\n        var url = (_window = window) == null ? void 0 : (_window$location = _window.location) == null ? void 0 : _window$location.href;\n        var previousUrl = lastUrlRef.current;\n        if (url !== previousUrl) {\n          lastUrlRef.current = url;\n          sendAnalytics({\n            type: 'pageView',\n            url: url,\n            previousUrl: previousUrl\n          });\n        }\n      });\n      observer.observe(document, {\n        subtree: true,\n        childList: true\n      });\n    }\n    return function () {\n      var _observer;\n      return (_observer = observer) == null ? void 0 : _observer.disconnect();\n    };\n  }, [sendAnalytics, onAnalytics]);\n  return /*#__PURE__*/React.createElement(AnalyticsContext.Provider, {\n    value: sendAnalytics\n  }, children);\n};"],"mappings":"AAAA,OAAOA,KAAK,IAAIC,WAAW,EAAEC,UAAU,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AACzE,OAAO,IAAIC,gBAAgB,GAAG,aAAaL,KAAK,CAACM,aAAa,CAAC,YAAY,CAAC,CAAC,CAAC;AAC9E,OAAO,IAAIC,YAAY,GAAG,SAASA,YAAY,GAAG;EAChD,OAAOL,UAAU,CAACG,gBAAgB,CAAC;AACrC,CAAC;AACD,OAAO,IAAIG,iBAAiB,GAAG,SAASA,iBAAiB,CAACC,IAAI,EAAE;EAC9D,IAAIC,WAAW,GAAGD,IAAI,CAACC,WAAW;IAChCC,QAAQ,GAAGF,IAAI,CAACE,QAAQ;EAC1B,IAAIC,UAAU,GAAGR,MAAM,EAAE;EACzB,IAAIS,aAAa,GAAGZ,WAAW,CAAC,UAAUa,IAAI,EAAE;IAC9C,OAAOJ,WAAW,IAAIA,WAAW,CAACI,IAAI,CAAC;EACzC,CAAC,EAAE,CAACJ,WAAW,CAAC,CAAC;EACjBP,SAAS,CAAC,YAAY;IACpB,IAAIY,QAAQ;IACZ,IAAIL,WAAW,EAAE;MACfK,QAAQ,GAAG,IAAIC,MAAM,CAACC,gBAAgB,CAAC,YAAY;QACjD,IAAIC,OAAO,EAAEC,gBAAgB;QAC7B,IAAIC,GAAG,GAAG,CAACF,OAAO,GAAGF,MAAM,KAAK,IAAI,GAAG,KAAK,CAAC,GAAG,CAACG,gBAAgB,GAAGD,OAAO,CAACG,QAAQ,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGF,gBAAgB,CAACG,IAAI;QAC9H,IAAIC,WAAW,GAAGX,UAAU,CAACY,OAAO;QACpC,IAAIJ,GAAG,KAAKG,WAAW,EAAE;UACvBX,UAAU,CAACY,OAAO,GAAGJ,GAAG;UACxBP,aAAa,CAAC;YACZY,IAAI,EAAE,UAAU;YAChBL,GAAG,EAAEA,GAAG;YACRG,WAAW,EAAEA;UACf,CAAC,CAAC;QACJ;MACF,CAAC,CAAC;MACFR,QAAQ,CAACW,OAAO,CAACC,QAAQ,EAAE;QACzBC,OAAO,EAAE,IAAI;QACbC,SAAS,EAAE;MACb,CAAC,CAAC;IACJ;IACA,OAAO,YAAY;MACjB,IAAIC,SAAS;MACb,OAAO,CAACA,SAAS,GAAGf,QAAQ,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGe,SAAS,CAACC,UAAU,EAAE;IACzE,CAAC;EACH,CAAC,EAAE,CAAClB,aAAa,EAAEH,WAAW,CAAC,CAAC;EAChC,OAAO,aAAaV,KAAK,CAACgC,aAAa,CAAC3B,gBAAgB,CAAC4B,QAAQ,EAAE;IACjEC,KAAK,EAAErB;EACT,CAAC,EAAEF,QAAQ,CAAC;AACd,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}